<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/putaoshu/jdf">jdf (v2.1.40)</a>
</h1>
<h4>äº¬ä¸œå‰ç«¯å¼€å‘é›†æˆè§£å†³æ–¹æ¡ˆ</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf">module jdf</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.init">
            function <span class="apidocSignatureSpan">jdf.</span>init
            <span class="apidocSignatureSpan">(argv)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan"></span>jdf</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>base</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>base64</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>buildByAutoprefixer</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>buildCss</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>buildJs</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>buildWidget</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>compress</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>compressScheduler</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>concat</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>cssSprite</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>csslint</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>file</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>fileFormat</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>fileLint</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>ftp</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>ftpUpload</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>livereloadServer</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>openurl</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>output</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>server</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>vm</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.</span>widget</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.base">module jdf.base</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.arrayMax">
            function <span class="apidocSignatureSpan">jdf.base.</span>arrayMax
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.excludeFiles">
            function <span class="apidocSignatureSpan">jdf.base.</span>excludeFiles
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getCssExtname">
            function <span class="apidocSignatureSpan">jdf.base.</span>getCssExtname
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getDay">
            function <span class="apidocSignatureSpan">jdf.base.</span>getDay
            <span class="apidocSignatureSpan">(separator)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getJsExtname">
            function <span class="apidocSignatureSpan">jdf.base.</span>getJsExtname
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getTime">
            function <span class="apidocSignatureSpan">jdf.base.</span>getTime
            <span class="apidocSignatureSpan">(separator, hasMs)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getTimestamp">
            function <span class="apidocSignatureSpan">jdf.base.</span>getTimestamp
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getUrlParam">
            function <span class="apidocSignatureSpan">jdf.base.</span>getUrlParam
            <span class="apidocSignatureSpan">(url)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.getVar">
            function <span class="apidocSignatureSpan">jdf.base.</span>getVar
            <span class="apidocSignatureSpan">(t)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.httpget">
            function <span class="apidocSignatureSpan">jdf.base.</span>httpget
            <span class="apidocSignatureSpan">(url, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.imageFileType">
            function <span class="apidocSignatureSpan">jdf.base.</span>imageFileType
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.inArray">
            function <span class="apidocSignatureSpan">jdf.base.</span>inArray
            <span class="apidocSignatureSpan">(arr, str, include)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.isArray">
            function <span class="apidocSignatureSpan">jdf.base.</span>isArray
            <span class="apidocSignatureSpan">(obj)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.md5">
            function <span class="apidocSignatureSpan">jdf.base.</span>md5
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.merageObj">
            function <span class="apidocSignatureSpan">jdf.base.</span>merageObj
            <span class="apidocSignatureSpan">(obj1, obj2)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.replaceSlash">
            function <span class="apidocSignatureSpan">jdf.base.</span>replaceSlash
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.trim">
            function <span class="apidocSignatureSpan">jdf.base.</span>trim
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base.uniq">
            function <span class="apidocSignatureSpan">jdf.base.</span>uniq
            <span class="apidocSignatureSpan">(arr)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.base.</span>is</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.base.</span>placeholder</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.base.</span>reg</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.base64">module jdf.base64</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.base64.init">
            function <span class="apidocSignatureSpan">jdf.base64.</span>init
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.buildByAutoprefixer">module jdf.buildByAutoprefixer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.buildByAutoprefixer.init">
            function <span class="apidocSignatureSpan">jdf.buildByAutoprefixer.</span>init
            <span class="apidocSignatureSpan">(file, options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.buildCss">module jdf.buildCss</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.buildCss.init">
            function <span class="apidocSignatureSpan">jdf.buildCss.</span>init
            <span class="apidocSignatureSpan">(rSource, target)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.buildJs">module jdf.buildJs</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.buildJs.init">
            function <span class="apidocSignatureSpan">jdf.buildJs.</span>init
            <span class="apidocSignatureSpan">(src, dist)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.buildWidget">module jdf.buildWidget</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.buildWidget.init">
            function <span class="apidocSignatureSpan">jdf.buildWidget.</span>init
            <span class="apidocSignatureSpan">(inputPath, content, type, callback, param)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.buildWidget.insertJs">
            function <span class="apidocSignatureSpan">jdf.buildWidget.</span>insertJs
            <span class="apidocSignatureSpan">(content, jsLink, jsPlace)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.compress">module jdf.compress</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.addJsDepends">
            function <span class="apidocSignatureSpan">jdf.compress.</span>addJsDepends
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.appendWebpCSSFIX">
            function <span class="apidocSignatureSpan">jdf.compress.</span>appendWebpCSSFIX
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.css">
            function <span class="apidocSignatureSpan">jdf.compress.</span>css
            <span class="apidocSignatureSpan">(source, isdebug)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.css2">
            function <span class="apidocSignatureSpan">jdf.compress.</span>css2
            <span class="apidocSignatureSpan">(source, isdebug)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.cssImagesUrlReplace">
            function <span class="apidocSignatureSpan">jdf.compress.</span>cssImagesUrlReplace
            <span class="apidocSignatureSpan">(source, str, cdn, prefix, suffix)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.dir">
            function <span class="apidocSignatureSpan">jdf.compress.</span>dir
            <span class="apidocSignatureSpan">(src, dest)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.html">
            function <span class="apidocSignatureSpan">jdf.compress.</span>html
            <span class="apidocSignatureSpan">(sourceCode)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.imagesSuffix">
            function <span class="apidocSignatureSpan">jdf.compress.</span>imagesSuffix
            <span class="apidocSignatureSpan">(source, str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.init">
            function <span class="apidocSignatureSpan">jdf.compress.</span>init
            <span class="apidocSignatureSpan">(rSource, isdebug, config, getProject, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.js">
            function <span class="apidocSignatureSpan">jdf.compress.</span>js
            <span class="apidocSignatureSpan">(source, isdebug)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.png">
            function <span class="apidocSignatureSpan">jdf.compress.</span>png
            <span class="apidocSignatureSpan">(source, target, haslog)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.setPrefixBanner">
            function <span class="apidocSignatureSpan">jdf.compress.</span>setPrefixBanner
            <span class="apidocSignatureSpan">(bannerType, source, result)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compress.webp">
            function <span class="apidocSignatureSpan">jdf.compress.</span>webp
            <span class="apidocSignatureSpan">(source, target, quant, callback, haslog)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.compressScheduler">module jdf.compressScheduler</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">jdf.compressScheduler.</span>isdebug</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.compressScheduler.init">
            function <span class="apidocSignatureSpan">jdf.compressScheduler.</span>init
            <span class="apidocSignatureSpan">(outputdirName, isdebug, callBack)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.concat">module jdf.concat</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.concat.init">
            function <span class="apidocSignatureSpan">jdf.concat.</span>init
            <span class="apidocSignatureSpan">(rSource)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.cssSprite">module jdf.cssSprite</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.cssSprite.init">
            function <span class="apidocSignatureSpan">jdf.cssSprite.</span>init
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.cssSprite.overall">
            function <span class="apidocSignatureSpan">jdf.cssSprite.</span>overall
            <span class="apidocSignatureSpan">(source)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.cssSprite.scatter">
            function <span class="apidocSignatureSpan">jdf.cssSprite.</span>scatter
            <span class="apidocSignatureSpan">(source, content, sourceOrigin)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.csslint">module jdf.csslint</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.csslint.init">
            function <span class="apidocSignatureSpan">jdf.csslint.</span>init
            <span class="apidocSignatureSpan">(filename, fileContent)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.file">module jdf.file</a><ol>

        <li>

            <span class="apidocSignatureSpan">boolean <span class="apidocSignatureSpan">jdf.file.</span>isWin</span>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.base64Encode">
            function <span class="apidocSignatureSpan">jdf.file.</span>base64Encode
            <span class="apidocSignatureSpan">(file)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.copy">
            function <span class="apidocSignatureSpan">jdf.file.</span>copy
            <span class="apidocSignatureSpan">(source, target, include, exclude, uncover, move , logTag, encoding)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.copyBinary">
            function <span class="apidocSignatureSpan">jdf.file.</span>copyBinary
            <span class="apidocSignatureSpan">(srcFile, destFile)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.currentDir">
            function <span class="apidocSignatureSpan">jdf.file.</span>currentDir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.del">
            function <span class="apidocSignatureSpan">jdf.file.</span>del
            <span class="apidocSignatureSpan">(source, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.delAsync">
            function <span class="apidocSignatureSpan">jdf.file.</span>delAsync
            <span class="apidocSignatureSpan">(target)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.download">
            function <span class="apidocSignatureSpan">jdf.file.</span>download
            <span class="apidocSignatureSpan">(source, target, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.excludeFiles">
            function <span class="apidocSignatureSpan">jdf.file.</span>excludeFiles
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.exists">
            function <span class="apidocSignatureSpan">jdf.file.</span>exists
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.filter">
            function <span class="apidocSignatureSpan">jdf.file.</span>filter
            <span class="apidocSignatureSpan">(source, include, exclude)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.getdirlist">
            function <span class="apidocSignatureSpan">jdf.file.</span>getdirlist
            <span class="apidocSignatureSpan">(source, include, exclude)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.isBlankDir">
            function <span class="apidocSignatureSpan">jdf.file.</span>isBlankDir
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.isDir">
            function <span class="apidocSignatureSpan">jdf.file.</span>isDir
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.isFile">
            function <span class="apidocSignatureSpan">jdf.file.</span>isFile
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.mkdir">
            function <span class="apidocSignatureSpan">jdf.file.</span>mkdir
            <span class="apidocSignatureSpan">(p, mode, made)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.moveFolderAsync">
            function <span class="apidocSignatureSpan">jdf.file.</span>moveFolderAsync
            <span class="apidocSignatureSpan">(source, target)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.pathFormat">
            function <span class="apidocSignatureSpan">jdf.file.</span>pathFormat
            <span class="apidocSignatureSpan">(str)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.read">
            function <span class="apidocSignatureSpan">jdf.file.</span>read
            <span class="apidocSignatureSpan">(path, encodeing)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.readJSON">
            function <span class="apidocSignatureSpan">jdf.file.</span>readJSON
            <span class="apidocSignatureSpan">(url, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.realpath">
            function <span class="apidocSignatureSpan">jdf.file.</span>realpath
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.renameFile">
            function <span class="apidocSignatureSpan">jdf.file.</span>renameFile
            <span class="apidocSignatureSpan">(path, dest)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.tar">
            function <span class="apidocSignatureSpan">jdf.file.</span>tar
            <span class="apidocSignatureSpan">(source, target, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.file.write">
            function <span class="apidocSignatureSpan">jdf.file.</span>write
            <span class="apidocSignatureSpan">(path, source, encodeing)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.fileFormat">module jdf.fileFormat</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.fileFormat.init">
            function <span class="apidocSignatureSpan">jdf.fileFormat.</span>init
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.fileLint">module jdf.fileLint</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.fileLint.init">
            function <span class="apidocSignatureSpan">jdf.fileLint.</span>init
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.ftp">module jdf.ftp</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.download">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>download
            <span class="apidocSignatureSpan">(source, target, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.downloadMain">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>downloadMain
            <span class="apidocSignatureSpan">(source, target, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.get">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>get
            <span class="apidocSignatureSpan">(source, target, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.list">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>list
            <span class="apidocSignatureSpan">(source, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.listMain">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>listMain
            <span class="apidocSignatureSpan">(source, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.mkdir">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>mkdir
            <span class="apidocSignatureSpan">(source, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.put">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>put
            <span class="apidocSignatureSpan">(source, target, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.tryConnect">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>tryConnect
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.upload">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>upload
            <span class="apidocSignatureSpan">(source, target, include, exclude, uncover, move, logTag, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftp.uploadMain">
            function <span class="apidocSignatureSpan">jdf.ftp.</span>uploadMain
            <span class="apidocSignatureSpan">(source, target, include, exclude, uncover, move, logTag, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.ftp.</span>client</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.ftpUpload">module jdf.ftpUpload</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.ftpUpload.init">
            function <span class="apidocSignatureSpan">jdf.ftpUpload.</span>init
            <span class="apidocSignatureSpan">(argv, hasConfig, haslog, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.jdf">module jdf.jdf</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.argvInit">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>argvInit
            <span class="apidocSignatureSpan">(runType, argv, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.bgCopyDir">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>bgCopyDir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.bgMkdir">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>bgMkdir
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.buildCss">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>buildCss
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.buildMain">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>buildMain
            <span class="apidocSignatureSpan">(type, param)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.checkProjectDir">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>checkProjectDir
            <span class="apidocSignatureSpan">(filename)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.clean">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>clean
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.createStandardDir">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>createStandardDir
            <span class="apidocSignatureSpan">(dir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.download">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>download
            <span class="apidocSignatureSpan">(pathItem, targetDir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.getConfig">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>getConfig
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.getIp">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>getIp
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.getLocalServerPort">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>getLocalServerPort
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.getProjectPath">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>getProjectPath
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.help">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>help
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.init">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>init
            <span class="apidocSignatureSpan">(argv)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.install">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>install
            <span class="apidocSignatureSpan">(type, dir)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.scan">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>scan
            <span class="apidocSignatureSpan">(host, start, end, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.server">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>server
            <span class="apidocSignatureSpan">(currentDir, autoOpenurl, comboDebug, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.version">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>version
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.jdf.watch">
            function <span class="apidocSignatureSpan">jdf.jdf.</span>watch
            <span class="apidocSignatureSpan">(type, callback, data)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.jdf.</span>config</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">jdf.jdf.</span>dot</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.livereloadServer">module jdf.livereloadServer</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.livereloadServer.init">
            function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>init
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.livereloadServer.reloadBrowser">
            function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>reloadBrowser
            <span class="apidocSignatureSpan">(paths)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.livereloadServer.start">
            function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>start
            <span class="apidocSignatureSpan">(callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.livereloadServer.stop">
            function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>stop
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.openurl">module jdf.openurl</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.openurl.open">
            function <span class="apidocSignatureSpan">jdf.openurl.</span>open
            <span class="apidocSignatureSpan">(url, callback)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.output">module jdf.output</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.output.init">
            function <span class="apidocSignatureSpan">jdf.output.</span>init
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.server">module jdf.server</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.server.copyright">
            function <span class="apidocSignatureSpan">jdf.server.</span>copyright
            <span class="apidocSignatureSpan">(port)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.server.getDirList">
            function <span class="apidocSignatureSpan">jdf.server.</span>getDirList
            <span class="apidocSignatureSpan">(realPath, pathname, port)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.server.getIp">
            function <span class="apidocSignatureSpan">jdf.server.</span>getIp
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.server.init">
            function <span class="apidocSignatureSpan">jdf.server.</span>init
            <span class="apidocSignatureSpan">(serverCurrentDir, port, cdn, replacePath, comboDebug, addJsDepends, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.server.joinbuffers">
            function <span class="apidocSignatureSpan">jdf.server.</span>joinbuffers
            <span class="apidocSignatureSpan">(bufferStore)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.vm">module jdf.vm</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.vm.parse">
            function <span class="apidocSignatureSpan">jdf.vm.</span>parse
            <span class="apidocSignatureSpan">(str, dirname)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.vm.rander">
            function <span class="apidocSignatureSpan">jdf.vm.</span>rander
            <span class="apidocSignatureSpan">(vmSource, dataObj, dirname)</span>
            </a>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.jdf.widget">module jdf.widget</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.all">
            function <span class="apidocSignatureSpan">jdf.widget.</span>all
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.create">
            function <span class="apidocSignatureSpan">jdf.widget.</span>create
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.hasWidget">
            function <span class="apidocSignatureSpan">jdf.widget.</span>hasWidget
            <span class="apidocSignatureSpan">(path)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.install">
            function <span class="apidocSignatureSpan">jdf.widget.</span>install
            <span class="apidocSignatureSpan">(name, force)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.list">
            function <span class="apidocSignatureSpan">jdf.widget.</span>list
            <span class="apidocSignatureSpan">()</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.pathCheck">
            function <span class="apidocSignatureSpan">jdf.widget.</span>pathCheck
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.preview">
            function <span class="apidocSignatureSpan">jdf.widget.</span>preview
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.publish">
            function <span class="apidocSignatureSpan">jdf.widget.</span>publish
            <span class="apidocSignatureSpan">(name, force)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.search">
            function <span class="apidocSignatureSpan">jdf.widget.</span>search
            <span class="apidocSignatureSpan">(name)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.jdf.widget.templete">
            function <span class="apidocSignatureSpan">jdf.widget.</span>templete
            <span class="apidocSignatureSpan">(str, title)</span>
            </a>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf" id="apidoc.module.jdf">module jdf</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.init" id="apidoc.element.jdf.init">
        function <span class="apidocSignatureSpan">jdf.</span>init
        <span class="apidocSignatureSpan">(argv)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (argv) {
		jdf.init(argv);
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>
















































</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.base" id="apidoc.module.jdf.base">module jdf.base</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.base.arrayMax" id="apidoc.element.jdf.base.arrayMax">
        function <span class="apidocSignatureSpan">jdf.base.</span>arrayMax
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">arrayMax = function (arr) {
    if (util.isArray(arr)) {
        var arrTemp=arr[0];
        for (var i=0; i&lt;arr.length; i++){
            if(arr[i]&gt;arrTemp){
                arrTemp = arr[i];
            }
        }
        return arrTemp;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @å–localServerPort
 */
jdf.getLocalServerPort = function(callback){
    var localServerPort = jdf.config.localServerPort;
    jdf.scan('localhost', localServerPort, localServerPort, function(result) {
        if(result.length){
            jdf.scan('localhost', 3000, 3050, function(result) {
                var r = result.length == 0 ? 3000 : $.<span class="apidocCodeKeywordSpan">arrayMax</span>(result) + 1;
                callback(r);
            });
        }else{
            callback(localServerPort);
        }
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.excludeFiles" id="apidoc.element.jdf.base.excludeFiles">
        function <span class="apidocSignatureSpan">jdf.base.</span>excludeFiles
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">excludeFiles = function (){
    return '\\.svn|Thumbs\\.db|\\.DS_Store|\\.git|\\.eslintrc|\\.gitignore|npm-debug\\.log|\\.npmignore|\\.vm|\\.smarty|\\.tpl|\\.scss|\\.less|\\.psd';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			if (!f.exists(target) &amp;&amp; f.isDir(source)) {
				f.mkdir(target);
                //fs.chmodSync(target, 666);
			}
			
			if(f.isDir(source)){
				fs.readdirSync(source).forEach(function(name){
					if(name != '.' &amp;&amp; name != '..' &amp;&amp; f.<span class="apidocCodeKeywordSpan">excludeFiles
</span>(name)  ) {
						removedAll = f.copy(source + '/' + name,target + '/' + name, include, exclude, uncover, move , logTag ) &amp;#
x26;&amp; removedAll;
					}
				});

				//Bug  return binding.rmdir(pathModule._makeLong(path));
				//https://github.com/joyent/node/issues/3051
				//Yes, fs.rmdirSync throw an error, as you see. Because the directory still has a file even after fs.unlinkSync is called to
 remove the file.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getCssExtname" id="apidoc.element.jdf.base.getCssExtname">
        function <span class="apidocSignatureSpan">jdf.base.</span>getCssExtname
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getCssExtname = function (filename) {
    return filename.replace(/(scss|less)$/g, 'css');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				if(jdf.config.build.autoprefixer){
					require('./buildByAutoprefixer.js').init({contents:file.contents, path:file.path }, jdf.config.build.autoprefixerOptions
)
				}else{
					f.write(file.path, file.contents);
				}
			}	

			target = $.<span class="apidocCodeKeywordSpan">getCssExtname</span>(target);

			if( $.is.less(source) || $.is.sass(source) ) {
				var sourceContent = f.read(source);
				//ä¸ºç©º "node-sass": "0.9.3" ç¼–è¯‘ä¼šæŠ¥é”™ https://github.com/sass/node-sass/issues/381
				if(sourceContent==''){
					return;	
				}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getDay" id="apidoc.element.jdf.base.getDay">
        function <span class="apidocSignatureSpan">jdf.base.</span>getDay
        <span class="apidocSignatureSpan">(separator)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDay = function (separator) {
    if (typeof(separator) == 'undefined') {
        separator = '-';
    }
    var myDate = new Date();
    var year = myDate.getFullYear();
    var month = myDate.getMonth() + 1;
    month = month &lt; 10 ? '0' + month : month;
    var day = myDate.getDate();
    day = day &lt; 10 ? '0' + day : day;
    return year + separator + month + separator + day;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
compress.setPrefixBanner = function(bannerType, source, result) {
var projectPath = jdf.getProjectPath() ? jdf.getProjectPath().replace('/', '-') + ' ' : ''
;;
var basename = path.basename(source);
var banner = '';

if (bannerType == 1) {
    banner = '/* ' + projectPath + basename + ' Date:' + $.<span class="apidocCodeKeywordSpan">getDay</span>(&amp;#
x27;-') + ' ' + $.getTime(':', false) + ' */\r\n';
}

if (bannerType == 2) {
    banner = '/* ' + projectPath + basename + ' md5:' + $.md5(result) + ' */\r\n';
}

return banner;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getJsExtname" id="apidoc.element.jdf.base.getJsExtname">
        function <span class="apidocSignatureSpan">jdf.base.</span>getJsExtname
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getJsExtname = function (filename) {
    return filename.replace(/babel$/, 'js');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getTime" id="apidoc.element.jdf.base.getTime">
        function <span class="apidocSignatureSpan">jdf.base.</span>getTime
        <span class="apidocSignatureSpan">(separator, hasMs)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTime = function (separator, hasMs) {
    if (typeof(separator) == 'undefined') {
        separator = ':';
    }
    var myDate = new Date();
    var hour = myDate.getHours();
    hour = hour &lt; 10 ? '0' + hour : hour;
    var mint = myDate.getMinutes();
    mint = mint &lt; 10 ? '0' + mint : mint;
    var seconds = myDate.getSeconds();
    seconds = seconds &lt; 10 ? '0' + seconds : seconds;
    var ms = myDate.getMilliseconds();
    var result = hour + separator + mint + separator + seconds;
    if (typeof(hasMs) != 'undeinfed' &amp;&amp; hasMs) {
        result += separator + ms;
    }
    return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
* @å–å½“å‰æ—¶é—´æˆ³
* @return 1439361919265
*/
$.getTimestamp = function() {
   return new Date().<span class="apidocCodeKeywordSpan">getTime</span>();
}

/**
* @name $.isArray
* @param {All} obj ä¸»ä½“
* @return {Boolean} true/false
*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getTimestamp" id="apidoc.element.jdf.base.getTimestamp">
        function <span class="apidocSignatureSpan">jdf.base.</span>getTimestamp
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getTimestamp = function () {
    return new Date().getTime();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * @æ€»çš„åˆå§‹åŒ–å‡½æ•° from ../index.js
 * @commander
 */
jdf.init = function(argv) {
//è®¾ç½®å…¨å±€æ—¶é—´æˆ³
jdf.config.suffix = $.<span class="apidocCodeKeywordSpan">getTimestamp</span>();

//è¯»å–é…ç½®æ–‡ä»¶
jdf.getConfig(function(configData) {
    var cmd2 = argv[2];
    jdf.currentDir = f.currentDir();
    jdf.config.argv=argv;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getUrlParam" id="apidoc.element.jdf.base.getUrlParam">
        function <span class="apidocSignatureSpan">jdf.base.</span>getUrlParam
        <span class="apidocSignatureSpan">(url)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getUrlParam = function (url) {
    var urlParseRE = /^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([
0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/;
    return urlParseRE.exec(url);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	$.httpget('http://www.baidu.com/?tn=sitehao123', function (data){
		console.log(data);
	});
 */
$.httpget = function(url, callback) {
var http = require('http');

var matches = $.<span class="apidocCodeKeywordSpan">getUrlParam</span>(url);
var host = matches[6];
var param = (matches[13] ? matches[13] : '') + (matches[16] ? matches[16] : '') + (matches[17] ? matches[17] : &amp;#
x27;');

if (typeof(callback) == 'undefined') {
    var callback = null;
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.getVar" id="apidoc.element.jdf.base.getVar">
        function <span class="apidocSignatureSpan">jdf.base.</span>getVar
        <span class="apidocSignatureSpan">(t)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getVar = function (t) {
    if (typeof(t) != 'undefined') {
        return t;
    }
    return '';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    if(result) {
        console.log(os.EOL+filename+' is OK.');
    }else{
        console.log(colors.yellow(os.EOL + 'jdf jslint: ' + filename));
        Jslint.JSLINT.errors.forEach(function (error, index) {
            if(error){
                console.log('#'+(index+1));
                console.log(colors.red('&gt; '), 'line: ' + $.<span class="apidocCodeKeywordSpan">getVar<!--
span-->(error.line) + ', column: ' + $.getVar(error.character));
                console.log(colors.red('&gt; '), 'msg: ' + $.getVar(error.reason));
                console.log(colors.red('&gt; '), 'at: ' + $.getVar(error.evidence).replace(/\t/g,''
;));
            }
        });
    }
}
...</span></pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.httpget" id="apidoc.element.jdf.base.httpget">
        function <span class="apidocSignatureSpan">jdf.base.</span>httpget
        <span class="apidocSignatureSpan">(url, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">httpget = function (url, callback) {
    var http = require('http');

    var matches = $.getUrlParam(url);
    var host = matches[6];
    var param = (matches[13] ? matches[13] : '') + (matches[16] ? matches[16] : '') + (matches[17] ? matches[17] : '');

    if (typeof(callback) == 'undefined') {
        var callback = null;
    }

    var options = {
        host: host,
        path: param,
        callback: callback
    };

    var requestCallback = function(response) {
        var str = '';

        response.on('data', function(chunk) {
            str += chunk;
        });

        response.on('end', function() {
            if (options.callback) options.callback(str);
        });
    }

    var req = http.request(options, requestCallback);
    req.on('error', function(e) {
        //console.log(e);
    });
    req.end();

    req.setTimeout(500, function() {
        req.abort();
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * @http get
 * @param {String} url åŸŸå
 * @param {Function} callback å›žè°ƒ
 * @example
	$.<span class="apidocCodeKeywordSpan">httpget</span>('http://www.baidu.com/?tn=sitehao123', function (data){
		console.log(data);
	});
 */
$.httpget = function(url, callback) {
var http = require('http');

var matches = $.getUrlParam(url);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.imageFileType" id="apidoc.element.jdf.base.imageFileType">
        function <span class="apidocSignatureSpan">jdf.base.</span>imageFileType
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">imageFileType = function () {
    return 'svg|tiff|wbmp|png|bmp|fax|gif|ico|jfif|jpe|jpeg|jpg|cur|eot|ttf|woff';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    },
    //å«æœ‰http,https
    httpLink: function(str) {
        return /^http:\/\/|https:\/\/|\/\/|^\/\//.test(str);
    },
    //æ˜¯å¦ä¸ºå›¾ç‰‡url
    imageFile: function(str) {
        var reg = new RegExp('.' + '(' + $.<span class="apidocCodeKeywordSpan">imageFileType</span>() + '
;)');
        return reg.test(str);
    },
    babel: function(pathName) {
        return path.extname(pathName) === '.babel';
    }
},
/**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.inArray" id="apidoc.element.jdf.base.inArray">
        function <span class="apidocSignatureSpan">jdf.base.</span>inArray
        <span class="apidocSignatureSpan">(arr, str, include)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">inArray = function (arr, str, include) {
    if (util.isArray(arr)) {
        var res = false;
        arr.forEach(function(item) {
            if (typeof(include) != 'undefined' &amp;&amp; include) {
                var reg = new RegExp(str, 'gm')
                if (reg.test(item)) {
                    res = true;
                }
            } else {
                if (item == str) {
                    res = true;
                }
            }
        });
        return res;
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			//widgetSträ¸­çš„name
			var widgetName = $.trim(widgetArray[1]);
			var widgetDir = '/widget/' +widgetName;
			//widget ç›®å½•
			var fileDir = path.normalize(jdf.currentDir + widgetDir);
			var widgetInputName = jdf.config.widgetInputName;

			if(widgetInputName.length &gt; 0 &amp;&amp; !$.<span class="apidocCodeKeywordSpan">inArray</span>(widgetInputName, widgetName
)){
				return;
			}

			//å½“å‰å·¥ç¨‹ä¸å­˜çš„jdjå’Œjdmæ¨¡å—ä»ŽæœåŠ¡ç«¯æ–‡ä»¶å¤åˆ¶è‡³å½“å‰è¿‡æ¥
			/*
			if (isJM &amp;&amp; !f.exists(fileDir)){
				var source = path.normalize(jdf[widgetType+'Dir']+ widgetDir);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.isArray" id="apidoc.element.jdf.base.isArray">
        function <span class="apidocSignatureSpan">jdf.base.</span>isArray
        <span class="apidocSignatureSpan">(obj)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isArray = function (obj) {
    return Object.prototype.toString.apply(obj) === '[object Array]';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * @æ•°ç»„åŽ»é‡
 * @ç®—æ³•: è®¾ç½®æˆä¸€ä¸ªå¯¹è±¡çš„å±žæ€§
 */
$.uniq = function(arr) {
if ($.<span class="apidocCodeKeywordSpan">isArray</span>(arr)) {
    var obj = {};
    for (var i = 0; i &lt; arr.length; i++) {
        obj[arr[i]] = i;
    }
    arr = [];
    var j = 0;
    for (var i in obj) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.md5" id="apidoc.element.jdf.base.md5">
        function <span class="apidocSignatureSpan">jdf.base.</span>md5
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">md5 = function (str) {
    return crypto.createHash('md5').update(str).digest('hex');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
   var banner = '';

   if (bannerType == 1) {
       banner = '/* ' + projectPath + basename + ' Date:' + $.getDay('-') + ' ' + $.getTime
(':', false) + ' */\r\n';
   }

   if (bannerType == 2) {
       banner = '/* ' + projectPath + basename + ' md5:' + $.<span class="apidocCodeKeywordSpan">md5</span>(
result) + ' */\r\n';
   }

   return banner;
}

/**
* @htmlæ–‡ä»¶åŽ‹ç¼©
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.merageObj" id="apidoc.element.jdf.base.merageObj">
        function <span class="apidocSignatureSpan">jdf.base.</span>merageObj
        <span class="apidocSignatureSpan">(obj1, obj2)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">merageObj = function (obj1, obj2) {
    for (var p in obj2) {
        try {
            if (obj2[p].constructor == Object) {
                obj1[p] = $.merageObj(obj1[p], obj2[p]);
            } else {
                obj1[p] = obj2[p];
            }
        } catch (e) {
            obj1[p] = obj2[p];
        }
    }
    return obj1;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @å¯¹è±¡merage
 * @obj2çš„æƒé‡å¤§
 */
$.merageObj = function(obj1, obj2) {
for (var p in obj2) {
    try {
        if (obj2[p].constructor == Object) {
            obj1[p] = $.<span class="apidocCodeKeywordSpan">merageObj</span>(obj1[p], obj2[p]);
        } else {
            obj1[p] = obj2[p];
        }
    } catch (e) {
        obj1[p] = obj2[p];
    }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.replaceSlash" id="apidoc.element.jdf.base.replaceSlash">
        function <span class="apidocSignatureSpan">jdf.base.</span>replaceSlash
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">replaceSlash = function (path) {
    return path.replace(/\/\//gm, '/');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var outputJs = '/' + jdf.config.jsDir+'/'+pkgName+'.js';

			var cssOutputDir = '/' + jdf.config.cssDir.replace(jdf.config.baseDir+'/', '') +'/';
			var jsOutputDir = '/' + jdf.config.jsDir.replace(jdf.config.baseDir+'/', '') +'/';
			if (isOutput) {
				if(jdf.config.cdn){
					outputCss = '/' +  jdf.getProjectPath() + cssOutputDir+pkgName+'.css';
					outputCss = $.<span class="apidocCodeKeywordSpan">replaceSlash</span>(outputCss);
					outputCss = jdf.config.cdn + outputCss;

					outputJs = '/' + jdf.getProjectPath() + jsOutputDir+pkgName+'.js';
					outputJs = $.replaceSlash(outputJs);
					outputJs = jdf.config.cdn + outputJs;
				}else{
					outputCss = addgetProjectPath(cssOutputDir+pkgName+'.css');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.trim" id="apidoc.element.jdf.base.trim">
        function <span class="apidocSignatureSpan">jdf.base.</span>trim
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">trim = function (str) {
    return str.replace(/\s/g, '');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					return;
				}
			}

			//{%widget name=" "%}
			var widgetStr = widgetArray[0];
			//widgetSträ¸­çš„name
			var widgetName = $.<span class="apidocCodeKeywordSpan">trim</span>(widgetArray[1]);
			var widgetDir = '/widget/' +widgetName;
			//widget ç›®å½•
			var fileDir = path.normalize(jdf.currentDir + widgetDir);
			var widgetInputName = jdf.config.widgetInputName;

			if(widgetInputName.length &gt; 0 &amp;&amp; !$.inArray(widgetInputName, widgetName)){
				return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.base.uniq" id="apidoc.element.jdf.base.uniq">
        function <span class="apidocSignatureSpan">jdf.base.</span>uniq
        <span class="apidocSignatureSpan">(arr)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">uniq = function (arr) {
    if ($.isArray(arr)) {
        var obj = {};
        for (var i = 0; i &lt; arr.length; i++) {
            obj[arr[i]] = i;
        }
        arr = [];
        var j = 0;
        for (var i in obj) {
            arr[j] = i;
            j += 1;
        }
    }
    return arr;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	
			//cssé“¾æŽ¥åŠ&nbsp;å‰ç¼€
			if(jdf.config.output.combineWidgetCss &amp;&amp; cssFile !=''){
				var cssLink = $.placeholder.cssLink(outputCss);
				content = $.placeholder.insertHead(content, cssLink  );
				f.write(path.normalize(outputDir+'/' + jdf.config.cssDir+'/'+pkgName+'.css') , cssFile);
			}else if(jdf.config.output.cssCombo &amp;&amp; cssComboArr.length){
				cssComboArr = $.<span class="apidocCodeKeywordSpan">uniq</span>(cssComboArr);
				var outputCss1 = '/' +  jdf.getProjectPath() +'/widget/??'+cssComboArr.join(',');
				outputCss1 = jdf.config.cdn + $.replaceSlash(outputCss1);
				var cssLink1 = $.placeholder.cssLink(outputCss1);
				content = $.placeholder.insertHead(content, cssLink1);
			}

			//jsé“¾æŽ¥åŠ&nbsp;å‰ç¼€
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.base64" id="apidoc.module.jdf.base64">module jdf.base64</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.base64.init" id="apidoc.element.jdf.base64.init">
        function <span class="apidocSignatureSpan">jdf.base64.</span>init
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (source){
	if(jdf.config.build.hasCmdLog) console.log('compress.base64---'+source);
	var reg_background = /background(?:-image)?:([\s\S]*?)(?:;|$)/gi;
	var reg_img_url = /url\s*\(\s*("(?:[^\\"\r\n\f]|\\[\s\S])*"|'(?:[^\\'\n\r\f]|\\[\s\S])*'|[^)}]+)\s*\)/i;
	var reg_is_base64 = /[?&amp;]__base64/i;

	var content = f.read(source);
	var background = content.match(reg_background);

	if(background){
		content = escape(content);
		background.forEach(function(item, index){
			var img_url = item.match(reg_img_url);

			if(img_url &amp;&amp; img_url[0].match(reg_is_base64)){
				var base64Encode = f.base64Encode(path.join(path.dirname(source), img_url[1].replace('?__base64', '')));
				content = content.replace(new RegExp(escape(img_url[1]), 'gi'), ('data:image/png;base64,'+base64Encode));
			}
		});
	}

	return unescape(content);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.buildByAutoprefixer" id="apidoc.module.jdf.buildByAutoprefixer">module jdf.buildByAutoprefixer</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.buildByAutoprefixer.init" id="apidoc.element.jdf.buildByAutoprefixer.init">
        function <span class="apidocSignatureSpan">jdf.buildByAutoprefixer.</span>init
        <span class="apidocSignatureSpan">(file, options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (file, options){
	var contents = postcss([autoprefixer(options), cssnext]).process(file.contents).css;
	f.write(file.path, contents);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.buildCss" id="apidoc.module.jdf.buildCss">module jdf.buildCss</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.buildCss.init" id="apidoc.element.jdf.buildCss.init">
        function <span class="apidocSignatureSpan">jdf.buildCss.</span>init
        <span class="apidocSignatureSpan">(rSource, target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (rSource, target){
	var allTag = true;
	var source = f.realpath(rSource);

	if(source){
		if(f.isDir(source)){
			fs.readdirSync(source).forEach(function(name){
				if(name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))){
					allTag = buildCss.init(source + '/' + name, target + '/' + name) &amp;&amp; allTag;
				}
			});
		} else if(f.isFile(source) &amp;&amp; ($.is.css(source) || $.is.less(source) || $.is.sass(source) ) ){
			if(jdf.config.build.hasCmdLog) console.log('buildCss---'+rSource);

			var autoprefixerFn = function(file){
				if(jdf.config.build.autoprefixer){
					require('./buildByAutoprefixer.js').init({contents:file.contents, path:file.path }, jdf.config.build.autoprefixerOptions)
				}else{
					f.write(file.path, file.contents);
				}
			}	

			target = $.getCssExtname(target);

			if( $.is.less(source) || $.is.sass(source) ) {
				var sourceContent = f.read(source);
				//ä¸ºç©º "node-sass": "0.9.3" ç¼–è¯‘ä¼šæŠ¥é”™ https://github.com/sass/node-sass/issues/381
				if(sourceContent==''){
					return;	
				}

				if($.is.less(source) &amp;&amp; jdf.config.build.less){
					try{
						Less.render(sourceContent, {filename: source, syncImport:true}, function(error, output){
							if(error){
								console.log(error);
							}else{
								var targetContent = output.css;
								if(jdf.config.build.csslint) fileLint.init(source);
								autoprefixerFn({contents:targetContent, path:target });
								//f.write(target, targetContent);
							}
						});
					}catch(e){
						console.log('jdf error [jdf.buildCss] - less');
						console.log(Colors.red('&gt; '+source));
						console.log(Colors.red('&gt;'), e);
					}
				}

				if($.is.sass(source) &amp;&amp; jdf.config.build.sass){
					try{
						var css = Sass.renderSync({
							data: sourceContent,
							includePaths: [path.dirname(source)],
							// outputStyle: 'compressed'
							outputStyle: 'expanded'
						});
						if(jdf.config.build.csslint) fileLint.init(source);
						autoprefixerFn({contents:css.css.toString(), path:target });
						// f.write(target, css.css);
					}catch(e){
						console.log('jdf error [jdf.buildCss] - sass');
						console.log(Colors.red('&gt; '+source));
						console.log(Colors.red('&gt; line: ' + e.line + ', column: ' + e.column));
						console.log(Colors.red('&gt;'), 'message: ' + e.message);
					}
				}
			}

			if($.is.css(source) &amp;&amp; jdf.config.build.autoprefixer){
				var sourceContent = f.read(source);
				autoprefixerFn({contents:sourceContent, path:target })
			}
		} else {
			allTag = false;
		}
	} else {
		//console.log('error');
	}
	return allTag;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.buildJs" id="apidoc.module.jdf.buildJs">module jdf.buildJs</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.buildJs.init" id="apidoc.element.jdf.buildJs.init">
        function <span class="apidocSignatureSpan">jdf.buildJs.</span>init
        <span class="apidocSignatureSpan">(src, dist)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (src, dist){
	if(f.isDir(src)){
       var filelist = f.getdirlist(src,'(js)$',jdf.config.build.isEs6Exclude);
        filelist.forEach(function(item){
            babel(item, dist);
        })
    }else if(f.isFile(src)){
       babel(src, dist);
    }else{
    	console.log('jdf buildJs "' + src + '"" is not exists');
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.buildWidget" id="apidoc.module.jdf.buildWidget">module jdf.buildWidget</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.buildWidget.init" id="apidoc.element.jdf.buildWidget.init">
        function <span class="apidocSignatureSpan">jdf.buildWidget.</span>init
        <span class="apidocSignatureSpan">(inputPath, content, type, callback, param)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (inputPath, content, type, callback, param){
	if(jdf.config.build.hasCmdLog) console.log('buildWidget---'+inputPath);

	var isBuild = type == 'build';
	var isRelease = type == 'release';
	var isOutput = type == 'output';

	var result = content.match($.reg.notCommentWidget());
	var origin = content;
	var isJM = false;
	var cssFile='' , jsFile='';
	var cssComboArr = [];
	var jsComboArr = [];
	
	//widget
	if (result){
		var filesListObj = {};//åŽ»é‡ç”¨
		result.forEach(function(resultItem){

			var widgetArray = $.reg.widget().exec(resultItem);
			var widgetType;
			var widgetTypeArray = $.reg.widgetType().exec(resultItem);
			
			//jdj jdm ç‰¹æ®Šå¤„ç†
			if (widgetTypeArray) widgetType = widgetTypeArray[1];
			isJM = (widgetType == 'jdj' || widgetType == 'jdm');
			//if (isJM){ writeJMOnce = true; }
			
			//å–widgetæ•°æ® {%widget data=" "%}
			var widgetData;
			var widgetDataArray = $.reg.widgetData().exec(resultItem);
			if (widgetDataArray) widgetData = widgetDataArray[1];
			
			//å–widgetæ˜¯å¦æ³¨é‡Štag {%widget comment=" "%}
			var widgetComment;
			var widgetCommentArray = $.reg.widgetComment().exec(resultItem);
			if (widgetCommentArray) widgetComment = widgetCommentArray[1];

			//å¦‚æžœtypeä¸ºjsæˆ–è€…cssåˆ™åªå¼•ç”¨ä¸å¤„ç†tpl
			var buildTag = {
				tpl:true,
				vm:true,
				smarty: true,
				js:true,
				css:true
			}

			if (widgetType) {
				if (widgetType =='tpl'|| widgetType =='vm'|| widgetType =='css'|| widgetType =='js' || widgetType == 'smarty'){
					for(var i in buildTag ){
						if(i != widgetType ) buildTag[i] = false;
					}
				}else {
					console.log(inputPath +' '+ resultItem);
					console.log("jdf warnning [widget type - "+widgetType +'] is not approve, please try "tpl,vm,js,css" again ');
					return;
				}
			}

			//{%widget name=" "%}
			var widgetStr = widgetArray[0];
			//widgetSträ¸­çš„name
			var widgetName = $.trim(widgetArray[1]);
			var widgetDir = '/widget/' +widgetName;
			//widget ç›®å½•
			var fileDir = path.normalize(jdf.currentDir + widgetDir);
			var widgetInputName = jdf.config.widgetInputName;

			if(widgetInputName.length &gt; 0 &amp;&amp; !$.inArray(widgetInputName, widgetName)){
				return;
			}

			//å½“å‰å·¥ç¨‹ä¸å­˜çš„jdjå’Œjdmæ¨¡å—ä»ŽæœåŠ¡ç«¯æ–‡ä»¶å¤åˆ¶è‡³å½“å‰è¿‡æ¥
			<span class="apidocCodeCommentSpan">/*
			if (isJM &amp;&amp; !f.exists(fileDir)){
				var source = path.normalize(jdf[widgetType+'Dir']+ widgetDir);
				var target = jdf.currentDir + '/widget/' +widgetName;
				f.copy(source,target);
			}*/
</span>			var placeholder='';
			var dirExists = f.exists(fileDir);
			if (dirExists){
				var files = fs.readdirSync(fileDir);
				files.forEach(function(item){
					//less,scssæ–‡ä»¶è½¬æ¢æˆcssæ–‡ä»¶
					var itemOrgin = item;
					item = $.getCssExtname(item);

					//tpl,css,jsè·¯å¾„ä¸­å«æœ‰widgetNameå‰ç¼€çš„æ‰å¼•ç”¨ ---&gt; åå­—å®Œå…¨ä¸€æ&nbsp;·æ‰å¼•ç”¨
				
					//å•ä¸ªæ–‡ä»¶
					var fileUrl = path.join(fileDir, item);
					var staticUrl = ''+widgetDir +'/'+ item;

					if (param &amp;&amp; param.plain) {
						staticUrl = '..'+widgetDir +'/'+ item;
					}

					//css Compile &amp;&amp; innsertCSS link
					var cssCompileFn = function(staticUrl){
						var cssLink = $.placeholder.cssLink(staticUrl);
						if (isBuild){
							content = $.placeholder.insertHead(content,cssLink);
						}else if(isRelease || isOutput){
							if(jdf.config.output.combineWidgetCss){
								//less,sassæ–‡ä»¶ä»Žç¼–è¯‘åŽçš„bgCurrentè¯»å–
								if ($.is.less(itemOrgin) || $.is.sass(itemOrgin)) {
									var fileUrlTemp = jdf.bgCurrentDir + staticUrl;
									cssFile +=  f.read(fileUrlTemp) + '\n\r';
								}else{
									cssFile +=  f.read(jdf.bgCurrentDir+staticUrl) + '\n\r';
								}
							}else{
								if(jdf.config.output.cssCombo &amp;&amp; jdf.config.cdn){
									cssComboArr.push(staticUrl.replace('/widget/', ''));
								}else{
									content = $.placeholder.insertHead(content,cssLink);
								}
							}
						}

						/*
						if (isJM){
							origin = $.placeholder.insertHead(origin,cssLink);
						}*/
						filesListObj[staticUrl] = 1;
					}

					//js Compile
					var jsCompileFn = function(staticUrl){
						var jsLink = $.placeholder.jsLink(staticUrl);
						if (isBuild){
							content = buildWidget.insertJs(content,jsLink, jdf.config.build.jsPlace);
						}else if (isRelease || isOutput){
							if( ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.buildWidget.insertJs" id="apidoc.element.jdf.buildWidget.insertJs">
        function <span class="apidocSignatureSpan">jdf.buildWidget.</span>insertJs
        <span class="apidocSignatureSpan">(content, jsLink, jsPlace)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">insertJs = function (content, jsLink, jsPlace){
	if(jsPlace == 'insertHead'){
		content = $.placeholder.insertHead(content, jsLink);
	}else if(jsPlace == 'insertBody'){
		content = $.placeholder.insertBody(content, jsLink);
	}
	return content;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						filesListObj[staticUrl] = 1;
					}

					//js Compile
					var jsCompileFn = function(staticUrl){
						var jsLink = $.placeholder.jsLink(staticUrl);
						if (isBuild){
							content = buildWidget.<span class="apidocCodeKeywordSpan">insertJs</span>(content,jsLink, jdf.config.build.jsPlace);
						}else if (isRelease || isOutput){
							if(jdf.config.output.combineWidgetJs){
								//åˆå¹¶æ‰€æœ‰widgetä¸­çš„jsæ–‡ä»¶è‡³widgetOutputName
								jsFile += f.read(jdf.currentDir+staticUrl) + '\n\r';
							}else{
								if(jdf.config.output.jsCombo &amp;&amp; jdf.config.cdn){
									jsComboArr.push(staticUrl.replace('/widget/', ''));
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.compress" id="apidoc.module.jdf.compress">module jdf.compress</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.compress.addJsDepends" id="apidoc.element.jdf.compress.addJsDepends">
        function <span class="apidocSignatureSpan">jdf.compress.</span>addJsDepends
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">addJsDepends = function (source) {
    var sourceCode = f.read(source);
    var cdn = jdf.config.cdn;
    var configBaseDir = jdf.config.baseDir ? jdf.config.baseDir + '/' : '';
    var dependenceArray = [];
    var arr = sourceCode.match(/require\s*\(\s*("|')(.*?)("|')\s*\)/gmi);

    //jsæ–‡ä»¶çš„idå’Œdependencesæ˜¯å¦æ·»åŠ&nbsp;cdnå‰ç¼€ é»˜è®¤æ˜¯ä¸æ·»åŠ&nbsp;çš„
    if(jdf.config.output.jsUrlReplace == false){
        cdn = "";
    }

    if (arr) {
        for (var i = 0; i &lt; arr.length; i++) {
            var temp = arr[i].match(/require\((.*?)\)/);
            if (temp) {
                temp[1] = temp[1].replace(/'|"/g, '');
                var match = temp[1];
                //æ—&nbsp;.jsç¼€å’Œä¸å«æœ‰.cssçš„urlåŠ&nbsp;.js
                if (!(/\.js$/i.test(match)) &amp;&amp; !/\.css/i.test(match)) {
                    match += '.js';
                }
                //add prefix
                if (/^\//.test(match) &amp;&amp; !$.is.httpLink(match)) {
                    match = match.replace(configBaseDir, '');
                    match = jdf.getProjectPath() + match;
                }

                if (cdn &amp;&amp; !$.is.httpLink(match)) {
                    match = (cdn + '/' + match);
                }

                //source content require add prefix
                //var a=require('a.js') ==&gt; var a=require('projectPath/a.js')
                sourceCode = sourceCode.replace(arr[i], 'require("' + match + '")');
                dependenceArray.push('"' + match + '"');
            }
        }
    }
    dependenceArray = dependenceArray.join(',');

<span class="apidocCodeCommentSpan">    /**
     * @has file id add dependenceArray
     * @example
     *   define('/a.js',function(require, exports) {});  ==&gt;
     *   define('projectPath/a.js', ['projectPath/b.js'], function(require, exports) {});
     */
</span>    if (dependenceArray.length &gt; 0) {
        //insert
        var arrTemp = /(define\(.*?["|'].*?["|']).*?,function/m.exec(sourceCode);
        var strTemp = arrTemp ? arrTemp[1] : null;
        if (strTemp) {
            // source = source.replace(strTemp, strTemp+','+'['+dependenceArray+']');
        }
    }

    /**
     * @add files id and dependenceArray
     * @example
     *  define(function(require, exports)) ==&gt;
     *  define('projectPath/a.js',['projectPath/b.js'],function(require, exports))
     */
    if (/define\(function/gm.exec(sourceCode)) {
        //getProjectPath
        var filepath = source.split(jdf.config.outputDirName + '/' + jdf.getProjectPath());
        var filename = null;
        if (filepath &amp;&amp; filepath.length &gt; 1) {
            filename = filepath[1].replace(configBaseDir, '');

            var getProjectPath = jdf.getProjectPath() ? jdf.getProjectPath() + '/' : '';
            if(jdf.config.output.jsUrlReplace == false || jdf.config.cdn){
                filename = getProjectPath + filename;
            }else{
                //ä¸åŠ&nbsp;cdnå‰ç¼€ ä¹Ÿä¸åŠ&nbsp;projectPath å³ä¿æŒé»˜è®¤çš„è·¯å¾„
                filename = '..'  + filename;
            }

        };

        if (!filename) {
            filename = path.basename(source);
        }

        //del // prefix
        filename = filename.replace(/\/\//g, '/');
        if (dependenceArray.length == 0) {
            dependenceArray = '';
        }

        if (cdn &amp;&amp; !($.is.httpLink(filename))) {
            filename = cdn + '/' + filename;
        }

        sourceCode = sourceCode.replace('define(function', 'define("' + filename + '",[' + dependenceArray + '],function');
    }

    /**
     * @seajs.use add prefix
     * @example
     *  seajs.use(['/a.js', '/b.js'],function(){}) ==&gt;
     *  seajs.use(['projectPath/a.js', 'projectPath/b.js'],function(){})
     */
    var hasSeajs = sourceCode.match(/seajs\.use\((.*?),\s*function/gim);
    if (hasSeajs) {
        //åŽ»é‡obj
        var tempObj = {};

        for (var i = 0, j = hasSeajs.length; i &lt; j; i++) {
            var t = hasSeajs[i].replace(/seajs.use\(|\[|\]|,function/gim, '');
            var t1 = t.split(',');
            if (t1) {
                for (var m = 0; m &lt; t1.length; m++) {
                    //get origin source
                    var t2 = t1[m].replace(/[\"\'\s]/g, '');
                    var ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}, function() {}, function(error) {})
                } else {
if (jdf.config.output.compressJs) {
    var sourceCode = compress.js(source, isdebug);
    f.write(source, sourceCode);
}

var sourceCode = compress.<span class="apidocCodeKeywordSpan">addJsDepends</span>(source);
f.write(source, sourceCode);

//jsContentReplace
if (jdf.config.output.jsContentReplace ||
    jdf.config.output.jsContentReplaceInProduce ||
    jdf.config.output.jsContentReplaceInPublish
) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.appendWebpCSSFIX" id="apidoc.element.jdf.compress.appendWebpCSSFIX">
        function <span class="apidocSignatureSpan">jdf.compress.</span>appendWebpCSSFIX
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">appendWebpCSSFIX = function (source) {
    var AST_result = [];
    var sourceCode = compress.css(source, false);
    //remove comment
    sourceCode = sourceCode.replace(/\/\*.*?\*\//ig, function(match) {
        return ""
    });
    var rules = sourceCode.match(/.*?\{.*?\}/ig);
    if (!rules) {
        return;
    }
    for (var i = 0; i &lt; rules.length; i++) {
        var rule = rules[i];
        if (rule.match(/\{/g).length != rule.match(/\}/g).length) {
            continue;
        }
        var cssBodyStr = rule.match(/\{.*?\}/ig)[0];
        var cssHead = rule.replace(cssBodyStr, "");
        cssHead = cssHead.split(';');
        cssHead = cssHead[cssHead.length - 1];
        cssBodyStr = cssBodyStr.replace('{', '').replace('}', '');
        var cssBodyProperties = cssBodyStr.split(';');
        var astCssRule = {};
        astCssRule.selector = cssHead;
        astCssRule.values = [];
        for (var j in cssBodyProperties) {
            var cssObj = cssBodyProperties[j].split(":");
            var cssPropertyName = cssObj[0];
            var cssPropertyValue = cssBodyProperties[j].replace(cssPropertyName + ":", "");
            if (cssPropertyValue.match(/.*?url.*?\.(png|jpg)/ig)) {
                var _c = {
                    k: cssPropertyName,
                    v: cssPropertyValue.replace(/.*?url.*?\.(png|jpg)/ig, function(match) {
                        return match + ".webp";
                    })
                };
                astCssRule.values.push(_c);
            }
        }
        if (astCssRule.values.length) {
            AST_result.push(astCssRule);
        }
    }

    var resultCss = ["/* webp css prefix */"];
    for (var i in AST_result) {
        var webpCssRule = AST_result[i];
        var rootClass = jdf.config.output.webpRootClass ? '.' + jdf.config.output.webpRootClass + " " : ".root-webp ";

        var cssValues = [];
        for (var j in webpCssRule.values) {
            var cssV = webpCssRule.values[j];
            cssValues.push(cssV.k + ":" + cssV.v);
        }
        var css = rootClass + webpCssRule.selector + "{" + cssValues.join(';') + "}";
        resultCss.push(css);
    }

    var raw = f.read(source);
    f.write(source, raw + "\n" + resultCss.join("\n"));


}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
f.write(source, sourceCode);
            }

            //å›¾ç‰‡webp
            if (jdf.config.output.webp) {
//css webpæ&nbsp;·å¼è¿½åŠ&nbsp;
if ($.is.css(source)) {
    compress.<span class="apidocCodeKeywordSpan">appendWebpCSSFIX</span>(source);
}

//å›¾ç‰‡æ&nbsp;¼å¼è½¬æ¢
if ($.is.jpg(source) || $.is.png(source)) {
    compress.webp(
        source,
        source + ".webp",
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.css" id="apidoc.element.jdf.compress.css">
        function <span class="apidocSignatureSpan">jdf.compress.</span>css
        <span class="apidocSignatureSpan">(source, isdebug)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">css = function (source, isdebug) {
    var isdebug = isdebug || false;

    if (!f.exists(source)) {
        return;
    }
   if(jdf.config.build.hasCmdLog) console.log('compress.css---'+source);

    var sourceCode = f.read(source);
    var result = sourceCode;
    if (!isdebug) {
        result = new CleanCSS({
            aggressiveMerging: false, //disable aggressive merging of properties.
            keepBreaks: false, //æ˜¯å¦æœ‰ç©ºæ&nbsp;¼
            processImport: false, //æ˜¯å¦æ›¿æ¢@import
            compatibility: '*'
        }).minify(sourceCode);
    }

    if (jdf.config.output.imagesSuffix) {
        result = compress.imagesSuffix(source, result);
    }

    //å¢žåŠ&nbsp;å‰ç¼€banner
    result = compress.setPrefixBanner(jdf.config.output.hasBanner, source, result) + result + '\r\n';

    return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if(source){
		if(f.isDir(source)){
			fs.readdirSync(source).forEach(function(name){
				if(name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))){
					allTag = buildCss.init(source + '/' + name, target + '/' + name) &amp;&amp; allTag;
				}
			});
		} else if(f.isFile(source) &amp;&amp; ($.is.<span class="apidocCodeKeywordSpan">css</span>(source) || $.is.less(source) || $.
is.sass(source) ) ){
			if(jdf.config.build.hasCmdLog) console.log('buildCss---'+rSource);

			var autoprefixerFn = function(file){
				if(jdf.config.build.autoprefixer){
					require('./buildByAutoprefixer.js').init({contents:file.contents, path:file.path }, jdf.config.build.autoprefixerOptions
)
				}else{
					f.write(file.path, file.contents);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.css2" id="apidoc.element.jdf.compress.css2">
        function <span class="apidocSignatureSpan">jdf.compress.</span>css2
        <span class="apidocSignatureSpan">(source, isdebug)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">css2 = function (source, isdebug) {
   if(jdf.config.build.hasCmdLog) console.log('compress.css2---'+source);

    var isdebug = isdebug || false;

    if (!f.exists(source)) {
        return;
    }
    var sourceCode = f.read(source);
    var result = sourceCode;
    if (jdf.config.output.imagesSuffix) { //æ›¿æ¢imagesSuffixæƒ…å†µä¸‹çš„imageåç§°
        result = compress.imagesSuffix(source, result);
    }
    return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

//css CleanCSS
if ($.is.css(source) &amp;&amp; jdf.config.output.compressCss) {
    var sourceCode = compress.css(source, isdebug);
    f.write(source, sourceCode);
} else if ($.is.css(source)) {
    var sourceCode = compress.<span class="apidocCodeKeywordSpan">css2</span>(source, isdebug);
    f.write(source, sourceCode);
}

//png optimize
if ($.is.png(source) &amp;&amp; !isdebug &amp;&amp; jdf.config.output.compressPng) {
    compress.png(source, source);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.cssImagesUrlReplace" id="apidoc.element.jdf.compress.cssImagesUrlReplace">
        function <span class="apidocSignatureSpan">jdf.compress.</span>cssImagesUrlReplace
        <span class="apidocSignatureSpan">(source, str, cdn, prefix, suffix)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">cssImagesUrlReplace = function (source, str, cdn, prefix, suffix) {

    //æ˜¯å¦ä¸ºwidgetä¸­çš„cssæ–‡ä»¶
    var isWidgetCssFileReg = new RegExp("/" + jdf.config.widgetDir + "/", "igm");
    var isWidgetCssFile = isWidgetCssFileReg.test(source);

    var suffix = jdf.config.suffix;

    var imagesSuffix = jdf.config.output.imagesSuffix;

    var cssImagesUrlReg = new RegExp("url\\(.*?\\)", "igm");
    var temp = str.match(cssImagesUrlReg);

    var sourcedir = path.normalize(path.dirname(source));
    var outputdir = path.normalize(f.currentDir() + '/' + jdf.config.outputDirName);

    var prefix = sourcedir.replace(outputdir, '');
    //é¡¹ç›®åœ¨Cç›˜,buildåœ¨Dç›˜
    prefix = prefix.replace(path.normalize(jdf.config.outputDirName), '');

    // \æ›¿æ¢æˆ/
    prefix = prefix.replace(/\\/g, '/');
    prefix = '/' + prefix + '/';
    // //æ›¿æ¢æˆ/
    prefix = prefix.replace(/\/\//gim, '/');

    if(!jdf.config.cdn){
        prefix = '';
    }

    if (temp) {
        var tempObj = {};
        //åŽ»é‡
        for (var i = temp.length - 1; i &gt;= 0; i--) {
            if ($.is.imageFile(temp[i])) {
                tempObj[temp[i]] = 1;
            }
        }

        for (var i in tempObj) {
            var b = i;
            b = b.replace('url(', '');
            b = b.replace(')', '');
            b = b.replace(/\s/g, '');
            b = b.replace(/\"/g, '');
            b = b.replace(/\'/g, '');

            if (b != 'about:blank' &amp;&amp; !$.is.httpLink(b) &amp;&amp; !/data:image/.test(b)) {

                var bOrigin = b;

                var c = b.replace(/\.\.\//g, "");
                c = c.replace(/(^\.\/)/, "");

                var hasWidget = new RegExp("^/" + jdf.config.widgetDir, "igm");
                if (hasWidget.test(b)) {
                    // /widget/aaa æ›¿æ¢
                    c = cdn + '/' + jdf.getProjectPath() + '/' + c;
                } else {
                    if (jdf.config.baseDir) {
                        // /css/ replaceå…¶ä¸­çš„/app/
                        c = c.replace('/' + jdf.config.baseDir + '/', "");
                        // /css/ replaceå…¶ä¸­çš„ app/
                        c = c.replace(jdf.config.baseDir + '/', '');
                    }

                    if (isWidgetCssFile) {
                        var hasCss = new RegExp(jdf.config.cssDir, "igm");
                        //widgetä¸­æ&nbsp;·å¼å¼•ç”¨cssä¸­çš„å›¾ç‰‡
                        if (hasCss.test(c) &amp;&amp; c.indexOf('/') == 0) {
                            c = cdn + '/' + $.replaceSlash(jdf.getProjectPath() + '/' + c);
                        } else {
                            c = cdn + $.replaceSlash(prefix + c);
                        }
                    } else {
                        c = c.replace(jdf.config.cssDir + '/', "");
                        c = cdn + $.replaceSlash(prefix + c);
                    }
                }

                bOrigin = bOrigin.replace('/', '\\\/').replace('?__sprite', '\\?__sprite').replace(/\?/g, '\\?');
                var sReg = new RegExp('url\\("{0,1}' + bOrigin + '"{0,1}\\)', 'gim');
                str = str.replace(sReg, 'url(' + c + ')');
            }
        };
    };

    return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//png optimize
if ($.is.png(source) &amp;&amp; !isdebug &amp;&amp; jdf.config.output.compressPng) {
    compress.png(source, source);
}

//cssä¸­å›¾ç‰‡urlå¢žåŠ&nbsp;åŸŸåå‰ç¼€
if (jdf.config.output.cssImagesUrlReplace &amp;&amp; $.is.css(source)) {
    var sourceCode = compress.<span class="apidocCodeKeywordSpan">cssImagesUrlReplace</span>(source, sourceCode, jdf.config.cdn);
    f.write(source, sourceCode);
}

//å›¾ç‰‡base64
if (jdf.config.output.base64 &amp;&amp; ($.is.sass(source) || $.is.less(source) || $.is.css(source))) {
    var sourceCode = base64.init(source);
    f.write(source, sourceCode);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.dir" id="apidoc.element.jdf.compress.dir">
        function <span class="apidocSignatureSpan">jdf.compress.</span>dir
        <span class="apidocSignatureSpan">(src, dest)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">dir = function (src, dest) {
    if (typeof(src) == 'undefined') {
        console.log('jdf warning no src folder');
        return;
    }

    var srcPath = path.normalize(f.currentDir() + '/' + src);
    var destPath;

    if (typeof(dest) == 'undefined') {
        destPath = srcPath;
    } else {
        destPath = path.normalize(f.currentDir() + '/' + dest);
        f.copy(srcPath, destPath);
    }

    compress.init(destPath);

    console.log('jdf compress success!');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    default:
        console.log('You can "jdf install demo or "jdf install init"');
}

        } else if (cmd2 === 'c' || cmd2 === 'compress') {
var Compress = require('./compress.js');
Log.send('compress');
Compress.<span class="apidocCodeKeywordSpan">dir</span>(argv[3], argv[4]);

//widget
        } else if (cmd2 === 'w' || cmd2 === 'widget') {
var Widget = require("./widget.js");

var cmd3 = argv[3],
    cmd4 = argv[4],
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.html" id="apidoc.element.jdf.compress.html">
        function <span class="apidocSignatureSpan">jdf.compress.</span>html
        <span class="apidocSignatureSpan">(sourceCode)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">html = function (sourceCode) {
    if(sourceCode){
        sourceCode = Htmlminify(sourceCode, {
            removeComments: true, //ç§»é™¤æ³¨é‡Š
            collapseWhitespace: true, //åˆå¹¶å¤šä½™çš„ç©ºæ&nbsp;¼
            minifyJS: true, //åŽ‹ç¼©æ–‡ä»¶ä¸­çš„jsä»£ç&nbsp;
            minifyCSS: true //åŽ‹ç¼©æ–‡ä»¶ä¸­çš„cssä»£ç&nbsp;
        });
    }
    return sourceCode;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))) {
    allTag = compress.init(source + '/' + name, isdebug) &amp;&amp; allTag;
}
            });
        } else if (f.isFile(source)) {

            //html minify
            if ($.is.<span class="apidocCodeKeywordSpan">html</span>(source) &amp;&amp; (jdf.config.output.compresshtml||!jdf.
config.output.comment||jdf.config.output.htmlContentReplace) ){
if(jdf.config.build.hasCmdLog) console.log('compress.html---'+source);
var sourceCode = f.read(source);

//html remove comment
if (!jdf.config.output.comment) {
    var htmlComment = $.reg.htmlComment();
    sourceCode = sourceCode.replace(htmlComment, '').replace(/\n\s*\r/g, '');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.imagesSuffix" id="apidoc.element.jdf.compress.imagesSuffix">
        function <span class="apidocSignatureSpan">jdf.compress.</span>imagesSuffix
        <span class="apidocSignatureSpan">(source, str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">imagesSuffix = function (source, str) {
    var imagesSuffix = jdf.config.output.imagesSuffix;
    var suffix = jdf.config.suffix;

    if (imagesSuffix == 1) {
        str = str.replace(new RegExp('\\.png\\?__sprite', 'gmi'), '.png?__sprite' + suffix);
    } else if (imagesSuffix == 2) {
        str = str.replace(/\.png\?__sprite/gmi, suffix + '.png?__sprite');
    }

    return str;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            keepBreaks: false, //æ˜¯å¦æœ‰ç©ºæ&nbsp;¼
            processImport: false, //æ˜¯å¦æ›¿æ¢@import
            compatibility: '*'
        }).minify(sourceCode);
    }

    if (jdf.config.output.imagesSuffix) {
        result = compress.<span class="apidocCodeKeywordSpan">imagesSuffix</span>(source, result);
    }

    //å¢žåŠ&nbsp;å‰ç¼€banner
    result = compress.setPrefixBanner(jdf.config.output.hasBanner, source, result) + result + '\r\n';

    return result;
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.init" id="apidoc.element.jdf.compress.init">
        function <span class="apidocSignatureSpan">jdf.compress.</span>init
        <span class="apidocSignatureSpan">(rSource, isdebug, config, getProject, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (rSource, isdebug, config, getProject, callback) {
    if (typeof(config) != 'undefined') jdf.config = config;
    if (typeof(getProject) != 'undefined') jdf.getProject = getProject;

    var isdebug = isdebug || false;
    var allTag = true;
    var source = f.realpath(rSource);
    if (source) {
        if (f.isDir(source)) {
            fs.readdirSync(source).forEach(function(name) {
                if (name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))) {
                    allTag = compress.init(source + '/' + name, isdebug) &amp;&amp; allTag;
                }
            });
        } else if (f.isFile(source)) {

            //html minify
            if ($.is.html(source) &amp;&amp; (jdf.config.output.compresshtml||!jdf.config.output.comment||jdf.config.output.htmlContentReplace
) ){
                if(jdf.config.build.hasCmdLog) console.log('compress.html---'+source);
                var sourceCode = f.read(source);

                //html remove comment
                if (!jdf.config.output.comment) {
                    var htmlComment = $.reg.htmlComment();
                    sourceCode = sourceCode.replace(htmlComment, '').replace(/\n\s*\r/g, '');
                }

                //html contentReplace
                if (jdf.config.output.htmlContentReplace ||
                    jdf.config.output.htmlContentReplaceInProduce ||
                    jdf.config.output.htmlContentReplaceInPublish
                ) {
                    var r = jdf.config.output.htmlContentReplace;
                    if(jdf.config.outputType == 'prod' &amp;&amp; jdf.config.output.htmlContentReplaceInProduce) r = jdf.config.output.htmlContentReplaceInProduce
                    if(jdf.config.outputType == 'pub' &amp;&amp; jdf.config.output.htmlContentReplaceInPublish)r = jdf.config.output.htmlContentReplaceInPublish

                    for (var i=0; i&lt;r.length; i++){
                        var ri = new RegExp(r[i].from, 'gm');
                        sourceCode = sourceCode.replace(ri, r[i].to);
                    }
                }

                //html compress
                if (jdf.config.output.compresshtml &amp;&amp; !isdebug) {
                    sourceCode = compress.html(sourceCode, isdebug);
                }

                f.write(source, sourceCode);
            }

            //js UglifyJS
            if ($.is.js(source) &amp;&amp; !jdf.config.build.es6Entry ) {
                if (jdf.config.output.rjs) {
                    var outputdir = path.normalize(f.currentDir() + '/' + jdf.config.outputDirName + '/' + jdf.getProjectPath());
                    requirejs.optimize({
                        appDir: outputdir,
                        allowSourceOverwrites: true,
                        keepBuildDir: true,
                        dir: outputdir
                    }, function() {}, function(error) {})
                } else {
                    if (jdf.config.output.compressJs) {
                        var sourceCode = compress.js(source, isdebug);
                        f.write(source, sourceCode);
                    }

                    var sourceCode = compress.addJsDepends(source);
                    f.write(source, sourceCode);

                    //jsContentReplace
                    if (jdf.config.output.jsContentReplace ||
                        jdf.config.output.jsContentReplaceInProduce ||
                        jdf.config.output.jsContentReplaceInPublish
                    ) {
                        var r = jdf.config.output.jsContentReplace;
                        if(jdf.config.outputType == 'prod' &amp;&amp; jdf.config.output.jsContentReplaceInProduce) r = jdf.config.output
.jsContentReplaceInProduce
                        if(jdf.config.outputType == 'pub' &amp;&amp; jdf.config.output.jsContentReplaceInPublish)r = jdf.config.output.jsContentReplaceInPublish
                        var sourceCode = f.read(source);
                        for (var i=0; i&lt;r.length; i++){
                            var ri = new RegExp(r[i].from, 'gm');
                            sourceCode = sourceCode.replace(ri, r[i].to ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.js" id="apidoc.element.jdf.compress.js">
        function <span class="apidocSignatureSpan">jdf.compress.</span>js
        <span class="apidocSignatureSpan">(source, isdebug)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">js = function (source, isdebug) {
    if(jdf.config.build.hasCmdLog) console.log('compress.js---'+source);

    var isdebug = isdebug || false;
    if (!f.exists(source)) {
        return;
    }
    var sourceContent = f.read(source);
    //sourceContent = compress.addJsDepends(sourceContent);

    var options = {
        remove: [], //
        except: ['require', 'define'], //ä¸åŽ‹ç¼©çš„å­—ç¬¦å
        ascii_only: true, //è¾“å‡ºUnicode characters
        beautify: false, //ç¾ŽåŒ–ä»£ç&nbsp;
        warnings: false //æ˜¾ç¤ºåŽ‹ç¼©æŠ¥é”™
            //,mangle: false//æ˜¯å¦åŽ‹ç¼© å¤±æ•ˆçš„å‚æ•°
    };

    if (jdf.config.output.jsRemove) {
        options.remove = jdf.config.output.jsRemove;
    }

    var result = sourceContent;

    try {
        if (!isdebug) {
            //parse
            UglifyJS.base54.reset();
            var toplevel = UglifyJS.parse(sourceContent);
            toplevel.figure_out_scope();
            var compressorOption = {
                hoist_funs: false, //å‡½æ•°å£°æ˜Žè‡³é¡¶ç«¯
                //fromString: true,  //è¯´æ˜Žä»£ç&nbsp;æºçš„æ&nbsp;¼å¼æ˜¯å¦ä¸ºå­—ç¬¦ä¸²
                //mangle: true,      //æ˜¯å¦åŽ‹ç¼©,åªè¦é…ç½®å°±ä¸åŽ‹ç¼©äº†
                warnings: false, //æ˜¾ç¤ºåŽ‹ç¼©æŠ¥é”™
                join_vars: false
            }
            if (options.warnings) {
                compressorOption.warnings = options.warnings;
            }

            //remove console.log
            var matchRemoveOption = function(host, method) {
                return !options.remove.every(function(element) {
                    if (element.indexOf(".") == -1) {
                        return element != host;
                    }
                    return element != host + '.' + method;
                });
            }
            var removeConsoleTransformer = new UglifyJS.TreeTransformer(function(node, descend) {
                if (node instanceof UglifyJS.AST_Call) {
                    var host, method;
                    try {
                        host = node.expression.start.value;
                        method = node.expression.end.value;
                    } catch (err) {

                    }

                    if (host &amp;&amp; method) {
                        if (matchRemoveOption(host, method)) {
                            return new UglifyJS.AST_Atom();
                        }
                    }
                }
                descend(node, this);
                return node;
            });
            toplevel = toplevel.transform(removeConsoleTransformer);

            var compressor = UglifyJS.Compressor(compressorOption);
            toplevel = toplevel.transform(compressor);
            toplevel.mangle_names({ except: options.except });

            //output, has /*$ */ comments
            var stream = UglifyJS.OutputStream({
                comments: function(scope, comment) {
                    if (isdebug) {
                        return true;
                    } else {
                        if (comment.type == 'comment2' &amp;&amp; comment.value.charAt(0) === '$' &amp;&amp; options.copyright) {
                            return comment;
                        }
                        return false;
                    }
                },
                space_colon: false,
                //quote_keys: true, object keysåŠ&nbsp;å¼•å·
                beautify: options.beautify,
                ascii_only: options.ascii_only
            });

            toplevel.print(stream);
            result = stream.get();
        }

        //å¢žåŠ&nbsp;å‰ç¼€banner
        if (!isdebug) {
            result = compress.setPrefixBanner(jdf.config.output.hasBanner, source, result) + result + '\r\n';
        }
    } catch (e) {
        if (e &amp;&amp; e.message) {
            console.log('jdf error [compress.js] - ' + source + ' , line:' + e.line + ', ' + e.message);
        }
    }
    return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
					if ($.is.css(item) &amp;&amp; !filesListObj[staticUrl] &amp;&amp; buildTag.css &amp;&amp; item == widgetName+$.is.cssSuffix
 ){
						cssCompileFn(staticUrl);
					}

					/**
					 * @build widget js
					 */
					if ($.is.<span class="apidocCodeKeywordSpan">js</span>(item) &amp;&amp; !filesListObj[staticUrl] &amp;&amp; buildTag.js
 &amp;&amp; item == widgetName+$.is.jsSuffix){
						jsCompileFn(staticUrl);
					}
				});
				/*
				if (isJM){
					origin = origin.replace(widgetStr,placeholder);
				}*/
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.png" id="apidoc.element.jdf.compress.png">
        function <span class="apidocSignatureSpan">jdf.compress.</span>png
        <span class="apidocSignatureSpan">(source, target, haslog)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">png = function (source, target, haslog) {
   if(jdf.config.build.hasCmdLog) console.log('compress.png---'+source);

    var compressPngReg = jdf.config.output.compressPngReg;
    if (f.filter(source, false, compressPngReg)) {
        var buffer = fs.readFileSync(source);
        var options = {};
        if (typeof(haslog) != 'undefined') {
            options.params = '-v --iebug';
        }
        buffer = Pngquant.option(options).compress(buffer);
        fs.writeFileSync(target,buffer);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    f.write(source, sourceCode);
} else if ($.is.css(source)) {
    var sourceCode = compress.css2(source, isdebug);
    f.write(source, sourceCode);
}

//png optimize
if ($.is.<span class="apidocCodeKeywordSpan">png</span>(source) &amp;&amp; !isdebug &amp;&amp; jdf.config.output.compressPng
) {
    compress.png(source, source);
}

//cssä¸­å›¾ç‰‡urlå¢žåŠ&nbsp;åŸŸåå‰ç¼€
if (jdf.config.output.cssImagesUrlReplace &amp;&amp; $.is.css(source)) {
    var sourceCode = compress.cssImagesUrlReplace(source, sourceCode, jdf.config.cdn);
    f.write(source, sourceCode);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.setPrefixBanner" id="apidoc.element.jdf.compress.setPrefixBanner">
        function <span class="apidocSignatureSpan">jdf.compress.</span>setPrefixBanner
        <span class="apidocSignatureSpan">(bannerType, source, result)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">setPrefixBanner = function (bannerType, source, result) {
    var projectPath = jdf.getProjectPath() ? jdf.getProjectPath().replace('/', '-') + ' ' : '';
    var basename = path.basename(source);
    var banner = '';

    if (bannerType == 1) {
        banner = '/* ' + projectPath + basename + ' Date:' + $.getDay('-') + ' ' + $.getTime(':', false) + ' */\r\n';
    }

    if (bannerType == 2) {
        banner = '/* ' + projectPath + basename + ' md5:' + $.md5(result) + ' */\r\n';
    }

    return banner;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

        toplevel.print(stream);
        result = stream.get();
    }

    //å¢žåŠ&nbsp;å‰ç¼€banner
    if (!isdebug) {
        result = compress.<span class="apidocCodeKeywordSpan">setPrefixBanner</span>(jdf.config.output.hasBanner, source, result
) + result + '\r\n';
    }
} catch (e) {
    if (e &amp;&amp; e.message) {
        console.log('jdf error [compress.js] - ' + source + ' , line:' + e.line + ', ' + e.message
);
    }
}
return result;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.compress.webp" id="apidoc.element.jdf.compress.webp">
        function <span class="apidocSignatureSpan">jdf.compress.</span>webp
        <span class="apidocSignatureSpan">(source, target, quant, callback, haslog)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">webp = function (source, target, quant, callback, haslog) {
   if(jdf.config.build.hasCmdLog) console.log( 'compress.webp---'+source);

    var webp = require('webp-converter');
    webp.cwebp(source, target, "-q " + quant ? quant : quant, function(status) {
        //if conversion successfull status will be '100'
        //if conversion unsuccessfull status will be '101'
        if (callback) {
            callback(status);
        }
    });

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
//css webpæ&nbsp;·å¼è¿½åŠ&nbsp;
if ($.is.css(source)) {
    compress.appendWebpCSSFIX(source);
}

//å›¾ç‰‡æ&nbsp;¼å¼è½¬æ¢
if ($.is.jpg(source) || $.is.png(source)) {
    compress.<span class="apidocCodeKeywordSpan">webp</span>(
        source,
        source + ".webp",
        jdf.config.output.webpQuality ? jdf.config.output.webpQuality : 80,
        function(status) {
            if (callback) {
                callback(status);
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.compressScheduler" id="apidoc.module.jdf.compressScheduler">module jdf.compressScheduler</a></h1>




    <h2>
        <a href="#apidoc.element.jdf.compressScheduler.init" id="apidoc.element.jdf.compressScheduler.init">
        function <span class="apidocSignatureSpan">jdf.compressScheduler.</span>init
        <span class="apidocSignatureSpan">(outputdirName, isdebug, callBack)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (outputdirName, isdebug, callBack) {
    initFilesArray(outputdirName);
    CompressScheduler.isdebug = isdebug;

    //webp wrapper åªåœ¨å•çº¿ç¨‹ä¸‹æœ€ç¨³å®š
    if (jdf.config.threads === 0 || (jdf.config.output &amp;&amp; jdf.config.output.webp)) {
        var Compress = require('./compress.js');
        var task = arr.pop();
        while (task) {

            Compress.init(
                task,
                isdebug,
                jdf.config
            );
            task = arr.pop();
        }
        callBack();
    } else {
        //å¤šè¿›ç¨‹
        var fork = require('child_process').fork;
        var childPath = __dirname + "/compressWorker.js";
        childPath = path.normalize(childPath);
        var threadCount = jdf.config.threads || cpus.length;
        for (var i = 0; i &lt; threadCount; i++) {
            var subProc = fork(childPath);
            subProc.on('message', function(data) {
                var task = arr.pop();
                if (!task) {
                    this.disconnect();
                    _execOnceFlag++;
                    if (_execOnceFlag &gt;= threadCount) {
                        callBack();
                    }
                    return;
                }
                this.send({
                    task: task,
                    isdebug: isdebug,
                    config: jdf.config,
                    getProject: jdf.getProject
                });
            });
        }
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.concat" id="apidoc.module.jdf.concat">module jdf.concat</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.concat.init" id="apidoc.element.jdf.concat.init">
        function <span class="apidocSignatureSpan">jdf.concat.</span>init
        <span class="apidocSignatureSpan">(rSource)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (rSource){
	var concatFiles = jdf.config.output.concat;

	Object.size = function(obj) {
		var size = 0, key;
		for (key in obj) {
			if (obj.hasOwnProperty(key)) size++;
		}
		return size;
	};
	var source = f.realpath(rSource)+'/'+jdf.getProjectPath();
	
	if ( Object.size(concatFiles)) {
		for (var i in concatFiles  ){
			var res = '';
			concatFiles[i].forEach(function(j){
				var m = $.getCssExtname(source+'/'+j);
				if (f.exists(m)) {
					res += f.read(m);
					//f.del(source+'/'+j);
				}else {
					console.log('jdf warnning "'+j+'" is not exists');
				}
			});
			if (res != '') {
				f.write(source+'/'+i, res);
			}
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.cssSprite" id="apidoc.module.jdf.cssSprite">module jdf.cssSprite</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.cssSprite.init" id="apidoc.element.jdf.cssSprite.init">
        function <span class="apidocSignatureSpan">jdf.cssSprite.</span>init
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (source){
	if(jdf.config.output.cssSpriteMode == 0){
		cssSprite.overall(source);
	}

	if(jdf.config.output.cssSpriteMode == 1){
		var list = f.getdirlist(source, '.css$');
		list.forEach(function(item){
			try{
				var cssContent = cssSprite.scatter(item, f.read(item), source);
				f.write(item, cssContent);
			}catch(e){
			}
		});
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.cssSprite.overall" id="apidoc.element.jdf.cssSprite.overall">
        function <span class="apidocSignatureSpan">jdf.cssSprite.</span>overall
        <span class="apidocSignatureSpan">(source)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">overall = function (source){
   	var reg_background = /background(?:-image)?:([\s\S]*?)(?:;|$)/gi;
   	var reg_img_url = /url\s*\(\s*("(?:[^\\"\r\n\f]|\\[\s\S])*"|'(?:[^\\'\n\r\f]|\\[\s\S])*'|[^)}]+)\s*\)/i;
	var reg_position = /(0|[+-]?(?:\d*\.|)\d+px|left|right)\s*(0|[+-]?(?:\d*\.|)\d+px|top)/i;
	var reg_repeat = /\brepeat-(x|y)/i;
	var reg_is_sprite = /[?&amp;]__sprite/i;

	
	var result = [];
	var resultNew = [];

	var maxWidth = 0;
	var heightTotal = 0;
	var maxHeight = 0;
	var widthTotal = 0;

	var margin = jdf.config.output.cssSpriteMargin;//é«˜åº¦é˜ˆå€¼
	var suffix = jdf.config.suffix;
	var imagesSuffix = jdf.config.output.imagesSuffix;
	var cssSpriteDirection = jdf.config.output.cssSpriteDirection;

	var cssFiles = f.getdirlist(source, '.css$');
	var background = [];

	cssFiles.forEach(function(file, index){
		var content = f.read(file);
		var cssBg = content.match(reg_background);
		var dir = path.dirname(file);

		if(cssBg){
			cssBg.forEach(function(bg, index){
				background.push({
					bg: bg,
					dir: dir
				});
			});
		}
	});
	
	if(background){
		var resultTemp = {};
		background.forEach(function(item, index){
			var img_url = item.bg.match(reg_img_url);

			if(img_url &amp;&amp; reg_is_sprite.test(img_url[0]) ){
				var res = {
					content:null,
					url:null,
					position:null,
					repeat:null
				};

				var url = img_url[0].replace(/url\(|\)|\'|\"/gi,'');

				res.urlOrigin = url;
				url = url.replace(reg_is_sprite, '');

				var sprite_rem = img_url[0].match(new RegExp('__rem\\d+', 'g'));
				if(sprite_rem){
					res.rem = parseFloat(sprite_rem[0].replace('__rem', ''));
					url = url.replace(/__rem\d+/g, '');
				}

				res.url = path.join(item.dir, url);

				if(f.exists(res.url)){
					res.content = Images(res.url);
				
					//åŽ»é‡
					if(!resultTemp[res.url]){
						res.item = item.bg;
						res.width = res.content.size().width;
						res.height = res.content.size().height;

						if(cssSpriteDirection == 'vertical'){
							if(res.width&gt;maxWidth){
								maxWidth = res.width;
							}
							heightTotal += res.height + margin;
						}else{
							if(res.height&gt;maxHeight){
								maxHeight = res.height;
							}
							widthTotal += res.width + margin;
						}

						if(item.bg.match(reg_position)){
							res.position = item.bg.match(reg_position)[0];
						}
						if(item.bg.match(reg_repeat)){
							res.repeat = item.bg.match(reg_repeat)[0];
						}
						result.push(res);
					}
					resultTemp[res.url] = res.url;
					
				}else{
					console.log('jdf warning: [' + res.url + '] may be not exist.');
				}
			}
		});
	}

	if(result.length&gt;0){

		var outputName = jdf.getProjectPath().replace(/\//g, '_');
		var outputExtname = '.png';

		var imagesOutput = null;
		if(cssSpriteDirection == 'vertical'){
			imagesOutput = Images(maxWidth, heightTotal);
		}else{
			imagesOutput = Images(widthTotal, maxHeight);
		}

		var w = 0;
		var h = 0;
		result.forEach(function(item, i){
			if(!item.repeat){
				var positonArray = [];
				var x = 0, y = h, y2 = -h;

				if(cssSpriteDirection == 'vertical'){
					var x = 0, y = h, y2 = -h;
					if(item.position){
						var position = item.position.split(' ');
						var x1 = parseInt(position[0], 10)
						if(x1){
							x += x1;
						}
						var y1 = parseInt(position[1], 10)
						if(y1){
							y += y1;
							y2 -= y1;
						}
					}

					//ç”»å°å›¾ç‰‡
					imagesOutput.draw(item.content, 0, y);
				}else{
					var y = 0, x = w, x2 = -w;
					if(item.position){
						var position = item.position.split(' ');
						var x1 = parseInt(position[0], 10)
						if(x1){
							x += x1;
							x2 -= x1;
						}
						var y1 = parseInt(position[1], 10)
						if(y1){
							y += y1;
						}
					}

					//ç”»å°å›¾ç‰‡
					imagesOutput.draw(item.content, x, 0);
				}

				var urlOrigin = item.urlOrigin;

				//å°†éœ€è¦åˆå¹¶çš„å›¾ç‰‡åç§°æ›¿æ¢ä¸ºåˆå¹¶åŽçš„æ–°å›¾ç‰‡åç§°
				var urlOriginNew = urlOrigin.replace(path.basename(item.url, path.extname(item.url)), outputName);
				
				//å°†å›¾ç‰‡çš„å­˜æ”¾ç›®å½•ç»Ÿä¸€æ›¿æ¢ä¸ºcss/i
				urlOriginNew = urlOriginNew.replace(path.dirname(urlOriginNew), '/css/i');

				//ç»™å›¾ç‰‡æ·»åŠ&nbsp;cdn
				urlOriginNew = imagesUrlAddCdn('/' + jdf. ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * @init
 * @param {String} source cssè·¯å¾„æ–‡ä»¶å¤¹
 */
cssSprite.init = function(source){
	if(jdf.config.output.cssSpriteMode == 0){
		cssSprite.<span class="apidocCodeKeywordSpan">overall</span>(source);
	}

	if(jdf.config.output.cssSpriteMode == 1){
		var list = f.getdirlist(source, '.css$');
		list.forEach(function(item){
			try{
				var cssContent = cssSprite.scatter(item, f.read(item), source);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.cssSprite.scatter" id="apidoc.element.jdf.cssSprite.scatter">
        function <span class="apidocSignatureSpan">jdf.cssSprite.</span>scatter
        <span class="apidocSignatureSpan">(source, content, sourceOrigin)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scatter = function (source, content, sourceOrigin){
   	var reg_background = /background(?:-image)?:([\s\S]*?)(?:;|$)/gi;
   	var reg_img_url = /url\s*\(\s*("(?:[^\\"\r\n\f]|\\[\s\S])*"|'(?:[^\\'\n\r\f]|\\[\s\S])*'|[^)}]+)\s*\)/i;
	var reg_position = /(0|[+-]?(?:\d*\.|)\d+px|left|right)\s*(0|[+-]?(?:\d*\.|)\d+px|top)/i;
	var reg_repeat = /\brepeat-(x|y)/i;
	var reg_is_sprite = /[?&amp;]__sprite/i;

	var background = content.match(reg_background);
	var result = [];

	var maxWidth = 0;
	var heightTotal = 0;
	var maxHeight = 0;
	var widthTotal = 0;

	var margin = jdf.config.output.cssSpriteMargin;//é«˜åº¦é˜ˆå€¼
	var suffix = jdf.config.suffix;
	var imagesSuffix = jdf.config.output.imagesSuffix;
	var cssSpriteDirection = jdf.config.output.cssSpriteDirection;

	if(background){
		var resultTemp = {};
		background.forEach(function(item){
			var img_url = item.match(reg_img_url);
			if(img_url &amp;&amp; reg_is_sprite.test(img_url[0]) ){
				var res = {
					content:null,
					url:null,
					position:null,
					repeat:null
				};

				var url = img_url[0].replace(/url\(|\)|\'|\"/gi,'');
				res.urlOrigin = url;
				url = url.replace(reg_is_sprite, '');

				var sprite_rem = img_url[0].match(new RegExp('__rem\\d+', 'g'));
				if(sprite_rem){
					res.rem = parseFloat(sprite_rem[0].replace('__rem', ''));
					url = url.replace(/__rem\d+/g, '');
				}

				if(/^\/\w/.test(url)){
					res.url = path.join(jdf.config.outputDirName, jdf.getProjectPath(), url)
				}else{
					res.url = path.join(path.dirname(source),url);
				}
				res.content = Images(res.url);
				
				//åŽ»é‡
				if(!resultTemp[url]){
					res.item = item;
					res.width = res.content.size().width;
					res.height = res.content.size().height;

					if(cssSpriteDirection == 'vertical'){
						if(res.width&gt;maxWidth){
							maxWidth = res.width;
						}
						heightTotal += res.height + margin;
					}else{
						if(res.height&gt;maxHeight){
							maxHeight = res.height;
						}
						widthTotal += res.width + margin;
					}

					if(item.match(reg_position)){
						res.position = item.match(reg_position)[0];
					}
					if(item.match(reg_repeat)){
						res.repeat = item.match(reg_repeat)[0];
					}
					result.push(res);
				}
				resultTemp[url] = url;
			}
		});
	}

	if(result.length&gt;0){

		var outputName = path.basename(source, path.extname(source));
		var outputExtname = '.png';

		var imagesOutput = null;
		if(cssSpriteDirection == 'vertical'){
			imagesOutput = Images(maxWidth, heightTotal);
		}else{
			imagesOutput = Images(widthTotal, maxHeight);
		}
		
		var w = 0;
		var h = 0;
		result.forEach(function(item, i){
			if(!item.repeat){
				outputExtname = path.extname(item.url);

				if(cssSpriteDirection == 'vertical'){
					var x = 0, y = h, y2 = -h;
					if(item.position){
						var position = item.position.split(' ');
						var x1 = parseInt(position[0], 10)
						if(x1){
							x += x1;
						}
						var y1 = parseInt(position[1], 10)
						if(y1){
							y += y1;
							y2 -= y1;
						}
					}

					//ç”»å°å›¾ç‰‡
					imagesOutput.draw(item.content, 0, y);
				}else{
					var y = 0, x = w, x2 = -w;
					if(item.position){
						var position = item.position.split(' ');
						var x1 = parseInt(position[0], 10)
						if(x1){
							x += x1;
							x2 -= x1;
						}
						var y1 = parseInt(position[1], 10)
						if(y1){
							y += y1;
						}
					}

					//ç”»å°å›¾ç‰‡
					imagesOutput.draw(item.content, x, 0);
				}

				//æ&nbsp;·å¼æ›¿æ¢
				var urlOrigin = item.urlOrigin;
				var urlOriginNew = urlOrigin.replace(path.basename(item.url, path.extname(item.url)) , outputName);
				urlOriginNew = urlOriginNew.replace(/^\//, '');
				if(jdf.config.cdn &amp;&amp; jdf.config.output.cssImagesUrlReplace){
					urlOriginNew = imagesUrlAddCdn(path.dirname(source).replace(sourceOrigin, '') +'/'+ urlOriginNew);
				}
				urlOriginNew = urlOriginNew.replace(/\.\/|\.\.\//gi, '');
				
				var backgroundNew = item.item.replace(urlOrigin, urlOriginNew);

				if(cssSpriteDirection == 'vertical'){
					if(item.rem){
						backgroundNew += 'background-position:'+(x/item.rem)+'rem '+(y2/item.rem)+'rem;';
						backgroundNew += 'backgroun ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
		cssSprite.overall(source);
	}

	if(jdf.config.output.cssSpriteMode == 1){
		var list = f.getdirlist(source, '.css$');
		list.forEach(function(item){
			try{
				var cssContent = cssSprite.<span class="apidocCodeKeywordSpan">scatter</span>(item, f.read(item), source);
				f.write(item, cssContent);
			}catch(e){
			}
		});
	}
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.csslint" id="apidoc.module.jdf.csslint">module jdf.csslint</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.csslint.init" id="apidoc.element.jdf.csslint.init">
        function <span class="apidocSignatureSpan">jdf.csslint.</span>init
        <span class="apidocSignatureSpan">(filename, fileContent)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (filename, fileContent){
	if(typeof(fileContent) == 'undefined'){
		if(f.isDir(filename)){
	        var filelist = f.getdirlist(filename, '(css|scss|less)$');
	        filelist.forEach(function(item){
	            csslintInit(item);
	        })
	    }else if(f.isFile(filename) &amp;&amp; ($.is.css(filename) || $.is.less(filename) || $.is.sass(filename) ) ){
	       csslintInit(filename);
	    }else{
	    	console.log('jdf csslint ' + filename + ' is not exists');
	    }
	}else{
		csslintInit(filename, fileContent);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.file" id="apidoc.module.jdf.file">module jdf.file</a></h1>




    <h2>
        <a href="#apidoc.element.jdf.file.base64Encode" id="apidoc.element.jdf.file.base64Encode">
        function <span class="apidocSignatureSpan">jdf.file.</span>base64Encode
        <span class="apidocSignatureSpan">(file)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">base64Encode = function (file) {
    var bitmap = fs.readFileSync(file);
    return new Buffer(bitmap).toString('base64');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

	if(background){
		content = escape(content);
		background.forEach(function(item, index){
			var img_url = item.match(reg_img_url);

			if(img_url &amp;&amp; img_url[0].match(reg_is_base64)){
				var base64Encode = f.<span class="apidocCodeKeywordSpan">base64Encode</span>(path.join(path.dirname(source), img_url[1].replace
('?__base64', '')));
				content = content.replace(new RegExp(escape(img_url[1]), 'gi'), ('data:image/png;base64,'+base64Encode));
			}
		});
	}

	return unescape(content);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.copy" id="apidoc.element.jdf.file.copy">
        function <span class="apidocSignatureSpan">jdf.file.</span>copy
        <span class="apidocSignatureSpan">(source, target, include, exclude, uncover, move , logTag, encoding)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copy = function (source, target, include, exclude, uncover, move , logTag, encoding){
		var removedAll = true;
		var source = f.realpath(source);

		if(source &amp;&amp; f.filter(source, null, exclude)){
			if (!f.exists(target) &amp;&amp; f.isDir(source)) {
				f.mkdir(target);
                //fs.chmodSync(target, 666);
			}
			
			if(f.isDir(source)){
				fs.readdirSync(source).forEach(function(name){
					if(name != '.' &amp;&amp; name != '..' &amp;&amp; f.excludeFiles(name)  ) {
						removedAll = f.copy(source + '/' + name,target + '/' + name, include, exclude, uncover, move , logTag ) &amp;&amp; removedAll;
					}
				});

				//Bug  return binding.rmdir(pathModule._makeLong(path));
				//https://github.com/joyent/node/issues/3051
				//Yes, fs.rmdirSync throw an error, as you see. Because the directory still has a file even after fs.unlinkSync is called to
 remove the file.
				if(move &amp;&amp; removedAll) {
					fs.rmdirSync(source);
				}
			} else if(f.isFile(source) &amp;&amp; f.filter(source, include, exclude)){
				if(uncover &amp;&amp; f.exists(target)){
					//uncover
					removedAll = false;
				} else {
					//ä¸­æ–‡ä¼šæŠ¥é”™
					f.write(target,fs.readFileSync(source), encoding);
                    //f.copyBinary(source,target)
					if(move) {
						fs.unlinkSync(source);
					}
				}
			} else {
				removedAll = false;
			}
		} else {
			if (typeof(logTag) != 'undefined' &amp;&amp; logTag) {
				console.log('jdf error : [ '+source+' ] --- no such file or dir');
			}
		}
		return removedAll;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			}

			//å½“å‰å·¥ç¨‹ä¸å­˜çš„jdjå’Œjdmæ¨¡å—ä»ŽæœåŠ¡ç«¯æ–‡ä»¶å¤åˆ¶è‡³å½“å‰è¿‡æ¥
			/*
			if (isJM &amp;&amp; !f.exists(fileDir)){
				var source = path.normalize(jdf[widgetType+'Dir']+ widgetDir);
				var target = jdf.currentDir + '/widget/' +widgetName;
				f.<span class="apidocCodeKeywordSpan">copy</span>(source,target);
			}*/
			var placeholder='';
			var dirExists = f.exists(fileDir);
			if (dirExists){
				var files = fs.readdirSync(fileDir);
				files.forEach(function(item){
					//less,scssæ–‡ä»¶è½¬æ¢æˆcssæ–‡ä»¶
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.copyBinary" id="apidoc.element.jdf.file.copyBinary">
        function <span class="apidocSignatureSpan">jdf.file.</span>copyBinary
        <span class="apidocSignatureSpan">(srcFile, destFile)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copyBinary = function (srcFile, destFile){
	var BUF_LENGTH = 64 * 1024;
		var _buff = new Buffer(BUF_LENGTH);
		
    try {
        var fdr = fs.openSync(srcFile, 'r')
        var stat = fs.fstatSync(fdr)
        var fdw = fs.openSync(destFile, 'w', stat.mode)
        var bytesRead = 1
        var pos = 0

        while (bytesRead &gt; 0) {
            bytesRead = fs.readSync(fdr, _buff, 0, BUF_LENGTH, pos)
            fs.writeSync(fdw, _buff, 0, bytesRead)
            pos += bytesRead
        }

        fs.closeSync(fdr)
        fs.closeSync(fdw)
    } catch (e) {
        console.log("jdf error [f.copyBinary] " + srcFile);
        console.log(e);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			} else if(f.isFile(source) &amp;&amp; f.filter(source, include, exclude)){
				if(uncover &amp;&amp; f.exists(target)){
					//uncover
					removedAll = false;
				} else {
					//ä¸­æ–‡ä¼šæŠ¥é”™
					f.write(target,fs.readFileSync(source), encoding);
                    //f.<span class="apidocCodeKeywordSpan">copyBinary</span>(source,target)
					if(move) {
						fs.unlinkSync(source);
					}
				}
			} else {
				removedAll = false;
			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.currentDir" id="apidoc.element.jdf.file.currentDir">
        function <span class="apidocSignatureSpan">jdf.file.</span>currentDir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">currentDir = function (){
		return fs.realpathSync('.');
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 */
compress.dir = function(src, dest) {
if (typeof(src) == 'undefined') {
    console.log('jdf warning no src folder');
    return;
}

var srcPath = path.normalize(f.<span class="apidocCodeKeywordSpan">currentDir</span>() + '/' + src);
var destPath;

if (typeof(dest) == 'undefined') {
    destPath = srcPath;
} else {
    destPath = path.normalize(f.currentDir() + '/' + dest);
    f.copy(srcPath, destPath);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.del" id="apidoc.element.jdf.file.del">
        function <span class="apidocSignatureSpan">jdf.file.</span>del
        <span class="apidocSignatureSpan">(source, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">del = function (source, callback){
		var removedAll = true;
		var source = f.realpath(source);

		if(source){
			if(f.isDir(source)){
				var files;
				try {
					files = fs.readdirSync(source);
				} catch (err) {
					console.log(err);
				}
				
				files.forEach(function(name){
					if(name != '.' &amp;&amp; name != '..') {
						removedAll = f.del(source + '/' + name) &amp;&amp; removedAll;
					}
				});

				if(removedAll) {
					if(fs.existsSync(source)){
						fs.rmdirSync(source);	
					}
					
					if(callback) callback();
				}
			} else if(f.isFile(source)){
				if (f.isWin &amp;&amp; f.exists(source)) {
					fs.chmodSync(source, 666);
				}
				fs.unlinkSync(source);
			} else {
				removedAll = false;
			}
		}

		return removedAll;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if ( Object.size(concatFiles)) {
		for (var i in concatFiles  ){
			var res = '';
			concatFiles[i].forEach(function(j){
				var m = $.getCssExtname(source+'/'+j);
				if (f.exists(m)) {
					res += f.read(m);
					//f.<span class="apidocCodeKeywordSpan">del</span>(source+'/'+j);
				}else {
					console.log('jdf warnning "'+j+'" is not exists');
				}
			});
			if (res != '') {
				f.write(source+'/'+i, res);
			}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.delAsync" id="apidoc.element.jdf.file.delAsync">
        function <span class="apidocSignatureSpan">jdf.file.</span>delAsync
        <span class="apidocSignatureSpan">(target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">delAsync = function (target){
    var fork = require('child_process').fork;
    var childPath=__dirname+"/fileWorker.js";
    childPath=path.normalize(childPath);

    var subProc =  fork(childPath);
    subProc.on('message', function(data) {
        this.disconnect();
    });

    subProc.send({
        target:target,
        route:'del'
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    }
}
    } else if (runType == 'output') {
// jdf.bgMkdir();
// var _bgdir=jdf.bgCurrentDir+"_"+Math.random();
// f.renameFile(jdf.bgCurrentDir,_bgdir);
// console.log(_bgdir);
// f.<span class="apidocCodeKeywordSpan">delAsync</span>(_bgdir);
// f.mkdir(jdf.bgCurrentDir);

jdf.bgMkdir();
f.del(jdf.bgCurrentDir, function() {
    jdf.bgCopyDir();
    jdf.buildMain(runType);
    //é»˜è®¤
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.download" id="apidoc.element.jdf.file.download">
        function <span class="apidocSignatureSpan">jdf.file.</span>download
        <span class="apidocSignatureSpan">(source, target, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">download = function (source, target, callback){
		var http = require('http');
		var fs = require('fs');

		var file = fs.createWriteStream(target);
		var request = http.get(source,function(response) {
			var status = response.statusCode;
			response.pipe(file);

			response.on('end',function(){
				if(status &gt;= 200 &amp;&amp; status &lt; 300 || status === 304){
					if(callback) callback('ok');
				}
				
				if(status === 404){
					console.log('jdf download error '+source+ ' not exist.');
					if(callback) callback('error');
				}
			});

			response.on('error',function(err){
				 var msg = typeof err === 'object' ? err.message : err;
				 console.log(err);
			})
		});
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
jdf.download = function(pathItem, targetDir) {
var url = jdf.config[pathItem];
var cacheDir = path.normalize(jdf.cacheDir + '/' + pathItem + '.tar');

console.log('jdf downloading');
jdf.dot.begin();

f.<span class="apidocCodeKeywordSpan">download</span>(url, cacheDir, function(data) {
    if (data == 'ok') {
        f.tar(cacheDir, targetDir, function() {
            console.log('\r\njdf [' + pathItem + '] install done');
            jdf.dot.end(false);
        });
    } else if (data == 'error') {
        jdf.dot.end(false);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.excludeFiles" id="apidoc.element.jdf.file.excludeFiles">
        function <span class="apidocSignatureSpan">jdf.file.</span>excludeFiles
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">excludeFiles = function (filename){
		 return !(/.svn|Thumbs.db|.DS_Store/.test(filename));
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			if (!f.exists(target) &amp;&amp; f.isDir(source)) {
				f.mkdir(target);
                //fs.chmodSync(target, 666);
			}
			
			if(f.isDir(source)){
				fs.readdirSync(source).forEach(function(name){
					if(name != '.' &amp;&amp; name != '..' &amp;&amp; f.<span class="apidocCodeKeywordSpan">excludeFiles
</span>(name)  ) {
						removedAll = f.copy(source + '/' + name,target + '/' + name, include, exclude, uncover, move , logTag ) &amp;#
x26;&amp; removedAll;
					}
				});

				//Bug  return binding.rmdir(pathModule._makeLong(path));
				//https://github.com/joyent/node/issues/3051
				//Yes, fs.rmdirSync throw an error, as you see. Because the directory still has a file even after fs.unlinkSync is called to
 remove the file.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.exists" id="apidoc.element.jdf.file.exists">
        function <span class="apidocSignatureSpan">jdf.file.</span>exists
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">exists = function (path) {
  try {
    nullCheck(path);
    binding.stat(pathModule._makeLong(path), statValues);
    return true;
  } catch (e) {
    return false;
  }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

			if(widgetInputName.length &gt; 0 &amp;&amp; !$.inArray(widgetInputName, widgetName)){
				return;
			}

			//å½“å‰å·¥ç¨‹ä¸å­˜çš„jdjå’Œjdmæ¨¡å—ä»ŽæœåŠ¡ç«¯æ–‡ä»¶å¤åˆ¶è‡³å½“å‰è¿‡æ¥
			/*
			if (isJM &amp;&amp; !f.<span class="apidocCodeKeywordSpan">exists</span>(fileDir)){
				var source = path.normalize(jdf[widgetType+'Dir']+ widgetDir);
				var target = jdf.currentDir + '/widget/' +widgetName;
				f.copy(source,target);
			}*/
			var placeholder='';
			var dirExists = f.exists(fileDir);
			if (dirExists){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.filter" id="apidoc.element.jdf.file.filter">
        function <span class="apidocSignatureSpan">jdf.file.</span>filter
        <span class="apidocSignatureSpan">(source, include, exclude)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">filter = function (source, include, exclude){
		var filterTag = true;
		if (include) {
			var reg = new RegExp(include, 'gm');
			var regResult = reg.exec(source);
			if (!regResult) {
				filterTag = false;
			}
		}

		if (exclude) {
			var reg = new RegExp(exclude, 'gm');
			var regResult = reg.exec(source);
			if (regResult) {
				filterTag = false;
			}
		}

		return filterTag;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
@option {String} target è¾“å‡ºæ–‡ä»¶è·¯å¾„
@option {Boolse} false æ˜¯å¦æ˜¾ç¤ºlog
**/
compress.png = function(source, target, haslog) {
   if(jdf.config.build.hasCmdLog) console.log('compress.png---'+source);

var compressPngReg = jdf.config.output.compressPngReg;
if (f.<span class="apidocCodeKeywordSpan">filter</span>(source, false, compressPngReg)) {
    var buffer = fs.readFileSync(source);
    var options = {};
    if (typeof(haslog) != 'undefined') {
        options.params = '-v --iebug';
    }
    buffer = Pngquant.option(options).compress(buffer);
    fs.writeFileSync(target,buffer);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.getdirlist" id="apidoc.element.jdf.file.getdirlist">
        function <span class="apidocSignatureSpan">jdf.file.</span>getdirlist
        <span class="apidocSignatureSpan">(source, include, exclude)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getdirlist = function (source, include, exclude){
	var _this = this;
	var result = [];
	//var source = f.realpath(source);
	if(source){
		if(f.isDir(source)){
			fs.readdirSync(source).forEach(function(name){
				result = result.concat( _this.getdirlist(source + '/' + name, include, exclude) );
			});
		} else if(f.isFile(source) &amp;&amp; f.filter(source, include, exclude)){
			result.push(source.replace("//","/"));
		}
	}
	return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param src è¾“å…¥æ–‡ä»¶/æ–‡ä»¶å¤¹ç›¸å¯¹è·¯å¾„
 * @param dist è¾“å‡ºæ–‡ä»¶/æ–‡ä»¶å¤¹ç›¸å¯¹è·¯å¾„
 * @doc http://babeljs.io/docs/usage/api/
 */

exports.init = function(src, dist){
	if(f.isDir(src)){
   var filelist = f.<span class="apidocCodeKeywordSpan">getdirlist</span>(src,'(js)$',jdf.config.build.isEs6Exclude);
    filelist.forEach(function(item){
        babel(item, dist);
    })
}else if(f.isFile(src)){
   babel(src, dist);
}else{
	console.log('jdf buildJs "' + src + '"" is not exists');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.isBlankDir" id="apidoc.element.jdf.file.isBlankDir">
        function <span class="apidocSignatureSpan">jdf.file.</span>isBlankDir
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isBlankDir = function (path){
		return f.getdirlist(path).length == 0;
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

ftp.uploadMain = function(source, target, include, exclude, uncover, move, logTag, callback) {
var removedAll = true;
var source = f.realpath(source);
if (source) {
    var core = function() {
        if (f.isDir(source)) {
            if (!f.<span class="apidocCodeKeywordSpan">isBlankDir</span>(source)) {
                ftp.client.mkdir(target, false, function() {});
                fs.readdirSync(source).forEach(function(name) {
                        if (name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))) {
                            removedAll = ftp.uploadMain(source + '/' + name, target + '/' + name, include, exclude
, uncover, move, logTag, callback) &amp;&amp; removedAll;
                        }
                    });
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.isDir" id="apidoc.element.jdf.file.isDir">
        function <span class="apidocSignatureSpan">jdf.file.</span>isDir
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isDir = function (path){
		return this.exists(path) &amp;&amp; fs.statSync(path).isDirectory();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @init
 */
buildCss.init = function(rSource, target){
	var allTag = true;
	var source = f.realpath(rSource);

	if(source){
		if(f.<span class="apidocCodeKeywordSpan">isDir</span>(source)){
			fs.readdirSync(source).forEach(function(name){
				if(name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))){
					allTag = buildCss.init(source + '/' + name, target + '/' + name) &amp;&amp; allTag;
				}
			});
		} else if(f.isFile(source) &amp;&amp; ($.is.css(source) || $.is.less(source) || $.is.sass(source) ) ){
			if(jdf.config.build.hasCmdLog) console.log('buildCss---'+rSource);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.isFile" id="apidoc.element.jdf.file.isFile">
        function <span class="apidocSignatureSpan">jdf.file.</span>isFile
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">isFile = function (path){
		return this.exists(path) &amp;&amp; fs.statSync(path).isFile();
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	if(source){
		if(f.isDir(source)){
			fs.readdirSync(source).forEach(function(name){
				if(name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))){
					allTag = buildCss.init(source + '/' + name, target + '/' + name) &amp;&amp; allTag;
				}
			});
		} else if(f.<span class="apidocCodeKeywordSpan">isFile</span>(source) &amp;&amp; ($.is.css(source) || $.is.less(source) || $.
is.sass(source) ) ){
			if(jdf.config.build.hasCmdLog) console.log('buildCss---'+rSource);

			var autoprefixerFn = function(file){
				if(jdf.config.build.autoprefixer){
					require('./buildByAutoprefixer.js').init({contents:file.contents, path:file.path }, jdf.config.build.autoprefixerOptions
)
				}else{
					f.write(file.path, file.contents);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.mkdir" id="apidoc.element.jdf.file.mkdir">
        function <span class="apidocSignatureSpan">jdf.file.</span>mkdir
        <span class="apidocSignatureSpan">(p, mode, made)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mkdir = function (p, mode, made) {
    if (mode === undefined) {
        mode = 0777 &amp; (~process.umask());
    }
    if (!made) made = null;

    if (typeof mode === 'string') mode = parseInt(mode, 8);
    p = path.resolve(p);

	if ( !f.exists(p) ) {
		try {
			fs.mkdirSync(p, mode);
			made = made || p;
		}
		catch (err0) {
			switch (err0.code) {
				case 'ENOENT' :
					made = f.mkdir(path.dirname(p), mode, made);
					f.mkdir(p, mode, made);
					break;
				default:
					var stat;
					try {
						stat = fs.statSync(p);
					}
					catch (err1) {
						throw err0;
					}
					if (!stat.isDirectory()) throw err0;
					break;
			}
		}
		return made;
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// console.log(unescape(content))
			}
			f.write(file, unescape(content));
		});
		
		//ä¿å­˜åˆå¹¶å®Œæˆçš„cssSpriteå›¾ç‰‡
		var outputDirName = jdf.config.outputDirName + '/' + jdf.getProjectPath() + '/css/i/';
		f.<span class="apidocCodeKeywordSpan">mkdir</span>(outputDirName);
		try{
			if(imagesSuffix == 2){
				outputName = outputName + suffix;
			}
			imagesOutput.save(outputDirName + outputName + outputExtname);
		}catch(e){
			console.log(e);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.moveFolderAsync" id="apidoc.element.jdf.file.moveFolderAsync">
        function <span class="apidocSignatureSpan">jdf.file.</span>moveFolderAsync
        <span class="apidocSignatureSpan">(source, target)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">moveFolderAsync = function (source, target){
    var fork = require('child_process').fork;
    var childPath=__dirname+"/fileWorker.js";
    childPath=path.normalize(childPath);

    var subProc =  fork(childPath);
    subProc.on('message', function(data) {
        this.disconnect();
    });

    subProc.send({
        source:source,
        target:target,
        route:'copy'
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.pathFormat" id="apidoc.element.jdf.file.pathFormat">
        function <span class="apidocSignatureSpan">jdf.file.</span>pathFormat
        <span class="apidocSignatureSpan">(str)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pathFormat = function (str){
		return str.replace(/\\/g,'\/');
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
							var smartyCompiled = new jSmart(placeholder);

							if(smartyCompiled &amp;&amp; smartyJSON){
								placeholder = smartyCompiled.fetch(JSON.parse(smartyJSON));
							}
						}

						fileUrl = f.<span class="apidocCodeKeywordSpan">pathFormat</span>(path.join(widgetDir, item));
						
						var typeHtml='';
						if (widgetType) typeHtml='['+widgetType+']';
						//insert comment
						if ( jdf.config.build.widgetIncludeComment){
							if(widgetComment === 'false') return;
							if(/&lt;\!DOCTYPE/.test(placeholder)){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.read" id="apidoc.element.jdf.file.read">
        function <span class="apidocSignatureSpan">jdf.file.</span>read
        <span class="apidocSignatureSpan">(path, encodeing)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">read = function (path, encodeing){
		if (this.exists(path)){
			try {
				if(typeof(encodeing) != 'undefined' &amp;&amp; encodeing == null){
					return fs.readFileSync(path);
				}else{
					var encodeing = encodeing || 'utf8';
					return fs.readFileSync(path, encodeing);
				}
			} catch (e) {
				console.log("jdf error [f.read]");
				console.log(path);
				console.log(e);
			}		
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

base64.init = function(source){
	if(jdf.config.build.hasCmdLog) console.log('compress.base64---'+source);
	var reg_background = /background(?:-image)?:([\s\S]*?)(?:;|$)/gi;
	var reg_img_url = /url\s*\(\s*("(?:[^\\"\r\n\f]|\\[\s\S])*"|'(?:[^\\'\n\r\f]|\\[\s\S])*'|[^)}]+)\
s*\)/i;
	var reg_is_base64 = /[?&amp;]__base64/i;

	var content = f.<span class="apidocCodeKeywordSpan">read</span>(source);
	var background = content.match(reg_background);

	if(background){
		content = escape(content);
		background.forEach(function(item, index){
			var img_url = item.match(reg_img_url);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.readJSON" id="apidoc.element.jdf.file.readJSON">
        function <span class="apidocSignatureSpan">jdf.file.</span>readJSON
        <span class="apidocSignatureSpan">(url, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">readJSON = function (url, callback){
	var res = null;
	if (f.exists(url)) {
		try{
			var data = f.read(url);
			if (data) {
				data = JSON.parse(data);
				res = data;
			}
			if(callback) callback(res);
		}catch(e){
			console.log('jdf error [f.readJSON] "'+url+'" format error' );
			console.log(e);
			//if(callback) callback(res);
		}
	}else{
		console.log('jdf error [f.readJSON] "'+url+'" is not exists' );
		//if(callback) callback(res);
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    downloadMain(source + '/' + version, target, function(data) {
        if (data == 'error') {
            console.log('jdf warnning widget [' + widgetNameVersion + '] is not exists on server ');
        } else {
            console.log('jdf widget [' + widgetNameVersion + '] install done from server ');
        }
        f.<span class="apidocCodeKeywordSpan">readJSON</span>(target + '/component.json', function(data) {
            for (name in data.dependencies) {
                download(name, force);
            }
            ftp.client.end();
        });
    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.realpath" id="apidoc.element.jdf.file.realpath">
        function <span class="apidocSignatureSpan">jdf.file.</span>realpath
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">realpath = function (path){
		if(path &amp;&amp; f.exists(path)){
			path = fs.realpathSync(path);
			if(this.isWin){
				path = path.replace(/\\/g, '/');
			}
			if(path !== '/'){
				path = path.replace(/\/$/, '');
			}
			return path;
		} else {
			return false;
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var buildCss = module.exports = {};

/**
 * @init
 */
buildCss.init = function(rSource, target){
	var allTag = true;
	var source = f.<span class="apidocCodeKeywordSpan">realpath</span>(rSource);

	if(source){
		if(f.isDir(source)){
			fs.readdirSync(source).forEach(function(name){
				if(name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))){
					allTag = buildCss.init(source + '/' + name, target + '/' + name) &amp;&amp; allTag;
				}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.renameFile" id="apidoc.element.jdf.file.renameFile">
        function <span class="apidocSignatureSpan">jdf.file.</span>renameFile
        <span class="apidocSignatureSpan">(path, dest)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renameFile = function (path, dest){
	fs.renameSync(path,dest);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            jdf.watch(runType, callback, data);
        });
    }
}
    } else if (runType == 'output') {
// jdf.bgMkdir();
// var _bgdir=jdf.bgCurrentDir+"_"+Math.random();
// f.<span class="apidocCodeKeywordSpan">renameFile</span>(jdf.bgCurrentDir,_bgdir);
// console.log(_bgdir);
// f.delAsync(_bgdir);
// f.mkdir(jdf.bgCurrentDir);

jdf.bgMkdir();
f.del(jdf.bgCurrentDir, function() {
    jdf.bgCopyDir();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.tar" id="apidoc.element.jdf.file.tar">
        function <span class="apidocSignatureSpan">jdf.file.</span>tar
        <span class="apidocSignatureSpan">(source, target, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tar = function (source, target, callback){
		//å¼•ç”¨çš„ç»„ä»¶
		var tar = require("tar");
		fs.createReadStream(source)
		.pipe(tar.Extract({ path:target }))
		.on("error",function (err) {
			console.error("jdf [file.tar] error "+source)
		})
		.on("end", function () {
			if(callback) callback();
		})
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var cacheDir = path.normalize(jdf.cacheDir + '/' + pathItem + '.tar');

console.log('jdf downloading');
jdf.dot.begin();

f.download(url, cacheDir, function(data) {
    if (data == 'ok') {
        f.<span class="apidocCodeKeywordSpan">tar</span>(cacheDir, targetDir, function() {
            console.log('\r\njdf [' + pathItem + '] install done');
            jdf.dot.end(false);
        });
    } else if (data == 'error') {
        jdf.dot.end(false);
    }
})
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.file.write" id="apidoc.element.jdf.file.write">
        function <span class="apidocSignatureSpan">jdf.file.</span>write
        <span class="apidocSignatureSpan">(path, source, encodeing)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">write = function (path, source, encodeing){
		try {
			var encodeing = encodeing || 'utf8';

			if(encodeing == 'gbk'){
				var s = iconv.decode(source, 'gbk');
    			source = iconv.encode(s, 'gbk');
    		}

			fs.writeFileSync(path , source, encodeing);
		} catch (e) {
			console.log("jdf error [f.write] " + path);
			console.log(e);
		}
	}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var postcss      = require('postcss');
var cssnext      = require('cssnext');
var f      		 = require('./file');

var doAutoprefixer = module.exports = {};
doAutoprefixer.init = function(file, options){
	var contents = postcss([autoprefixer(options), cssnext]).process(file.contents).css;
	f.<span class="apidocCodeKeywordSpan">write</span>(file.path, contents);
}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.fileFormat" id="apidoc.module.jdf.fileFormat">module jdf.fileFormat</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.fileFormat.init" id="apidoc.element.jdf.fileFormat.init">
        function <span class="apidocSignatureSpan">jdf.fileFormat.</span>init
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (filename){
	if(!typeof(filename) !== 'undefined'){
		if(f.isDir(filename)){
			var filelist = f.getdirlist(filename, '(html|vm|tpl|css|scss|less|js)$');

			filelist.forEach(function(file){
				route(file);
			});

		}else{
			route(filename);
		}
	}

	function route(file){
		var exists = f.exists(file);
		
		if(exists){
			if($.is.html(file) || $.is.vm(file) || $.is.tpl(file)){
				htmlFormat(file);

			}else if($.is.css(file) || $.is.less(file) || $.is.sass(file)){
				cssFormat(file);

			}else if($.is.js(file)){
				jsFormat(file);

			}else{
				console.log('jdf warning: can not format the [' + file + '].\n');
			}
		}else{
			console.log('jdf error: the [' + file + '] may be not exist.');
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.fileLint" id="apidoc.module.jdf.fileLint">module jdf.fileLint</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.fileLint.init" id="apidoc.element.jdf.fileLint.init">
        function <span class="apidocSignatureSpan">jdf.fileLint.</span>init
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (filename){
	if(!typeof(filename) !== 'undefined'){
		if(f.isDir(filename)){
			var filelist = f.getdirlist(filename, '(html|vm|tpl|css|scss|less|js)$');

			filelist.forEach(function(file){
				route(file);
			});

		}else{
			route(filename);
		}
	}

	function route(file){
		var exists = f.exists(file);

		if($.is.httpLink(file)){
			httpLinkLint(file);
			return;
		}

		if(exists){
			if($.is.html(file) || $.is.vm(file) || $.is.tpl(file)){
				htmlLint(file);

			}else if($.is.css(file) || $.is.less(file) || $.is.sass(file)){
				cssLint(file);

			}else if($.is.js(file)){
				jsLint(file);

			}else{
				console.log('jdf warning: can not lint the [' + file + '].\n');
			}
		}else{
			console.log('jdf error: the [' + file + '] may be not exist.');
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.ftp" id="apidoc.module.jdf.ftp">module jdf.ftp</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.ftp.download" id="apidoc.element.jdf.ftp.download">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>download
        <span class="apidocSignatureSpan">(source, target, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">download = function (source, target, callback) {

    ftp.tryConnect().done(function() {
        ftp.downloadMain(source, target, callback);
    }).err(function(err) {

    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
jdf.download = function(pathItem, targetDir) {
var url = jdf.config[pathItem];
var cacheDir = path.normalize(jdf.cacheDir + '/' + pathItem + '.tar');

console.log('jdf downloading');
jdf.dot.begin();

f.<span class="apidocCodeKeywordSpan">download</span>(url, cacheDir, function(data) {
    if (data == 'ok') {
        f.tar(cacheDir, targetDir, function() {
            console.log('\r\njdf [' + pathItem + '] install done');
            jdf.dot.end(false);
        });
    } else if (data == 'error') {
        jdf.dot.end(false);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.downloadMain" id="apidoc.element.jdf.ftp.downloadMain">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>downloadMain
        <span class="apidocSignatureSpan">(source, target, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">downloadMain = function (source, target, callback) {

    ftp.listMain(source, function(data) {
        if (data != 'error') {
            f.mkdir(target);
            var serverNum = 0,
                localNum = 0;
            data.forEach(function(item) {
                if (item.type == 'file') {
                    serverNum += 1;
                    var sourcePut = source + '/' + item.name;
                    var targetPut = target + '/' + item.name;

                    ftp.get(sourcePut, targetPut, function() {
                        localNum += 1;
                        if (serverNum == localNum) {
                            ftp.client.end();
                            if (callback) callback();
                        }
                    });
                }
            })
        } else {
            if (callback) callback(data);
        };
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @download
* @param {String} source è¿œç«¯æœºå™¨ç›®æ&nbsp;‡æ–‡ä»¶å¤¹/æ–‡ä»¶è·¯å¾„
* @param {String} target æœ¬åœ°æ–‡ä»¶å¤¹/æ–‡ä»¶è·¯å¾„
*/
ftp.download = function(source, target, callback) {

   ftp.tryConnect().done(function() {
       ftp.<span class="apidocCodeKeywordSpan">downloadMain</span>(source, target, callback);
   }).err(function(err) {

   });
}

/**
* @downloadMain
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.get" id="apidoc.element.jdf.ftp.get">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>get
        <span class="apidocSignatureSpan">(source, target, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">get = function (source, target, callback) {
    ftp.client.get(source, function(err, stream) {
        if (err) {
            console.log('jdf error [ftp.get] - ' + target + ' - ' + err);
            if (callback) callback(err);
            ftp.client.end();
        } else {
            stream.once('close', function() {
                // ftp.client.end();
            });
            stream.pipe(fs.createWriteStream(target));
            if (callback) callback();
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            space_colon: false,
            //quote_keys: true, object keysåŠ&nbsp;å¼•å·
            beautify: options.beautify,
            ascii_only: options.ascii_only
        });

        toplevel.print(stream);
        result = stream.<span class="apidocCodeKeywordSpan">get</span>();
    }

    //å¢žåŠ&nbsp;å‰ç¼€banner
    if (!isdebug) {
        result = compress.setPrefixBanner(jdf.config.output.hasBanner, source, result) + result + '\r\n';
    }
} catch (e) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.list" id="apidoc.element.jdf.ftp.list">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>list
        <span class="apidocSignatureSpan">(source, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function (source, callback) {
    if (typeof(source) == 'undefined') {
        var source = './';
    }

    ftp.tryConnect().done(function() {
        ftp.listMain(source, callback);
    }).err(function(err) {

    });


}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

}

/**
 * @get server files list main
 */
ftp.listMain = function(source, callback) {
    ftp.client.<span class="apidocCodeKeywordSpan">list</span>(source, function(err, list) {
        if (err) {
console.log('jdf error [ftp.list] - ' + err);
ftp.client.end();
        } else {

if (list &amp;&amp; list.length &gt; 0) {
    var filesList = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.listMain" id="apidoc.element.jdf.ftp.listMain">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>listMain
        <span class="apidocSignatureSpan">(source, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">listMain = function (source, callback) {
    ftp.client.list(source, function(err, list) {
        if (err) {
            console.log('jdf error [ftp.list] - ' + err);
            ftp.client.end();
        } else {

            if (list &amp;&amp; list.length &gt; 0) {
                var filesList = [];
                list.forEach(function(data) {
                    var fileType = '';
                    if (data.type == '-') {
                        fileType = 'file';
                    } else if (data.type == 'd') {
                        fileType = 'dir';
                    }

                    filesList.push({
                        name: data.name,
                        type: fileType
                    })
                })
                if (callback) callback(filesList);
                //ftp.client.end();
                //console.log("end at 274");
            } else {
                if (callback) {
                    callback('error');
                } else {
                    console.log('jdf warnning : "' + source + '" is not exists');
                };
                //ftp.client.end();
                //console.log("end at 282");
            }

            if (!callback) {
                //ftp.client.end();
                //console.log("end at 287");
            }
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * @downloadMain
 */
ftp.downloadMain = function(source, target, callback) {

ftp.<span class="apidocCodeKeywordSpan">listMain</span>(source, function(data) {
    if (data != 'error') {
        f.mkdir(target);
        var serverNum = 0,
            localNum = 0;
        data.forEach(function(item) {
            if (item.type == 'file') {
                serverNum += 1;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.mkdir" id="apidoc.element.jdf.ftp.mkdir">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>mkdir
        <span class="apidocSignatureSpan">(source, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">mkdir = function (source, callback) {
    if (typeof(source) == 'undefined') {
        console.log('jdf error [ftp.mkdir] source is not exists');
        return;
    }

    ftp.tryConnect().done(function() {
        ftp.client.mkdir(source, false, function(err) {
            if (callback) callback(err);
        });
    }).err(function(err) {

    });

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
				// console.log(unescape(content))
			}
			f.write(file, unescape(content));
		});
		
		//ä¿å­˜åˆå¹¶å®Œæˆçš„cssSpriteå›¾ç‰‡
		var outputDirName = jdf.config.outputDirName + '/' + jdf.getProjectPath() + '/css/i/';
		f.<span class="apidocCodeKeywordSpan">mkdir</span>(outputDirName);
		try{
			if(imagesSuffix == 2){
				outputName = outputName + suffix;
			}
			imagesOutput.save(outputDirName + outputName + outputExtname);
		}catch(e){
			console.log(e);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.put" id="apidoc.element.jdf.ftp.put">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>put
        <span class="apidocSignatureSpan">(source, target, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">put = function (source, target, callback) {
    ftp.client.put(source, target, function(err) {
        if (err) {
            console.log('jdf error [ftp.put] - ' + target + ' - ' + err);
            if (callback) callback(err);
            ftp.client.end();
        } else {
            if (callback) callback();
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
uploadLocalNum += 1;


if (uncover /*&amp;&amp; f.exists(target)*/ ) {
    //uncover
    removedAll = false;
} else {
    ftp.<span class="apidocCodeKeywordSpan">put</span>(source, target, function(err) {
        uploadRemoteNum += 1;
        if (uploadLocalNum == uploadRemoteNum) {
            if (callback){

                callback(err);
            }
            //å…³é—­è¿›ç¨‹
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.tryConnect" id="apidoc.element.jdf.ftp.tryConnect">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>tryConnect
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">tryConnect = function () {
    var _promise = {};
    _promise.done = function(cb) {
        _promise._done = cb;
        return _promise;
    };
    _promise.err = function(cb) {
        _promise._err = function(){
            ftp.client.end();
            cb();
        }
        return _promise;
    };


    if (ftp.client.connected) {
        _promise._done();
    } else {
        ftp.client.on('ready', function(err) {
            _promise._done();
        }).on('error', function(err) {
            try{
                _promise._err(err);
            }catch(e){
                console.log('jdf error [ftp.tryConnect] ftpé…ç½®é”™è¯¯');
            }
        });
        ftp.client.connect(options);

    }
    return _promise;

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @param {Boole} move false ç§»åŠ¨
 * @example ftp.upload('../test','test', null, null, false, false, false, function(){});
 */

ftp.upload = function(source, target, include, exclude, uncover, move, logTag, callback) {
    //æ‰“å¼€è¿›ç¨‹

    ftp.<span class="apidocCodeKeywordSpan">tryConnect</span>().done(function() {
        ftp.uploadMain(source, target, include, exclude, uncover, move, logTag, callback);
    }).err(function(err) {
        console.log('jdf error [ftp.upload] - ' + err);

    });
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.upload" id="apidoc.element.jdf.ftp.upload">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>upload
        <span class="apidocSignatureSpan">(source, target, include, exclude, uncover, move, logTag, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">upload = function (source, target, include, exclude, uncover, move, logTag, callback) {
    //æ‰“å¼€è¿›ç¨‹

    ftp.tryConnect().done(function() {
        ftp.uploadMain(source, target, include, exclude, uncover, move, logTag, callback);
    }).err(function(err) {
        console.log('jdf error [ftp.upload] - ' + err);

    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * @ä¸Šä¼&nbsp;æ–‡ä»¶å¤¹/æ–‡ä»¶
 * @param {String} source åŽŸå§‹æ–‡ä»¶å¤¹/æ–‡ä»¶è·¯å¾„
 * @param {String} target è¿œç«¯æœºå™¨ç›®æ&nbsp;‡æ–‡ä»¶å¤¹/æ–‡ä»¶è·¯å¾„
 * @param {Boole} uncover false
 * @param {Boole} move false ç§»åŠ¨
 * @example ftp.<span class="apidocCodeKeywordSpan">upload</span>('../test','test', null, null, false, false
, false, function(){});
 */

ftp.upload = function(source, target, include, exclude, uncover, move, logTag, callback) {
//æ‰“å¼€è¿›ç¨‹

ftp.tryConnect().done(function() {
    ftp.uploadMain(source, target, include, exclude, uncover, move, logTag, callback);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.ftp.uploadMain" id="apidoc.element.jdf.ftp.uploadMain">
        function <span class="apidocSignatureSpan">jdf.ftp.</span>uploadMain
        <span class="apidocSignatureSpan">(source, target, include, exclude, uncover, move, logTag, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">uploadMain = function (source, target, include, exclude, uncover, move, logTag, callback) {
    var removedAll = true;
    var source = f.realpath(source);
    if (source) {
        var core = function() {
            if (f.isDir(source)) {
                if (!f.isBlankDir(source)) {
                    ftp.client.mkdir(target, false, function() {});
                    fs.readdirSync(source).forEach(function(name) {
                            if (name != '.' &amp;&amp; name != '..' &amp;&amp; !(/.svn/.test(name))) {
                                removedAll = ftp.uploadMain(source + '/' + name, target + '/' + name, include, exclude, uncover,
move, logTag, callback) &amp;&amp; removedAll;
                            }
                        });

                        if (move &amp;&amp; removedAll) {
                            fs.rmdirSync(source);
                        }
                }
            } else if (f.isFile(source) &amp;&amp; f.filter(source, include, exclude)) {
                uploadLocalNum += 1;


                if (uncover /*&amp;&amp; f.exists(target)*/ ) {
                    //uncover
                    removedAll = false;
                } else {
                    ftp.put(source, target, function(err) {
                        uploadRemoteNum += 1;
                        if (uploadLocalNum == uploadRemoteNum) {
                            if (callback){

                                callback(err);
                            }
                            //å…³é—­è¿›ç¨‹
                            ftp.client.end();
                        }

                    });

                    if (move) {
                        fs.unlinkSync(source);
                    }
                }
            } else {
                removedAll = false;
            }
        }
        core();
    } else {
        if (typeof(logTag) != 'undefined' &amp;&amp; !logTag) {
            return;
        }
        console.log('[ ' + source + ' ] --- no such file or dir');
    }
    return removedAll;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @example ftp.upload('../test','test', null, null, false, false, false, function(){});
 */

ftp.upload = function(source, target, include, exclude, uncover, move, logTag, callback) {
    //æ‰“å¼€è¿›ç¨‹

    ftp.tryConnect().done(function() {
        ftp.<span class="apidocCodeKeywordSpan">uploadMain</span>(source, target, include, exclude, uncover, move, logTag, callback
);
    }).err(function(err) {
        console.log('jdf error [ftp.upload] - ' + err);

    });
}

/**
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.ftpUpload" id="apidoc.module.jdf.ftpUpload">module jdf.ftpUpload</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.ftpUpload.init" id="apidoc.element.jdf.ftpUpload.init">
        function <span class="apidocSignatureSpan">jdf.ftpUpload.</span>init
        <span class="apidocSignatureSpan">(argv, hasConfig, haslog, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (argv, hasConfig, haslog, callback){
	var haslog = typeof(haslog) == 'undefined' ? true : haslog;
	var hasConfig = typeof(hasConfig) == 'undefined' ? true : hasConfig;
	var ftp = {};
	var uploadSource = path.normalize(f.currentDir()+'/' + jdf.config.outputDirName);
	var uploadTarget = jdf.config.serverDir;

	//core function
	var ftpFn = function(source, target){
		//jdf u -c ./dist /export/App/xxx 172.xxx
		if(jdf.config.serverType  == "linux" || argv[6]){

			var fileUpload = require('./fileUpload.js');
			var sourceFilse = f.getdirlist(source, null, '.svn|Thumbs.db|.DS_Store' );
			var target = jdf.config.serverDir;
			var host = jdf.config.host;
			if(argv[5]) target = argv[5];
			if(argv[6]) host = argv[6];

			fileUpload(sourceFilse, target, host, argv, function(){
				jdf.dot.end(haslog);
				if(haslog) console.log('jdf upload "'+host+' '+target+ '" success!');
				if(callback) callback();
			});
		}else if(jdf.config.serverType  == "ftp" ){
			//console.log('jdf process: uploading [' + source + '].');
			ftp = require('./ftp.js');
			ftp.upload(source, target, null, null, null, null, null, function(err){
				jdf.dot.end(haslog);
				if(haslog) console.log('jdf upload ['+jdf.config.host +'/'+ target+'] success!');
				if(callback) callback();
			});
		}else{
			console.log('jdf error [jdf.upload] - server host no setup');
		}
	}
	
	//default upload,do "jdf output -html" first
	var outputFnOnce = function(){
		if (typeof(argv[3]) == 'undefined') {
			//argv[3] = '-html';
		}
		jdf.argvInit('output', argv, function(){
			ftpFn(uploadSource, uploadTarget);
		});
	}

	//watch upload
	var outputFnWatch = function(){
		ftp.quit();
		jdf.buildMain('output');
		Output.init({
			//type:'hashtml',
			callback:function(){
				ftpFn(uploadSource, uploadTarget);
			}
		});
	}
	
	if( (argv[3] == '-custom'||argv[3] == '-c') &amp;&amp; argv[4] ){
		//custom upload	
		if ( f.exists(argv[4]) ) {
			var serverdir = argv[5] ? argv[5] : argv[4];
			console.log('jdf uploading');
			jdf.dot.begin();
			ftpFn(argv[4], serverdir);
		} else{
			console.log('jdf warning [jdf.upload] - "'+argv[4]+'" not exists');
		};
	}else{
		if(!hasConfig){
			console.log('jdf error: "config.json" is not exists');
			return;
		}

		if(jdf.config.host == JSON.parse(jdf.config.configJsonFileContent).host){
			console.log('jdf error: config.json "host" is empty');
			return;
		}
	
		//entrance
		if (argv[3] == '-watch') {
			//watch upload
			outputFnOnce();
			Node_watch(f.currentDir(), function(filename) {
				console.log(filename);
				outputFnWatch();
			});
		}else if( (argv[3]=='-preview' || argv[3]=='-p' || argv[4]=='-preview' || argv[4]=='-p') &amp;&amp; jdf.config.previewServerDir ){
			//preview
			if(argv[3] == '-preview' || argv[3] == '-p'){
				argv[3] = jdf.config.buildDirName;
			}
			
			jdf.argvInit('output', argv, function(){
				ftpFn(uploadSource, jdf.config.previewServerDir);
			});
		}else if( argv[3] == '-nc' &amp;&amp; jdf.config.newcdn ){
			//newcdn css/js/widget
			if (typeof(argv[4]) != 'undefined'){
				argv[3] = argv[4];
				delete argv[4];
			}else{
				delete argv[3];
			}

			jdf.config.cdn = jdf.config.newcdn;
			outputFnOnce();
		}else if( argv[3] == '-nh' &amp;&amp; jdf.config.newcdn){
			//newcdn html
			argv[3] = jdf.config.buildDirName;
			//å†…é“¾link srcæ›¿æ¢
			jdf.config.cdnDefalut = jdf.config.cdn;
			jdf.config.cdn = jdf.config.newcdn;
			jdf.argvInit('output', argv, function(){
				ftpFn(uploadSource, jdf.config.previewServerDir);
			});
		}else if(argv[3] == '-list' &amp;&amp; jdf.config.uploadList){
			// æ&nbsp;¹æ®config.jsoné…ç½®ä¸Šä¼&nbsp;
			argv[3] = jdf.config.uploadList;
			jdf.argvInit('output', argv, function(){
				ftpFn(uploadSource, uploadTarget);
			});
		}else {
			//default upload
			outputFnOnce();
		}
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.jdf" id="apidoc.module.jdf.jdf">module jdf.jdf</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.jdf.argvInit" id="apidoc.element.jdf.jdf.argvInit">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>argvInit
        <span class="apidocSignatureSpan">(runType, argv, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">argvInit = function (runType, argv, callback) {
    if (runType == 'build' || runType == 'release') {
        if (runType == 'build' &amp;&amp; typeof(argv[3]) != 'undefined' &amp;&amp; argv[3] == '-css') {
            jdf.buildCss();
        } else {
            var autoOpenurl = false,
                comboDebug = false;
            if (typeof(argv[3]) != 'undefined') {
                if (argv[3] == '-open' || argv[3] == '-o') autoOpenurl = true;
                if (argv[3] == '-combo' || argv[3] == '-c') comboDebug = true;
            }

            jdf.bgMkdir();
            jdf.bgCopyDir();
            jdf.buildMain(runType, argv[3] || argv[4]);

            //plain mode
            if(argv[3] == '-plain' || argv[4] == '-plain'){
                var outputdirName = jdf.config.outputDirName;
                var outputdir = outputdirName+'/'+jdf.getProjectPath();
                f.copy(jdf.bgCurrentDir, outputdir);

                console.log('jdf build plain success!');
            }else{
                console.log("at precess:&lt;&lt;"+process.pid+"&gt;&gt;");

                jdf.server(jdf.bgCurrentDir, autoOpenurl, comboDebug, function(data) {
                    jdf.watch(runType, callback, data);
                });
            }
        }
    } else if (runType == 'output') {
        // jdf.bgMkdir();
        // var _bgdir=jdf.bgCurrentDir+"_"+Math.random();
        // f.renameFile(jdf.bgCurrentDir,_bgdir);
        // console.log(_bgdir);
        // f.delAsync(_bgdir);
        // f.mkdir(jdf.bgCurrentDir);

        jdf.bgMkdir();
        f.del(jdf.bgCurrentDir, function() {
            jdf.bgCopyDir();
            jdf.buildMain(runType);
            //é»˜è®¤
            var outputType = 'default',
                projectPath = null,
                outputList, isbackup = false,
                isdebug = false;

            if (typeof(argv[3]) != 'undefined') {
                var cmd3 = argv[3];
                var cmd4 = argv[4];

                //customè‡ªå®šä¹‰
                outputType = 'custom';
                outputList = cmd3;

                //projectPathè‡ªå®šä¹‰
                if (cmd3 == '-path') {
                    projectPath = cmd4;
                    outputType = 'default';
                }

                //debug(ä¸åŽ‹ç¼©)
                if (cmd3 == '-debug' || cmd4 == '-debug') {
                    isdebug = true;
                    if (!cmd4) outputType = 'default';

                    //æŒ‰é…ç½®é¡¹æ¥è¾“å‡º
                    if (jdf.config.outputCustom) {
                        outputType = 'custom';
                        outputList = jdf.config.outputCustom;
                    }
                }

                //hashtml
                //if (cmd3 == '-html' || cmd4 == '-html'||cmd3 == '-h' || cmd4 == '-h') {
                //    outputType = 'hashtml';
                //    outputList = null;
                //}

                //backup
                if (cmd3 == '-backup' || cmd4 == '-backup') {
                    outputType = 'backup';
                    isbackup = true;
                    if (cmd4 == '-backup') {
                        outputType = 'custom';
                        outputList = cmd3;
                    }
                }

                //prod(produce)é¢„å‘å¸ƒ
                if (cmd3 == '-prod' || cmd4 == '-prod') {
                    outputType = 'prod';
                    if (cmd4 == '-prod') {
                        outputType = 'prod';
                        outputList = cmd3;
                    }
                }

                //pub(publish)æ­£å¼å‘å¸ƒ
                if (cmd3 == '-pub' || cmd4 == '-pub') {
                    outputType = 'pub';
                    if (cmd4 == '-pub') {
                        outputType = 'pub';
                        outputList = cmd3;
                    }
                }

                //r.js
                if(cmd3 == '-rjs' || cmd4 == '-rjs'){
                    outputType = 'default';
                    jdf.config.output.rjs = true;
                }

            } else {
                //æŒ‰é…ç½®é¡¹æ¥è¾“å‡º
                if (jdf.config.outputCustom) { ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...
	}
	
	//default upload,do "jdf output -html" first
	var outputFnOnce = function(){
		if (typeof(argv[3]) == 'undefined') {
			//argv[3] = '-html';
		}
		jdf.<span class="apidocCodeKeywordSpan">argvInit</span>('output', argv, function(){
			ftpFn(uploadSource, uploadTarget);
		});
	}

	//watch upload
	var outputFnWatch = function(){
		ftp.quit();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.bgCopyDir" id="apidoc.element.jdf.jdf.bgCopyDir">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>bgCopyDir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgCopyDir = function () {
    var excludeFiles = $.excludeFiles();

    if(jdf.config.build.excludeFiles){
        excludeFiles += '|' + jdf.config.build.excludeFiles;
    }

    excludeFiles = excludeFiles.replace('||','|')

    if (jdf.config.baseDir != '' || jdf.config.outputCustom) {
        f.copy(jdf.currentDir + '/' + jdf.config.baseDir, jdf.bgCurrentDir + '/' + jdf.config.baseDir, null, excludeFiles);
    }else{
        f.copy(jdf.currentDir + '/' + jdf.config.cssDir, jdf.bgCurrentDir + '/' + jdf.config.cssDir, null, excludeFiles);
        f.copy(jdf.currentDir + '/' + jdf.config.imagesDir, jdf.bgCurrentDir + '/' + jdf.config.imagesDir, null, excludeFiles);
        f.copy(jdf.currentDir + '/' + jdf.config.jsDir, jdf.bgCurrentDir + '/' + jdf.config.jsDir, null, excludeFiles);
        f.copy(jdf.currentDir + '/' + jdf.config.htmlDir, jdf.bgCurrentDir + '/' + jdf.config.htmlDir, null, excludeFiles);
        f.copy(jdf.currentDir + '/' + jdf.config.widgetDir, jdf.bgCurrentDir + '/' + jdf.config.widgetDir, null, excludeFiles);
        f.copy(jdf.currentDir + '/' + jdf.config.configFileName, jdf.bgCurrentDir + '/' + jdf.config.configFileName, null, excludeFiles
);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    comboDebug = false;
if (typeof(argv[3]) != 'undefined') {
    if (argv[3] == '-open' || argv[3] == '-o') autoOpenurl = true;
    if (argv[3] == '-combo' || argv[3] == '-c') comboDebug = true;
}

jdf.bgMkdir();
jdf.<span class="apidocCodeKeywordSpan">bgCopyDir</span>();
jdf.buildMain(runType, argv[3] || argv[4]);

//plain mode
if(argv[3] == '-plain' || argv[4] == '-plain'){
    var outputdirName = jdf.config.outputDirName;
    var outputdir = outputdirName+'/'+jdf.getProjectPath();
    f.copy(jdf.bgCurrentDir, outputdir);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.bgMkdir" id="apidoc.element.jdf.jdf.bgMkdir">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>bgMkdir
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">bgMkdir = function () {
    var list = ['LOCALAPPDATA', 'HOME', 'APPDATA'];
    var temp;
    for (var i = 0, len = list.length; i &lt; len; i++) {
        if (temp = process.env[list[i]]) {
            break;
        }
    }
    if (temp) {
        temp = temp || __dirname + '/../';
        temp += '/.jdf-temp/';
        temp = path.normalize(temp);
        f.mkdir(temp);

        //åˆ›å»ºæ–‡ä»¶å¤¹
        var creatDir = function(filename) {
            var dir = path.normalize(temp + '/' + filename + '/');
            f.mkdir(dir);
            jdf[filename + 'Dir'] = dir;
        };

        //é¡¹ç›®ç¼“å­˜æ–‡ä»¶å¤¹
        creatDir('cache');
        //é¡¹ç›®tempæ–‡ä»¶å¤¹
        creatDir('temp');
        //é¡¹ç›®libæ–‡ä»¶å¤¹
        //todo:è‡ªåŠ¨ä»ŽæœåŠ¡å™¨ä¸‹è½½æœ€æ–°ç‰ˆçš„jdjå’Œjdm,çŽ°åœ¨æ˜¯éœ€è¦installæ‰‹åŠ¨ä¸‹è½½
        creatDir('lib');
        //creatDir('jdj');
        //creatDir('jdm');

        creatDir('backup');

        //å¤åˆ¶å½“å‰é¡¹ç›®è‡³tempæ–‡ä»¶å¤¹(é™¤outputdir)
        //å–å¾—å½“å‰å·¥ç¨‹å
        var currentDirName = path.basename(jdf.currentDir);
        jdf.bgCurrentDir = path.normalize(jdf.tempDir + '/' + currentDirName);

        jdf.bgCurrentDirName = currentDirName;
        f.mkdir(jdf.bgCurrentDir);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var autoOpenurl = false,
    comboDebug = false;
if (typeof(argv[3]) != 'undefined') {
    if (argv[3] == '-open' || argv[3] == '-o') autoOpenurl = true;
    if (argv[3] == '-combo' || argv[3] == '-c') comboDebug = true;
}

jdf.<span class="apidocCodeKeywordSpan">bgMkdir</span>();
jdf.bgCopyDir();
jdf.buildMain(runType, argv[3] || argv[4]);

//plain mode
if(argv[3] == '-plain' || argv[4] == '-plain'){
    var outputdirName = jdf.config.outputDirName;
    var outputdir = outputdirName+'/'+jdf.getProjectPath();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.buildCss" id="apidoc.element.jdf.jdf.buildCss">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>buildCss
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildCss = function () {
    var BuildCss = require("./buildCss.js");
    var Node_watch = require('node-watch');

    console.log('jdf buildCss ...');
    var currentDir = jdf.currentDir;
    BuildCss.init(currentDir, currentDir);

    var regStr = '\\.(less|sass|scss)$';
    var reg = new RegExp(regStr);

    Node_watch(currentDir, function(filename) {
        if (f.isFile(filename)) {
            if (!reg.test(filename)) return;
        }

        console.log(filename.replace(currentDir, ''));
        BuildCss.init(currentDir, currentDir);
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

/**
 * @è¾“å…¥å‘½ä»¤çš„åˆå§‹åŒ– build, release, output
 */
jdf.argvInit = function(runType, argv, callback) {
if (runType == 'build' || runType == 'release') {
    if (runType == 'build' &amp;&amp; typeof(argv[3]) != 'undefined' &amp;&amp; argv[3] == '-css'
;) {
        jdf.<span class="apidocCodeKeywordSpan">buildCss</span>();
    } else {
        var autoOpenurl = false,
            comboDebug = false;
        if (typeof(argv[3]) != 'undefined') {
            if (argv[3] == '-open' || argv[3] == '-o') autoOpenurl = true;
            if (argv[3] == '-combo' || argv[3] == '-c') comboDebug = true;
        }
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.buildMain" id="apidoc.element.jdf.jdf.buildMain">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>buildMain
        <span class="apidocSignatureSpan">(type, param)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">buildMain = function (type, param) {
    if(jdf.config.build.hasCmdLog) console.log('jdf build ...');
    //console.log('['+$.getTime(':', false)+'] build ...');

    //build css
    if(jdf.config.build.hasCmdLog) console.log('jdf build css ...');

    var BuildCss = require("./buildCss.js");
    if(jdf.config.outputCustom){
        var list = jdf.config.outputCustom;
        var listArray = list.split(',');
        for (var i=0; i&lt;listArray.length; i++ ){
            var item = listArray[i];
            if ( f.exists(item) ) {
                BuildCss.init(item, jdf.bgCurrentDir + '/' + item);
            }
        }
    }else{
        BuildCss.init(jdf.config.cssDir, jdf.bgCurrentDir + '/' + jdf.config.cssDir);
        BuildCss.init(jdf.config.widgetDir, jdf.bgCurrentDir + '/' + jdf.config.widgetDir);
    }

    //build es6 js
    if(jdf.config.build.isEs6){
        if(jdf.config.build.hasCmdLog) console.log('jdf build js ...');

        if(jdf.config.build.es6Entry){
            //config.json
            // "build":{
            //     "isEs6": true,
            //     "es6Entry": {
            //         "index": ["./js/index.js"],
            //         "list": ["./js/list.js"]
            //     }
            // }

            // //unify entrance
            // var dist = type == "output"
            //     ? jdf.currentDir+ '/'+jdf.config.outputDirName+'/'+jdf.getProjectPath() + '/' + jdf.config.jsDir
            //     : jdf.bgCurrentDir + '/' + jdf.config.jsDir ;

            // // use webpack &amp;&amp; babel build es6
            // var BuildByWebpack = require('./buildByWebpack.js');
            // BuildByWebpack.init(
            //     jdf.currentDir + '/' ,
            //     jdf.config.build.es6Entry,
            //     dist,
            //     type == "output"
            // );
        }else{
            var BuildJs = require('./BuildJs.js');

            if(jdf.config.outputCustom) {
                var list = jdf.config.outputCustom;
                var listArray = list.split(',');
                for (var i=0; i&lt;listArray.length; i++ ){
                    var item = listArray[i];
                    if ( f.exists(item) ) {
                        BuildJs.init(item, jdf.bgCurrentDir);
                    }
                }
            }else{
                BuildJs.init(jdf.config.jsDir, jdf.bgCurrentDir);
                BuildJs.init(jdf.config.widgetDir, jdf.bgCurrentDir);
            }
        }
    }

    //build html (todo jdf.config.outputCustom)
    var buildHtmlDir = '/' + jdf.config.buildDirName + '/';
    var buildHtmlDirFull = jdf.currentDir + buildHtmlDir;
    if (f.exists(buildHtmlDirFull)) {
        var BuildWidget = require("./buildWidget.js");
        if(jdf.config.build.hasCmdLog) console.log('jdf build html...');
        var encoding = jdf.config.output.encoding;
        var basedirlist = f.getdirlist(buildHtmlDirFull, '.html$');
        basedirlist.forEach(function(source) {
            var target = path.normalize(jdf.bgCurrentDir + buildHtmlDir + source.replace(buildHtmlDirFull, ''));
            BuildWidget.init(source, f.read(source), type, function(data) {
                if(f.excludeFiles(target)){
                    f.write(target, data.tpl, encoding);
                }
                return 'ok';
            }, param);
            //require('./buildByNunjucks').init(source);
        });
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			ftpFn(uploadSource, uploadTarget);
		});
	}

	//watch upload
	var outputFnWatch = function(){
		ftp.quit();
		jdf.<span class="apidocCodeKeywordSpan">buildMain</span>('output');
		Output.init({
			//type:'hashtml',
			callback:function(){
				ftpFn(uploadSource, uploadTarget);
			}
		});
	}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.checkProjectDir" id="apidoc.element.jdf.jdf.checkProjectDir">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>checkProjectDir
        <span class="apidocSignatureSpan">(filename)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">checkProjectDir = function (filename) {
    var dirname = filename.replace(jdf.currentDir, '');
    dirname = dirname.replace(/\\/, '');
    if (/^\//.test(dirname)) dirname = dirname.replace(/\//, '');

    var checkTag = false;
    var checkProjectDir = function(i, j) {
        var reg = new RegExp('^' + i);
        if (reg.test(j)) {
            return true;
        } else {
            return false;
        }
    }

    if (checkProjectDir(jdf.config.baseDir, dirname) || checkProjectDir(jdf.config.htmlDir, dirname) || checkProjectDir(jdf.config
.widgetDir, dirname) || checkProjectDir(jdf.config.configFileName, dirname)) {
        checkTag = true;
    }
    return checkTag;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    Node_watch(jdf.currentDir, function(filename) {
//æ–‡ä»¶è¿‡æ»¤
if (f.isFile(filename)) {
    if (!reg.test(filename)) return;
}

var target = jdf.bgCurrentDir + filename.replace(jdf.currentDir, '');
if (jdf.<span class="apidocCodeKeywordSpan">checkProjectDir</span>(filename)) {
    if (f.exists(filename)) {
        f.copy(filename, target, regStr);
        //build
        jdf.buildMain(type);
        //livereload
        if (jdf.config.build.livereload) Livereload.reloadBrowser([target]);
        if (callback) callback(filename);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.clean" id="apidoc.element.jdf.jdf.clean">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>clean
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">clean = function () {
    jdf.bgMkdir();
    f.del(jdf.tempDir, function() {
        console.log('jdf cache dir clean done');
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            Log.send('file format');
            var FileFormat = require('./fileFormat');
            FileFormat.init(filename);

            //clean
        } else if (cmd2 === 'clean') {
            Log.send('clean');
            jdf.<span class="apidocCodeKeywordSpan">clean</span>();

            //todo: beautiful/jsbin/
        } else {
            console.log('jdf error [jdf.init] invalid option: ' + cmd2 + ' \rType "jdf -h" for usage.&amp;#
x27;);
        }
    });
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.createStandardDir" id="apidoc.element.jdf.jdf.createStandardDir">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>createStandardDir
        <span class="apidocSignatureSpan">(dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">createStandardDir = function (dir) {
    var dirArray = [];
    dirArray[0] = jdf.config.baseDir;
    dirArray[1] = jdf.config.cssDir;
    dirArray[2] = jdf.config.imagesDir;
    dirArray[3] = jdf.config.jsDir;
    dirArray[4] = jdf.config.htmlDir;
    dirArray[5] = jdf.config.widgetDir;

    if(dir){
        dir += '/';
    }else{
        dir = 'jdf_init/';
    }

    for (var i = 0; i &lt; dirArray.length; i++) {
        f.mkdir(dir+dirArray[i]);
    }

    var fileArray = [];
    fileArray[0] = jdf.config.configFileName;
    fileArray[1] = jdf.config.htmlDir + '/index.html';

    var templateDir = path.resolve(__dirname, '../template/');

    for (var i = 0; i &lt; fileArray.length; i++) {
        if (!f.exists(fileArray[i])) f.write(dir+'/'+fileArray[i], f.read(templateDir + '/' + fileArray[i]));
    }
    console.log('jdf project directory "'+dir.replace('/','')+'" init done!');
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    console.log('jdf downloading');
    jdf.download('jdj', jdf.libDir);
    jdf.download('jdm', jdf.libDir);
    */
    if (type == 'demo') {
        jdf.download('demo', jdf.currentDir, dir);
    } else if (type == 'init') {
        jdf.<span class="apidocCodeKeywordSpan">createStandardDir</span>(dir);
    }
}

/**
* @getIp
*/
jdf.getIp = function(){
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.download" id="apidoc.element.jdf.jdf.download">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>download
        <span class="apidocSignatureSpan">(pathItem, targetDir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">download = function (pathItem, targetDir) {
    var url = jdf.config[pathItem];
    var cacheDir = path.normalize(jdf.cacheDir + '/' + pathItem + '.tar');

    console.log('jdf downloading');
    jdf.dot.begin();

    f.download(url, cacheDir, function(data) {
        if (data == 'ok') {
            f.tar(cacheDir, targetDir, function() {
                console.log('\r\njdf [' + pathItem + '] install done');
                jdf.dot.end(false);
            });
        } else if (data == 'error') {
            jdf.dot.end(false);
        }
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
jdf.download = function(pathItem, targetDir) {
var url = jdf.config[pathItem];
var cacheDir = path.normalize(jdf.cacheDir + '/' + pathItem + '.tar');

console.log('jdf downloading');
jdf.dot.begin();

f.<span class="apidocCodeKeywordSpan">download</span>(url, cacheDir, function(data) {
    if (data == 'ok') {
        f.tar(cacheDir, targetDir, function() {
            console.log('\r\njdf [' + pathItem + '] install done');
            jdf.dot.end(false);
        });
    } else if (data == 'error') {
        jdf.dot.end(false);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.getConfig" id="apidoc.element.jdf.jdf.getConfig">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>getConfig
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getConfig = function (callback) {
    var res = null;
    var url = f.currentDir() + '/' + jdf.config.configFileName;
    if (f.exists(url)) {
        try {
            var data = f.read(url);
            if (data) {
                data = JSON.parse(data);
                if (typeof(data) == 'object') {
                    data = $.merageObj(jdf.config, data);
                }
                //console.log(data);
                res = data;
            }
            if (callback) callback(res);
        } catch (e) {
            console.log('jdf error [jdf.getConfig] - config.json format error');
            console.log(e);
            if (callback) callback(res);
        }
    } else {
        if (callback) callback(res);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @commander
 */
jdf.init = function(argv) {
    //è®¾ç½®å…¨å±€æ—¶é—´æˆ³
    jdf.config.suffix = $.getTimestamp();

    //è¯»å–é…ç½®æ–‡ä»¶
    jdf.<span class="apidocCodeKeywordSpan">getConfig</span>(function(configData) {
var cmd2 = argv[2];
jdf.currentDir = f.currentDir();
jdf.config.argv=argv;

if (argv.length &lt; 3 || cmd2 === '-h' || cmd2 === '--help') {
    Log.send('help');
    jdf.help();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.getIp" id="apidoc.element.jdf.jdf.getIp">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>getIp
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getIp = function (){
    var net = require('os').networkInterfaces();
    for(var key in net){
        if(net.hasOwnProperty(key)){
            var items = net[key];
            if(items &amp;&amp; items.length){
                for(var i = 0; i &lt; items.length; i++){
                    var ip = String(items[i].address).trim();
                    if(ip &amp;&amp; /^\d+(?:\.\d+){3}$/.test(ip) &amp;&amp; ip !== '127.0.0.1'){
                        return ip;
                    }
                }
            }
        }
    }
    return '127.0.0.1';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        homepage = '';
    }
    require("./openurl.js").open('http://localhost:' + localServerPort);
}
console.log('jdf server : running at '+ localServerPort);
console.log(Colors.gray('----------------------------------------'));
console.log('   Local: '+Colors.magenta('http://localhost:' + localServerPort + '/'));
var externalIp = 'http://'+jdf.<span class="apidocCodeKeywordSpan">getIp</span>()+':' + localServerPort + &amp;#
x27;/';
console.log('External: '+Colors.magenta(externalIp));
console.log(Colors.gray('----------------------------------------'));

if(jdf.config.build.qrcode != false){
    require("qrcode-terminal").generate(externalIp, { small: false }, function(qrcode){
        console.log(Colors.gray(qrcode));
        console.log(Colors.gray('----------------------------------------'));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.getLocalServerPort" id="apidoc.element.jdf.jdf.getLocalServerPort">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>getLocalServerPort
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getLocalServerPort = function (callback){
    var localServerPort = jdf.config.localServerPort;
    jdf.scan('localhost', localServerPort, localServerPort, function(result) {
        if(result.length){
            jdf.scan('localhost', 3000, 3050, function(result) {
                var r = result.length == 0 ? 3000 : $.arrayMax(result) + 1;
                callback(r);
            });
        }else{
            callback(localServerPort);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
* @param {Boolse}  comboDebug è”è°ƒ/çº¿ä¸Šè°ƒè¯•æ¨¡å¼
*/
jdf.server = function(currentDir, autoOpenurl, comboDebug, callback) {
var Server = require('./server.js');
// var FindPort = require('./findPort');
var Colors = require('colors');

jdf.<span class="apidocCodeKeywordSpan">getLocalServerPort</span>(function(localServerPort){
    if(jdf.config.build.hasBrowserSync){
        //use "browser-sync" server
        //doc https://browsersync.io/docs/options
        var bs = require("browser-sync").create();
        bs.watch("*.html").on("change", bs.reload);
        bs.watch("*.js").on("change", bs.reload);
        bs.watch("*.css").on("change", bs.reload);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.getProjectPath" id="apidoc.element.jdf.jdf.getProjectPath">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>getProjectPath
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getProjectPath = function () {
    var currentDir = f.currentDir(),
        result = '';
    if (jdf.config.projectPath != null) {
        result = jdf.config.projectPath;
    } else {
        result = path.basename(f.currentDir());
    }
    return result;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			var outputCss = '/' + jdf.config.cssDir+'/'+pkgName+'.css';
			var outputJs = '/' + jdf.config.jsDir+'/'+pkgName+'.js';

			var cssOutputDir = '/' + jdf.config.cssDir.replace(jdf.config.baseDir+'/', '') +'/';
			var jsOutputDir = '/' + jdf.config.jsDir.replace(jdf.config.baseDir+'/', '') +'/';
			if (isOutput) {
				if(jdf.config.cdn){
					outputCss = '/' +  jdf.<span class="apidocCodeKeywordSpan">getProjectPath</span>() + cssOutputDir+pkgName+'.
css';
					outputCss = $.replaceSlash(outputCss);
					outputCss = jdf.config.cdn + outputCss;

					outputJs = '/' + jdf.getProjectPath() + jsOutputDir+pkgName+'.js';
					outputJs = $.replaceSlash(outputJs);
					outputJs = jdf.config.cdn + outputJs;
				}else{
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.help" id="apidoc.element.jdf.jdf.help">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>help
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">help = function () {
    var content = [];
    content = content.concat([
        '',
        '  Usage: jdf &lt;Command&gt;',
        '',
        '  Command:',
        '',
        '    install      install init dir, demo',
        //'  init         project directory init',
        '    build        build project',
        '      -open      auto open html/index.html',
        '      -combo     combo debug for online/RD debug',
        //'      -css       compile less/scss file in current dir',
        // '      -plain     output project with plain',
        // '',
        //'    release      release project',
        '',
        '    output       output css/js/widget',
        '      dirname    output your own custom dirname',
        //'      -html      output css/js/widget/html',
        '      -debug     output uncompressed js,css,images for test',
        //'      -rjs      output project based requirejs',
        //'      -backup    backup outputdir to tags dir',
        //'      -path [p]  replace projectPath to specified path option',
        '',
        '    upload       upload css/js/widget dir to "serverDir"',
        '      dirname    upload output your own custom dirname',
        //'      -html      upload css/js/widget/html dir to "serverDir"',
        '      -debug     upload uncompressed js,css,images for test',
        '      -custom    upload a dir/file to server',
        // '      -preview   upload html dir to remote "previewServerDir"',
        //'      -nc        upload css/js dir to preview server dir use newcdn url',
        //'      -nh        upload html dir to preview server dir use newcdn url',
        //'      -list      upload file list from config.json to server',
        '',
        '    widget',
        '      -all       preview all widget',
        '      -list      get widget list from server',
        '      -preview xxx  preview a widget',
        '      -install xxx  install a widget to local',
        '      -publish xxx  publish a widget to server',
        '      -create xxx   create a widget to local',
        //'    -w    watch upload output files to remote sever',
        '',
        '    server       debug for online/RD debug',
        '    lint         file lint',
        '    format       file formater',
        ' ',
        '  Extra commands:',
        '',
        '    compress     compress js/css (jdf compress input output)',
        '    clean        clean cache folder',
        '    -h           get help information',
        '    -v           get the version number',
        ''
    ]);
    console.log(content.join('\n'));
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    jdf.getConfig(function(configData) {
var cmd2 = argv[2];
jdf.currentDir = f.currentDir();
jdf.config.argv=argv;

if (argv.length &lt; 3 || cmd2 === '-h' || cmd2 === '--help') {
    Log.send('help');
    jdf.<span class="apidocCodeKeywordSpan">help</span>();

} else if (cmd2 === '-v' || cmd2 === '--version') {
    Log.send('version');
    jdf.version();

} else if (cmd2[0] === '-') {
    Log.send('help');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.init" id="apidoc.element.jdf.jdf.init">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>init
        <span class="apidocSignatureSpan">(argv)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (argv) {
    //è®¾ç½®å…¨å±€æ—¶é—´æˆ³
    jdf.config.suffix = $.getTimestamp();

    //è¯»å–é…ç½®æ–‡ä»¶
    jdf.getConfig(function(configData) {
        var cmd2 = argv[2];
        jdf.currentDir = f.currentDir();
        jdf.config.argv=argv;

        if (argv.length &lt; 3 || cmd2 === '-h' || cmd2 === '--help') {
            Log.send('help');
            jdf.help();

        } else if (cmd2 === '-v' || cmd2 === '--version') {
            Log.send('version');
            jdf.version();

        } else if (cmd2[0] === '-') {
            Log.send('help');
            jdf.help();

        } else if (cmd2 === 'b' || cmd2 === 'build') {
            Log.send('build');
            jdf.argvInit('build', argv);

        } else if (cmd2 === 'r' || cmd2 === 'release') {
            Log.send('release');
            jdf.argvInit('release', argv);

        } else if (cmd2 === 'o' || cmd2 === 'output') {
            Log.send('output');
            jdf.argvInit('output', argv);

        } else if (cmd2 === 'u' || cmd2 === 'upload') {
            var FtpUpload = require('./ftpUpload');
            Log.send('upload');
            FtpUpload.init(argv, configData);

        } else if (cmd2 === 'i' || cmd2 === 'install') {
            switch (argv[3]) {
                case 'demo':
                    Log.send('install-demo');
                    jdf.install('demo', argv[4]);
                    return;
                case 'init':
                    Log.send('install-init');
                    jdf.install('init', argv[4]);
                    return;
                default:
                    console.log('You can "jdf install demo or "jdf install init"');
            }

        } else if (cmd2 === 'c' || cmd2 === 'compress') {
            var Compress = require('./compress.js');
            Log.send('compress');
            Compress.dir(argv[3], argv[4]);

            //widget
        } else if (cmd2 === 'w' || cmd2 === 'widget') {
            var Widget = require("./widget.js");

            var cmd3 = argv[3],
                cmd4 = argv[4],
                cmd5 = argv[5];
            var force = cmd5 != 'undefined' &amp;&amp; cmd5 == '-force' ? true : false

            if (cmd3 == '-all' || cmd3 == '-a') {
                Log.send('widget-all');
                Widget.all(cmd4);
            }

            if (cmd3 == '-list' || cmd3 == '-l') {
                Log.send('widget-list');
                Widget.list(cmd4);
            }

            var hasCmd4 = function() {
                if (cmd4) {
                    return true;
                } else {
                    console.log('jdf tips [jdf.init] Please input widget name');
                    return false;
                }
            }

            var widgetCmd = function() {
                var content = [];
                content = content.concat([
                    '',
                    '  Command:',
                    '',
                    '    widget',
                    '      -all     preview all widget',
                    '      -list    get widget list from server',
                    '      -preview xxx     preview a widget',
                    '      -install xxx     install a widget to local',
                    '      -publish xxx     publish a widget to server',
                    '      -create  xxx     create a widget to local',
                    ''
                ]);
                console.log(content.join('\n'));
            }

            if (cmd3) {
                if (cmd3 == '-preview' || cmd3 == '-pre' &amp;&amp; hasCmd4()) {
                    Log.send('widget-preview');
                    Widget.preview(cmd4);

                } else if (cmd3 == '-install' || cmd3 == '-i' &amp;&amp; hasCmd4()) {
                    Log.send('widget-install');
                    Widget.install(cmd4, force);

                } else if (cmd3 == '-publish' || cmd3 == '-p' &amp;&amp; hasCmd4()) {
                    Log.send('widget-publish');
                    Widget.publish(cmd4, force);

                } else if ((cmd3 == '-create' || cmd3 == '-c') &amp;&amp; hasCmd4()) {
                    Lo ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.install" id="apidoc.element.jdf.jdf.install">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>install
        <span class="apidocSignatureSpan">(type, dir)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">install = function (type, dir) {
    jdf.bgMkdir();

<span class="apidocCodeCommentSpan">    /**
    widgetæ¨¡å—å®‰è£…èµ°jdf widget -install widget/header
    console.log('jdf downloading');
    jdf.download('jdj', jdf.libDir);
    jdf.download('jdm', jdf.libDir);
    */
</span>    if (type == 'demo') {
        jdf.download('demo', jdf.currentDir, dir);
    } else if (type == 'init') {
        jdf.createStandardDir(dir);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    Log.send('upload');
    FtpUpload.init(argv, configData);

} else if (cmd2 === 'i' || cmd2 === 'install') {
    switch (argv[3]) {
        case 'demo':
            Log.send('install-demo');
            jdf.<span class="apidocCodeKeywordSpan">install</span>('demo', argv[4]);
            return;
        case 'init':
            Log.send('install-init');
            jdf.install('init', argv[4]);
            return;
        default:
            console.log('You can "jdf install demo or "jdf install init"');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.scan" id="apidoc.element.jdf.jdf.scan">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>scan
        <span class="apidocSignatureSpan">(host, start, end, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">scan = function (host, start, end, callback) {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;var net = require('net');
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;var count = end - start;
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;var result = [];

Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;for (var i = start; i &lt;= end; i++) {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;var item = net.connect({
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;host: host,
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;port: i
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;},
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;function(i) {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;return function() {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;result.push(i);
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;this.destroy();
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;};
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;}(i)
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;);
Â&nbsp;
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;item.on('error', function(err) {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;if (err.errno == 'ECONNREFUSED') {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;this.destroy();
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;}
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;});
Â&nbsp;
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;item.on('close', function() {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;if (!count--) {
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;callback(result);
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;}
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;});
Â&nbsp;Â&nbsp;Â&nbsp;Â&nbsp;}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
}

/**
 * @å–localServerPort
 */
jdf.getLocalServerPort = function(callback){
var localServerPort = jdf.config.localServerPort;
jdf.<span class="apidocCodeKeywordSpan">scan</span>('localhost', localServerPort, localServerPort, function(result) {
    if(result.length){
        jdf.scan('localhost', 3000, 3050, function(result) {
            var r = result.length == 0 ? 3000 : $.arrayMax(result) + 1;
            callback(r);
        });
    }else{
        callback(localServerPort);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.server" id="apidoc.element.jdf.jdf.server">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>server
        <span class="apidocSignatureSpan">(currentDir, autoOpenurl, comboDebug, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">server = function (currentDir, autoOpenurl, comboDebug, callback) {
    var Server = require('./server.js');
    // var FindPort = require('./findPort');
    var Colors = require('colors');

    jdf.getLocalServerPort(function(localServerPort){
        if(jdf.config.build.hasBrowserSync){
            //use "browser-sync" server
            //doc https://browsersync.io/docs/options
            var bs = require("browser-sync").create();
            bs.watch("*.html").on("change", bs.reload);
            bs.watch("*.js").on("change", bs.reload);
            bs.watch("*.css").on("change", bs.reload);
            bs.init({
                server: currentDir,
                port: localServerPort,
                ui: {
                    // port: 3001, //81 error
                    weinre: {
                        // port: 8080
                    }
                }
            });
            if (callback) callback(1);
        }else{
            var Compress = require('./compress.js');
            Server.init( currentDir, localServerPort, jdf.config.cdn, jdf.getProjectPath(), comboDebug, Compress.addJsDepends);

            if (typeof(autoOpenurl) != 'undefined' &amp;&amp; autoOpenurl) {
                var homepage = '/' + jdf.config.htmlDir + '/index.html';
                if (!f.exists(jdf.currentDir + homepage)) {
                    homepage = '';
                }
                require("./openurl.js").open('http://localhost:' + localServerPort);
            }
            console.log('jdf server : running at '+ localServerPort);
            console.log(Colors.gray('----------------------------------------'));
            console.log('   Local: '+Colors.magenta('http://localhost:' + localServerPort + '/'));
            var externalIp = 'http://'+jdf.getIp()+':' + localServerPort + '/';
            console.log('External: '+Colors.magenta(externalIp));
            console.log(Colors.gray('----------------------------------------'));

            if(jdf.config.build.qrcode != false){
                require("qrcode-terminal").generate(externalIp, { small: false }, function(qrcode){
                    console.log(Colors.gray(qrcode));
                    console.log(Colors.gray('----------------------------------------'));
                });
            }

            console.log('Current files from: '+jdf.currentDir);
            console.log('Serving files from: '+currentDir);
            if (callback) callback(1);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    //extra commands
    //server
} else if (cmd2 === 'server') {
    Log.send('server');
    if (argv[3]) {
        jdf.config.localServerPort = argv[3];
    };
    jdf.<span class="apidocCodeKeywordSpan">server</span>(f.currentDir())

    //file lint
} else if (cmd2 === 'lint' || cmd2 === 'l') {
    var cmd3 = argv[3];
    var filename = (typeof(cmd3) == 'undefined') ? f.currentDir() : cmd3;
    Log.send('file lint');
    var FileLint = require('./fileLint');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.version" id="apidoc.element.jdf.jdf.version">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>version
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">version = function () {
    var notifier = updateNotifier({
        pkg,
        updateCheckInterval: 0
    });

    // console.log(notifier);

    notifier.notify();

    if (notifier.update) {
        console.log(notifier.update);
    } else {
        console.log(pkg.version);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

if (argv.length &lt; 3 || cmd2 === '-h' || cmd2 === '--help') {
    Log.send('help');
    jdf.help();

} else if (cmd2 === '-v' || cmd2 === '--version') {
    Log.send('version');
    jdf.<span class="apidocCodeKeywordSpan">version</span>();

} else if (cmd2[0] === '-') {
    Log.send('help');
    jdf.help();

} else if (cmd2 === 'b' || cmd2 === 'build') {
    Log.send('build');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.jdf.watch" id="apidoc.element.jdf.jdf.watch">
        function <span class="apidocSignatureSpan">jdf.jdf.</span>watch
        <span class="apidocSignatureSpan">(type, callback, data)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">watch = function (type, callback, data) {
    var Node_watch = require('node-watch');
    var Livereload = require('./livereloadServer');

    if (!data) {
        //å¦‚æžœæœ‰å¦å¤–ä¸€ä¸ªè¿›ç¨‹é‚£ä¹ˆlivereloadä¼šç›´æŽ¥å…³é—­
        jdf.config.build.livereload = false;
        //console.log("another jdf process running , jdf livereload closed");
    }

    //livereload
    if (jdf.config.build.livereload) Livereload.init();

    var regStr = '\\.(vm|tpl|shtml|html|smarty|js|css|less|sass|scss|json|babel|' + $.imageFileType() + ')$';
    var reg = new RegExp(regStr);

    //todoåˆå§‹åŒ–æ—¶å‰åŽå°æ–‡ä»¶å¤¹åŒæ­¥
    Node_watch(jdf.currentDir, function(filename) {
        //æ–‡ä»¶è¿‡æ»¤
        if (f.isFile(filename)) {
            if (!reg.test(filename)) return;
        }

        var target = jdf.bgCurrentDir + filename.replace(jdf.currentDir, '');
        if (jdf.checkProjectDir(filename)) {
            if (f.exists(filename)) {
                f.copy(filename, target, regStr);
                //build
                jdf.buildMain(type);
                //livereload
                if (jdf.config.build.livereload) Livereload.reloadBrowser([target]);
                if (callback) callback(filename);
            } else {
                f.del(target, function() {
                    if (callback) callback(filename);
                });
            }
        }
    });

    if (callback) callback();
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            f.copy(jdf.bgCurrentDir, outputdir);

            console.log('jdf build plain success!');
        }else{
            console.log("at precess:&lt;&lt;"+process.pid+"&gt;&gt;");

            jdf.server(jdf.bgCurrentDir, autoOpenurl, comboDebug, function(data) {
                jdf.<span class="apidocCodeKeywordSpan">watch</span>(runType, callback, data);
            });
        }
    }
} else if (runType == 'output') {
    // jdf.bgMkdir();
    // var _bgdir=jdf.bgCurrentDir+"_"+Math.random();
    // f.renameFile(jdf.bgCurrentDir,_bgdir);
...</pre></li>
    </ul>






</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.livereloadServer" id="apidoc.module.jdf.livereloadServer">module jdf.livereloadServer</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.livereloadServer.init" id="apidoc.element.jdf.livereloadServer.init">
        function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>init
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (options) {
	var key, opts, value;
	if ( typeof(options) == 'undefined' ) {
		var options = {};
	}
	opts = {
		apiVersion: '1.6',
		//host: '0.0.0.0',
		port: '35729'// ä¸èƒ½å˜
	};

	for (key in opts) {
		value = opts[key];
		if (options[key]) {
			opts[key] = options[value];
		}
	}

	this.conns = [];
	this.web = null;
	this.options = opts;

	console.log("LiveReload is waiting for a browser to connect");
	var connectTag = true;
	this.start(function(){
		if (connectTag) {
			console.log('Browser connected LiveReload');
		}
		connectTag = false;
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.livereloadServer.reloadBrowser" id="apidoc.element.jdf.livereloadServer.reloadBrowser">
        function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>reloadBrowser
        <span class="apidocSignatureSpan">(paths)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">reloadBrowser = function (paths) {
	var conn, data, _i, _len, _results;
	if (paths == null) {
		paths = [];
	}
	//console.log("Reloading browser: " + (paths.join(' ')));
	_results = [];
	for (_i = 0, _len = paths.length; _i &lt; _len; _i++) {
		path = paths[_i];
		data = {
			command: 'reload',
			path: path,
			liveCSS: true,
			liveImg: true
		};
		_results.push((function() {
			var _j, _len1, _ref, _results1;
			_ref = this.conns;
			_results1 = [];
			for (_j = 0, _len1 = _ref.length; _j &lt; _len1; _j++) {
				conn = _ref[_j];
				_results1.push(conn.send(JSON.stringify(data)));
			}
			return _results1;
		}).call(this));
	}
	return _results;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var target = jdf.bgCurrentDir + filename.replace(jdf.currentDir, '');
if (jdf.checkProjectDir(filename)) {
    if (f.exists(filename)) {
        f.copy(filename, target, regStr);
        //build
        jdf.buildMain(type);
        //livereload
        if (jdf.config.build.livereload) Livereload.<span class="apidocCodeKeywordSpan">reloadBrowser</span>([target]);
        if (callback) callback(filename);
    } else {
        f.del(target, function() {
            if (callback) callback(filename);
        });
    }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.livereloadServer.start" id="apidoc.element.jdf.livereloadServer.start">
        function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>start
        <span class="apidocSignatureSpan">(callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">start = function (callback) {
	var conns, web, wss;
	//console.log("LiveReload " + this.options.apiVersion + " is waiting for a browser to connect.");
	conns = this.conns;

	web = http.createServer(function(request, response) {
		var body, exists, existsFuc, file, query, read;
		query = url.parse(request.url, true);
		existsFuc = fs.existsSync ? fs.existsSync: path.existsSync;
		file = "" + livereloadPath + query.pathname;
		exists = existsFuc(file);
		if (exists &amp;&amp; query.pathname !== '/') {
			response.writeHead(200, {
				'Transfer-Encoding': 'chunked',
				'Content-Type': 'application/x-javascript'
			});
			read = fs.createReadStream(file);
			return read.pipe(response);
		} else {
			body = 'Not Found';
			response.writeHead(404, {
				'Content-Length': body.length,
				'Content-Type': 'text/plain'
			});
			return response.end(body);
		}
	});

	web.listen(this.options.port, this.options.host);
	this.web = web;

	wss = new WSServer({
		server: web,
		path: '/livereload'
	});
	
	wss.on('connection',function(ws) {
		if(callback) callback();
		//console.log('Browser connected.');
		conns.push(ws);

		ws.on('message', function(msg, flag) {
			var handshake, protocols;
			msg = JSON.parse(msg);
			if (msg.command === 'hello') {
				protocols = msg.protocols;
				protocols.push('http://livereload.com/protocols/2.x-remote-control');
				protocols.push('http://livereload.com/protocols/official-7');
				handshake = {
					'command': 'hello',
					'protocols': protocols,
					'serverName': 'livereload-node'
				};
				ws.send(JSON.stringify(handshake));
			}
			if (msg.command === 'info' &amp;&amp; msg['url']) {
				//return console.log("Browser URL: " + msg.url);
			}
		});
		
		ws.on('close',function() {
			conns.splice(conns.indexOf(ws, 1));
			//return console.log('Browser disconnected.');
		});
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
};

Connector.prototype._scheduleReconnection = function() {
  if (!this._connectionDesired) {
    return;
  }
  if (!this._reconnectTimer.running) {
    this._reconnectTimer.<span class="apidocCodeKeywordSpan">start</span>(this._nextDelay);
    return this._nextDelay = Math.min(this.options.maxdelay, this._nextDelay * 2);
  }
};

Connector.prototype.sendCommand = function(command) {
  if (this.protocol == null) {
    return;
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.livereloadServer.stop" id="apidoc.element.jdf.livereloadServer.stop">
        function <span class="apidocSignatureSpan">jdf.livereloadServer.</span>stop
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">stop = function () {
	return this.web.close(function() {
		if (this.web) {
			return console.log('Shutdown the server.');
		}
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
this._uri = "ws://" + this.options.host + ":" + this.options.port + "/livereload";
this._nextDelay = this.options.mindelay;
this._connectionDesired = false;
this.protocol = 0;
this.protocolParser = new Parser({
  connected: function(protocol) {
    _this.protocol = protocol;
    _this._handshakeTimeout.<span class="apidocCodeKeywordSpan">stop</span>();
    _this._nextDelay = _this.options.mindelay;
    _this._disconnectionReason = 'broken';
    return _this.handlers.connected(protocol);
  },
  error: function(e) {
    _this.handlers.error(e);
    return _this._closeOnError();
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.openurl" id="apidoc.module.jdf.openurl">module jdf.openurl</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.openurl.open" id="apidoc.element.jdf.openurl.open">
        function <span class="apidocSignatureSpan">jdf.openurl.</span>open
        <span class="apidocSignatureSpan">(url, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function open(url, callback) {
    var child = spawn(command, [url]);
    var errorText = "";
    child.stderr.setEncoding('utf8');
    child.stderr.on('data', function (data) {
        errorText += data;
    });
    child.stderr.on('end', function () {
        if (errorText.length &gt; 0) {
            var error = new Error(errorText);
            if (callback) {
                callback(error);
            } else {
                throw error;
            }
        } else if (callback) {
            callback(error);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
Server.init( currentDir, localServerPort, jdf.config.cdn, jdf.getProjectPath(), comboDebug, Compress.addJsDepends);

if (typeof(autoOpenurl) != 'undefined' &amp;&amp; autoOpenurl) {
    var homepage = '/' + jdf.config.htmlDir + '/index.html';
    if (!f.exists(jdf.currentDir + homepage)) {
        homepage = '';
    }
    require("./openurl.js").<span class="apidocCodeKeywordSpan">open</span>('http://localhost:' + localServerPort
);
}
console.log('jdf server : running at '+ localServerPort);
console.log(Colors.gray('----------------------------------------'));
console.log('   Local: '+Colors.magenta('http://localhost:' + localServerPort + '/'));
var externalIp = 'http://'+jdf.getIp()+':' + localServerPort + '/';
console.log('External: '+Colors.magenta(externalIp));
console.log(Colors.gray('----------------------------------------'));
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.output" id="apidoc.module.jdf.output">module jdf.output</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.output.init" id="apidoc.element.jdf.output.init">
        function <span class="apidocSignatureSpan">jdf.output.</span>init
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (options){
	// console.log(options);
	
	if(jdf.config.build.hasCmdLog) console.log('jdf output ...');	
	
	var type = options.type,
		list = options.list,
		isbackup = options.isbackup,
		isdebug = options.isdebug,
		callback = options.callback;

	var outputdirName = jdf.config.outputDirName;
	var outputComment = jdf.config.output.comment;
	var encoding = jdf.config.output.encoding;
	var excludeFiles = jdf.config.output.excludeFiles;
		excludeFiles = excludeFiles ? excludeFiles + '|.vm|.scss|.less|.psd' : '.vm|.scss|.less|.psd';

	var weinre = jdf.config.build.weinre;
	var outputdir = outputdirName+'/'+ (options.projectPath || jdf.getProjectPath());
	var isbackup = typeof(isbackup) == 'undefined' ? false : isbackup;
	
	//[notice]è¾“å‡ºè·¯å¾„æš‚ä¸å¯é…ç½®
	var cssDir = path.normalize( jdf.bgCurrentDir + '/' + jdf.config.cssDir );
	var imagesDir = path.normalize( jdf.bgCurrentDir + '/' + jdf.config.imagesDir );
	var jsDir =  path.normalize( jdf.bgCurrentDir + '/' + jdf.config.jsDir );
	var htmlDir = path.normalize( jdf.bgCurrentDir + '/' + jdf.config.htmlDir );
	var widgetDir = path.normalize( jdf.bgCurrentDir + '/' + jdf.config.widgetDir );

	var debugHtml = '';
	if(weinre){
		fs.readdirSync(htmlDir).forEach(function(name){
			var pathname = path.join(htmlDir, name);
			if(f.isFile(pathname)){
				debugHtml += '&lt;li style="padding-bottom:0.2em;"&gt;&lt;a target="_blank" href="'+mobileWeinre(pathname)+'"&gt;'+name+'&lt;/a&gt;&lt;/li&gt;';
			}
		});

		debugHtml = '&lt;ul&gt;'+debugHtml+'&lt;/ul&gt;';

		f.write(path.join(htmlDir, '_debug.html'), debugHtml);
	}

	var core = function() {
		var logText = 'jdf output success!';
		var copyDefaultDir = function(){
			//jdf.config.baseDiræ˜¯ä¸€æœŸç›®å½•è§„åˆ’çš„é—®é¢˜
			var cssOutputDir = outputdir + '/' + jdf.config.cssDir.replace(jdf.config.baseDir+'/', '');
			var imagesOutputDir = outputdir + '/' + jdf.config.imagesDir;
			if(jdf.config.baseDir != ''){
				imagesOutputDir = outputdir + '/' + jdf.config.imagesDir.replace(jdf.config.baseDir+'/', '');
			}
			var jsOutputDir = outputdir + '/' + jdf.config.jsDir.replace(jdf.config.baseDir+'/', '');

			//å›¾ç‰‡ç›®å½•ä¸ä½äºŽcss/iä¸­
			if(jdf.config.imagesDir.split(jdf.config.cssDir).length  == 1 ){
				f.copy(imagesDir, imagesOutputDir);
			}
			
			f.copy(cssDir, cssOutputDir, '(css|'+$.imageFileType()+')$', (excludeFiles ? excludeFiles : '(less|scss)$'), null, null, null
, encoding);
			
			if(!jdf.config.build.es6Entry){
				f.copy(jsDir, jsOutputDir, (isdebug ? '(js|map)$' : 'js$'), (excludeFiles ? excludeFiles : 'babel$'), null, null, null, encoding
);
			}

			f.copy(htmlDir, outputdir+'/'+ (
				jdf.config.outputHtmlDir == null
				? jdf.config.htmlDir
				: jdf.config.outputHtmlDir
			), null, excludeFiles, null, null, null, encoding);

			// è¾“å‡ºwidget todo å¯é…ç½®
			var outputWidgetDir = outputdir+'/'+jdf.config.widgetDir;
			f.copy(widgetDir, outputWidgetDir,  '(js|css|'+$.imageFileType()+(isdebug ? '|map' : '') + ')$', (excludeFiles ? excludeFiles
 : '(less|scss|psd)$'), null, null, null, encoding);
			
			if(f.exists(widgetDir)){
				
				//å°†æ‰€æœ‰widget/imageså¤åˆ¶åˆ°html/images
				fs.readdirSync(widgetDir).forEach(function(dir){
					var source = widgetDir + '/' + dir;
					if(f.isDir(source) &amp;&amp; f.exists(source + '/images') ){
						f.mkdir(jdf.config.htmlDir+'/images');
						f.copy(source + '/images', outputdir + '/' + jdf.config.htmlDir+ '/images', null, null, null, null, null, encoding);
					};
				});

				//å¤åˆ¶åˆ°widgetçš„ç›®æ&nbsp;‡ç›®å½•ä¹‹åŽï¼Œå†å°†ç©ºç›®å½•åˆ&nbsp;é™¤
				fs.readdirSync(outputWidgetDir).forEach(function(dir){
					var realpath = fs.realpathSync(outputWidgetDir + '/' + dir);
					var dirs = fs.readdirSync(realpath);
					var files = f.getdirlist(realpath);

					if(files.length == 0 &amp;&amp; dirs.length == 0){
						fs.rmdirSync(realpath);
					}
				});

				//combineWidgetCssä¸‹widgetä¸­çš„å›¾ç‰‡widgert/a/i/a.pngè¾“å‡ºè‡³css/i/ç›®å½•ä¸‹
				if (jdf.config.output.combineWidgetCss){
					f.mkdir(imagesOutputDir);
					var imgList = f.getdirlist(widgetDir, $.imageFileType()+'$');
					imgList.forEach(function(imgListItem){
						f.copy(imgListItem, imagesOutputDir+'/'+ path.basename(imgListItem), null, null, null, null, null, encoding); ...</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.server" id="apidoc.module.jdf.server">module jdf.server</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.server.copyright" id="apidoc.element.jdf.server.copyright">
        function <span class="apidocSignatureSpan">jdf.server.</span>copyright
        <span class="apidocSignatureSpan">(port)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">copyright = function (port){
	var serverIp = server.getIp()+':'+port;
	var copyright = '&lt;p&gt;&lt;strong style="font-size:1.2em"&gt;jdf server &lt;/strong&gt;'+
		' &lt;strong&gt;IP&lt;/strong&gt; &lt;a href="http://'+serverIp+'"&gt;'+serverIp+'&lt;/a&gt;   '+	
		//'&lt;span style="font-size:0.8em"&gt;'+new Date()+'&lt;/span&gt;  '+
	'&lt;/p&gt;';
	return copyright;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
			realPath = realPath.replace(replacePath,'');
		}

		var response404 = function (){
			response.writeHead(404, {
				'Content-Type': 'text/html'
			});
			response.write('&lt;meta charset=UTF-8&gt;&lt;meta name=viewport content="width=device-width,initial-scale=1,
maximum-scale=1,user-scalable=no"&gt;&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;&lt;
;hr&gt;&lt;center&gt;'+server.<span class="apidocCodeKeywordSpan">copyright</span>(PORT)+'&lt;/center&gt;'
;);
			response.end();
		}

		fs.exists(realPath, function (exists) {
			var cdnUrl = cdn+pathname;
			if(!exists){
				response404();
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.server.getDirList" id="apidoc.element.jdf.server.getDirList">
        function <span class="apidocSignatureSpan">jdf.server.</span>getDirList
        <span class="apidocSignatureSpan">(realPath, pathname, port)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getDirList = function (realPath, pathname, port){
	// console.log(realPath);
	var dirname = '/';
	var html = '&lt;li style="padding-bottom:5px;"&gt;&lt;a href="../"&gt;../&lt;/a&gt;&lt;/li&gt;';
	realPath = path.normalize(realPath);
	pathname += '/';
	pathname = pathname.replace(/\/\//,'');

	fs.readdirSync(realPath).forEach(function(name){
		if( !/.Ds_Store$/.test(name) ){
			// console.log(name);
			var url = pathname +'/'+name;
			url = url.replace(/\/\//g,'/');
			url = encodeURI(url);
			dirname = path.dirname(url);
			if(f.isDir('.'+url)){
				url = url + '/';
				name = name + '/';
			}

			html += '&lt;li style="padding-bottom:0.2em;"&gt;&lt;a href="'+url+'"&gt;'+name+'&lt;/a&gt;&lt;/li&gt;';
		}
	})

	html = '&lt;ul&gt;' +html+ '&lt;/ul&gt;';
	html = '&lt;!DOCTYPE html&gt;&lt;html&gt;&lt;head&gt;&lt;meta charset=UTF-8&gt;&lt;meta name=viewport content="width=device-width,initial-scale=1,maximum-
scale=1,user-scalable=no"&gt;&lt;h1&gt;Index of '+dirname+'&lt;/h1&gt;&lt;hr/&gt;'+html+'&lt;hr/&gt; '+server.copyright(port);
	return html;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
							});
							response.end(err);
						} else {
							response.writeHead(200, {
								'Content-Type': "text/html"
							});

							var html = server.<span class="apidocCodeKeywordSpan">getDirList</span>(realPath, pathname, PORT);
							response.end(html, "binary");
						}
					});
				}

				if(f.isFile(realPath)){
					var ext = path.extname(realPath);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.server.getIp" id="apidoc.element.jdf.server.getIp">
        function <span class="apidocSignatureSpan">jdf.server.</span>getIp
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getIp = function (){
	var net = require('os').networkInterfaces();
    for(var key in net){
        if(net.hasOwnProperty(key)){
            var items = net[key];
            if(items &amp;&amp; items.length){
                for(var i = 0; i &lt; items.length; i++){
                    var ip = String(items[i].address).trim();
                    if(ip &amp;&amp; /^\d+(?:\.\d+){3}$/.test(ip) &amp;&amp; ip !== '127.0.0.1'){
                        return ip;
                    }
                }
            }
        }
    }
    return '127.0.0.1';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        homepage = '';
    }
    require("./openurl.js").open('http://localhost:' + localServerPort);
}
console.log('jdf server : running at '+ localServerPort);
console.log(Colors.gray('----------------------------------------'));
console.log('   Local: '+Colors.magenta('http://localhost:' + localServerPort + '/'));
var externalIp = 'http://'+jdf.<span class="apidocCodeKeywordSpan">getIp</span>()+':' + localServerPort + &amp;#
x27;/';
console.log('External: '+Colors.magenta(externalIp));
console.log(Colors.gray('----------------------------------------'));

if(jdf.config.build.qrcode != false){
    require("qrcode-terminal").generate(externalIp, { small: false }, function(qrcode){
        console.log(Colors.gray(qrcode));
        console.log(Colors.gray('----------------------------------------'));
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.server.init" id="apidoc.element.jdf.server.init">
        function <span class="apidocSignatureSpan">jdf.server.</span>init
        <span class="apidocSignatureSpan">(serverCurrentDir, port, cdn, replacePath, comboDebug, addJsDepends, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">init = function (serverCurrentDir, port, cdn, replacePath, comboDebug, addJsDepends, callback){

	if (typeof(port) != 'undefined') {
		PORT = port;
	}

	if (typeof(comboDebug) == 'undefined') {
		comboDebug = false;
	}

	var config = http.createServer(function (request, response) {
		var requestUrl = request.url;
		var isComboUrl = /\?\?/.test(requestUrl);
		var pathname = url.parse(requestUrl).pathname;

		if (typeof(serverCurrentDir) == 'undefined') {
			var realPath = fs.realpathSync('.') +'/'+ pathname;
		}else {
			var realPath = serverCurrentDir +'/'+ pathname;
		}
		realPath = decodeURI(realPath);

		var ext = path.extname(realPath);
		ext = ext ? ext.slice(1) : 'unknown';

		if(isComboUrl){
			<span class="apidocCodeCommentSpan">/**
				??a.js,b.jsè®¡ç®—.jsæ‰©å±•å
				??a.css,b.cssè®¡ç®—.cssæ‰©å±•å
			*/
</span>			var comboUrlTemp = requestUrl.split(',');
			ext = path.extname(comboUrlTemp[comboUrlTemp.length-1]);
			ext = ext ? ext.slice(1) : 'unknown';
		}

		if(typeof(replacePath) != 'undefined' &amp;&amp; comboDebug){
			//æ›¿æ¢æŽ‰è·¯å¾„ä¸­projectPath, æœ‰é£Žé™©å—?
			realPath = realPath.replace(replacePath,'');
		}

		var response404 = function (){
			response.writeHead(404, {
				'Content-Type': 'text/html'
			});
			response.write('&lt;meta charset=UTF-8&gt;&lt;meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable
=no"&gt;&lt;center&gt;&lt;h1&gt;404 Not Found&lt;/h1&gt;&lt;/center&gt;&lt;hr&gt;&lt;center&gt;'+server.copyright(PORT)+'&lt;/center&gt;');
			response.end();
		}

		fs.exists(realPath, function (exists) {
			var cdnUrl = cdn+pathname;
			if(!exists){
				response404();
				return;
			}
			if (isComboUrl) {
				//cdnæ£€æµ‹åŒåæ–‡ä»¶
				//todoå¢žåŠ&nbsp;çŸ­è·¯å¾„æ”¯æŒ requestUrl
				cdnUrl = requestUrl;

				var contentType = mine[ext] || "text/plain";
				var fileContent = '';

				//ä»¥??å…ˆåˆ†éš”ä¸ºæ•°ç»„
				var comboUrl = requestUrl.split('??');
				var comboFile = [];

				if(comboUrl.length &gt; 0){
					//å°†å¤´å°¾çš„æ–œæ&nbsp;åŽ»æŽ‰
					// comboUrl[0] = comboUrl[0].replace(/^\//, '').replace(/\/$/, '');

					if(comboUrl[1]){
						//ä»¥é€—å·å°†æ–‡ä»¶åç§°åˆ†éš”ä¸ºæ•°ç»„
						comboFile = comboUrl[1].split(',');
					}
				}

				comboFile.forEach(function(file){
					var fileDir = '';
					var content = '';

					//å°†å¤´å°¾çš„æ–œæ&nbsp;åŽ»æŽ‰
					file = file.replace(/^\//, '').replace(/\/$/, '');
					if(comboUrl[0] !== ''){
						fileDir = comboUrl[0] + '/' + file;
					}else{
						fileDir = file;
					}

					var currentDir = serverCurrentDir + fileDir;
					if(f.exists(currentDir)){
						content = f.read(currentDir);
						if( typeof(addJsDepends) == 'function' ){
							content = addJsDepends(currentDir);
						}

						//å¦‚æžœä»£ç&nbsp;çš„æœ«å°¾æ²¡æœ‰åˆ†å·ï¼Œåˆ™è‡ªåŠ¨æ·»åŠ&nbsp;ä¸€ä¸ªã€‚ä»¥é¿å…ä»£ç&nbsp;åˆå¹¶å‡ºçŽ°å¼‚å¸¸ã€‚
						if(!/[;\r\n]$/.test(content) &amp;&amp; ext == 'js'){
							content += ';';
						}
						fileContent += content;
					}else{
						fileDir = cdnUrl + fileDir;
						response404();
					}
				});

				response.writeHead(200, {
					'Content-Type': contentType
				});
				response.write(fileContent);
				response.end();

			} else {
				if(f.isDir(realPath)){
					fs.readdir(realPath, function (err, file) {
						if (err) {
							response.writeHead(500, {
								'Content-Type': mine.html
							});
							response.end(err);
						} else {
							response.writeHead(200, {
								'Content-Type': "text/html"
							});

							var html = server.getDirList(realPath, pathname, PORT);
							response.end(html, "binary");
						}
					});
				}

				if(f.isFile(realPath)){
					var ext = path.extname(realPath);
					ext = ext.replace('.', '');
					var contentType = mine[ext] || "text/plain";
					var content = fs.readFileSync(realPath);

    				response.writeHead(200, {
						'Content-Type': contentType
					});

					response.end(content);
				}
			}
		});
	});
	
	config.listen(PORT, function(err){
		if(callback) callback(1);
	});

	config.on('error', function(err){
		if(callback) callback(0);
	});
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...



var jdf = require('./lib/jdf.js');

module.exports = {
	init: function(argv) {
		jdf.<span class="apidocCodeKeywordSpan">init</span>(argv);
	}
};
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.server.joinbuffers" id="apidoc.element.jdf.server.joinbuffers">
        function <span class="apidocSignatureSpan">jdf.server.</span>joinbuffers
        <span class="apidocSignatureSpan">(bufferStore)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">joinbuffers = function (bufferStore) {
    var length = bufferStore.reduce(function(previous, current) {
        return previous + current.length;
    }, 0);

    var data = new Buffer(length);
    var startPos = 0;
    bufferStore.forEach(function(buffer){
        buffer.copy(data, startPos);
        startPos += buffer.length;
    });
    return data;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.vm" id="apidoc.module.jdf.vm">module jdf.vm</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.vm.parse" id="apidoc.element.jdf.vm.parse">
        function <span class="apidocSignatureSpan">jdf.vm.</span>parse
        <span class="apidocSignatureSpan">(str, dirname)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">parse = function (str, dirname){
	var dirname = typeof dirname == 'undefined' ? '' : dirname;
	var arr = str.match(/^(&lt;!--){0}\s*#parse\([\"|\'](.*?)[\"|\']\)(\s\n\r)*(--&gt;){0}/gmi);
	var res = {
		vm:[],
		tpl:[],
		js:[],
		css:[]
	};
	
	if (arr) {
		for (var i =0  ; i&lt;arr.length  ; i++ ){
			var temp = arr[i].match(/#parse\([\"|\'](.*?)[\"|\']\)/);
			if(temp){
				var basename = temp[1];
				if (basename) {
					var source  = dirname + basename;
					source = path.normalize(source);

					var dirname1 = path.dirname(source);
					var dirlist1 = f.getdirlist(dirname1);
					
					dirlist1.forEach(function(item){
						var item = item.replace(jdf.currentDir, '');
						item = item.replace(/\\/g,'/');
						
						if($.is.vm(item)){
							res.vm.push(item);
						}

						if($.is.tpl(item)){
							res.tpl.push(item);
						}

						if($.is.css(item)||$.is.less(item)||$.is.sass(item)){
							res.css.push($.getCssExtname(item));
						}

						if($.is.js(item)){
							res.js.push(item);
						}
					});

					if (f.exists(source)) {
						var content = f.read(source);
						if (content) {
							//æ›¿æ¢
							str = str.replace(temp[0], content);
						}
					}
				}
			}
		}
	}

	return {
		content:str,
		url:res
	};
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						var fileUrlDirname = path.dirname(fileUrl)+'/';
						var dataSourceContent={};
						var dataSourceUrl = fileUrlDirname+widgetName+$.is.dataSourceSuffix ;

						try {
							if (f.exists(dataSourceUrl)) {
								var temp = f.read(dataSourceUrl);
								if (temp &amp;&amp; temp != '')  dataSourceContent = JSON.<span class="apidocCodeKeywordSpan">parse</span>(temp
);
							}
						} catch (e) {
							console.log(dataSourceUrl);
							console.log(e);
							return;
						}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.vm.rander" id="apidoc.element.jdf.vm.rander">
        function <span class="apidocSignatureSpan">jdf.vm.</span>rander
        <span class="apidocSignatureSpan">(vmSource, dataObj, dirname)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">rander = function (vmSource, dataObj, dirname){
	if (vmSource &amp;&amp; dataObj) {
		var vmTpm = vm.parse(vmSource, dirname);
		return {
			content:Velocity.render(vmTpm.content, dataObj),
			url:vmTpm.url
		};
	}
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
						}

						var dataObj = $.merageObj( dataSourceContent, widgetDataObj);
						
						//vmå¤„ç†
						try {
							if (dataObj &amp;&amp; vmContent &amp;&amp; jdf.config.output.vm){
								var vmRander =  Vm.<span class="apidocCodeKeywordSpan">rander</span>(vmContent, dataObj, fileUrlDirname);
								
								//vmç»§æ‰¿js/css
								if(vmRander.url.js){
									vmRander.url.js.forEach(function(item){
										 jsCompileFn(item);
									})
								}
...</pre></li>
    </ul>


</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.jdf.widget" id="apidoc.module.jdf.widget">module jdf.widget</a></h1>


    <h2>
        <a href="#apidoc.element.jdf.widget.all" id="apidoc.element.jdf.widget.all">
        function <span class="apidocSignatureSpan">jdf.widget.</span>all
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">all = function () {
    jdf.bgMkdir();

    var htmlDir = jdf.config.htmlDir;
    f.mkdir(htmlDir);

    var target = htmlDir + '/allwidget.html';

    var widgetDir = f.currentDir() + '/' + jdf.config.widgetDir;
    if (!f.exists(widgetDir)) {
        console.log('jdf error widget not exists');
        return;
    }

    var core = function() {
        var widgetListHtml = '';
        fs.readdirSync(widgetDir).forEach(function(item) {
            if (f.excludeFiles(item)) {
                widgetListHtml += '{%widget name="' + item + '"%}\r\n';
            }
        });

        var result = widget.templete('\r\n' + widgetListHtml, jdf.getProjectPath() + ' - all widget preview');
        f.write(target, result);
    }

    core();
    jdf.argvInit('build', '-open', function() {
        //todo watch
        //core();
        Openurl.open('http://localhost:' + jdf.config.localServerPort + '/' + target);
        console.log('jdf open you broswer to see it');
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
var cmd3 = argv[3],
    cmd4 = argv[4],
    cmd5 = argv[5];
var force = cmd5 != 'undefined' &amp;&amp; cmd5 == '-force' ? true : false

if (cmd3 == '-all' || cmd3 == '-a') {
    Log.send('widget-all');
    Widget.<span class="apidocCodeKeywordSpan">all</span>(cmd4);
}

if (cmd3 == '-list' || cmd3 == '-l') {
    Log.send('widget-list');
    Widget.list(cmd4);
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.create" id="apidoc.element.jdf.widget.create">
        function <span class="apidocSignatureSpan">jdf.widget.</span>create
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (name) {
    var widgetDir = 'widget/' + name;
    if (f.exists(widgetDir)) {
        console.log('jdf warnning : widget [' + name + '] is exists');
        return;
    }

    console.log('jdf tips: if you create it, input "y" else input "n" ');
    var Prompt = require('simple-prompt');
    var questions = [{
        question: 'vm',
        required: true
    }, {
        question: 'js'
    }, {
        question: 'scss'
    }, {
        question: 'json'
    }];
    var profile = new Prompt(questions);
    profile.create().then(function(error, answers) {
        if (error) {
            return;
        }
        var createFilesArray = ['component.json'];
        if (answers.vm == 'y') createFilesArray.push(name + '.vm');
        if (answers.js == 'y') createFilesArray.push(name + '.js');
        if (answers.scss == 'y') createFilesArray.push(name + '.scss');
        if (answers.json == 'y') createFilesArray.push(name + '.json');

        f.mkdir(widgetDir);
        //jdf.config.widget.createFiles
        createFilesArray.forEach(function(item) {
            f.write(widgetDir + '/' + item, '');
        });

        //ç»™compoent.jsonå†™å…¥é»˜è®¤çš„å†…å®¹
        var componentJson = '{\r\n' +
            '   "name": "' + name + '",\r\n' +
            '   "version": "1.0.0",\r\n' +
            '   "dependencies": {}\r\n' +
            '}';
        f.write(widgetDir + '/component.json', componentJson);

        console.log('jdf widget [' + name + '] create done');
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    } else if (cmd3 == '-publish' || cmd3 == '-p' &amp;&amp; hasCmd4()) {
        Log.send('widget-publish');
        Widget.publish(cmd4, force);

    } else if ((cmd3 == '-create' || cmd3 == '-c') &amp;&amp; hasCmd4()) {
        Log.send('widget-create');
        Widget.<span class="apidocCodeKeywordSpan">create</span>(cmd4);

    }
}

if (!cmd3) {
    widgetCmd();
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.hasWidget" id="apidoc.element.jdf.widget.hasWidget">
        function <span class="apidocSignatureSpan">jdf.widget.</span>hasWidget
        <span class="apidocSignatureSpan">(path)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">hasWidget = function (path) {
    var reg = new RegExp(jdf.config.widgetDir, 'gm');
    return reg.test(path);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.install" id="apidoc.element.jdf.widget.install">
        function <span class="apidocSignatureSpan">jdf.widget.</span>install
        <span class="apidocSignatureSpan">(name, force)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">install = function (name, force) {
    var force = typeof(force) == 'undefined' ? false : force;
    var ftp = require('./ftp.js');

    ftp.tryConnect().done(function() {
        download(name, force);
    });

    function download(name, force) {

        var source = jdf.config.widgetServerDir + '/widget/' + name;
        var target = f.currentDir() + '/widget/' + name;
        var widgetname = name;

        ftp.listMain(source, function(data) {
            if (data != 'error') {
                var version = '';
                data.forEach(function(item) {
                    version = item.name;
                })

                if (!parseInt(version)) {
                    version = '';
                }

                var widgetNameVersion = widgetname + '/' + version;

                if (f.exists(target) &amp;&amp; !force) {
                    ftp.client.end();
                    console.log('jdf warnning widget [' + widgetname + '] is exists in current project');
                } else {

                    downloadMain(source + '/' + version, target, function(data) {
                        if (data == 'error') {
                            console.log('jdf warnning widget [' + widgetNameVersion + '] is not exists on server ');
                        } else {
                            console.log('jdf widget [' + widgetNameVersion + '] install done from server ');
                        }
                        f.readJSON(target + '/component.json', function(data) {
                            for (name in data.dependencies) {
                                download(name, force);
                            }
                            ftp.client.end();
                        });
                    });
                }
            } else {
                console.log('jdf error [widget.install] ftp error!');
            }
        });
    }

    function downloadMain(source, target, callback, isEnd) {
        ftp.listMain(source, function(data) {
            if (data != 'error') {
                f.mkdir(target);
                var serverNum = 0,
                    localNum = 0;
                data.forEach(function(item) {
                    if (item.type == 'file') {
                        serverNum += 1;
                        var sourcePut = source + '/' + item.name;
                        var targetPut = target + '/' + item.name;

                        ftp.get(sourcePut, targetPut, function() {
                            localNum += 1;
                            if (serverNum == localNum) {
                                if (callback) callback();
                            }
                        });
                    }
                })
            } else {
                if (callback) callback(data);
            };
        });
    }

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    Log.send('upload');
    FtpUpload.init(argv, configData);

} else if (cmd2 === 'i' || cmd2 === 'install') {
    switch (argv[3]) {
        case 'demo':
            Log.send('install-demo');
            jdf.<span class="apidocCodeKeywordSpan">install</span>('demo', argv[4]);
            return;
        case 'init':
            Log.send('install-init');
            jdf.install('init', argv[4]);
            return;
        default:
            console.log('You can "jdf install demo or "jdf install init"');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.list" id="apidoc.element.jdf.widget.list">
        function <span class="apidocSignatureSpan">jdf.widget.</span>list
        <span class="apidocSignatureSpan">()</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">list = function () {
    var publishDir = jdf.config.widgetServerDir + '/widget';

    var ftp = require('./ftp.js');
    ftp.list(publishDir, function(data) {
        if (data) {
            console.log('jdf widget list: ');
            console.log('----------------');
            data.forEach(function(item) {
                console.log(item.name);
            })
        }
        ftp.client.end();
    })
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

}

/**
 * @get server files list main
 */
ftp.listMain = function(source, callback) {
    ftp.client.<span class="apidocCodeKeywordSpan">list</span>(source, function(err, list) {
        if (err) {
console.log('jdf error [ftp.list] - ' + err);
ftp.client.end();
        } else {

if (list &amp;&amp; list.length &gt; 0) {
    var filesList = [];
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.pathCheck" id="apidoc.element.jdf.widget.pathCheck">
        function <span class="apidocSignatureSpan">jdf.widget.</span>pathCheck
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">pathCheck = function (name) {
    if (typeof(name) == 'undefined') return true;

<span class="apidocCodeCommentSpan">    /*
    if ( !/^widget\//.test(name) ) {
        console.log('jdf error widget name format error');
        return true;
    }*/
</span>
    if (!f.exists('widget/' + name)) {
        console.log('jdf error widget path is not exists');
        return true;
    }

    return false;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
 * @æœ¬åœ°é¢„è§ˆwidget
 * @example  jdf widget -preview widget/header
 * @æœ¬åœ°widgetä¸­tpl,css,jsæ‹¼è£…åŽhtmlæ–‡ä»¶æ”¾åœ¨å½“å‰widgetä¸­
 */
widget.preview = function(name) {
jdf.bgMkdir();

if (widget.<span class="apidocCodeKeywordSpan">pathCheck</span>(name)) {
    return;
}

var target = 'widget/' + name;
var widgetname = name;

var core = function() {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.preview" id="apidoc.element.jdf.widget.preview">
        function <span class="apidocSignatureSpan">jdf.widget.</span>preview
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">preview = function (name) {
    jdf.bgMkdir();

    if (widget.pathCheck(name)) {
        return;
    }

    var target = 'widget/' + name;
    var widgetname = name;

    var core = function() {
        var result = widget.templete(null, widgetname);
        fs.readdirSync(target).forEach(function(item) {
            if (item &amp;&amp; f.excludeFiles(item)) {
                var itemContent = f.read(target + '/' + item);

                if ($.is.tpl(item) || $.is.vm(item)) {
                    hasTpl = true;
                    itemContent = itemContent;
                    result = $.placeholder.insertBody(result, itemContent);
                }

                if ($.is.css(item)) {
                    result = $.placeholder.insertHead(result, $.placeholder.cssLink(item));
                }

                if ($.is.js(item)) {
                    result = $.placeholder.insertHead(result, $.placeholder.jsLink(item));
                }
            }
        });

        var indexUrl = target + '/' + widgetname + '.html';
        f.write(indexUrl, result);
    }

    core();

    var localServerPort = jdf.config.localServerPort;
    FindPort(localServerPort, function(data) {
        if (!data) {
            console.log('Port ' + localServerPort + ' is tack up');
            localServerPort += 1000;
            jdf.config.localServerPort = localServerPort;
        }

        Server.init(target + '/', jdf.config.localServerPort);
        Openurl.open('http://localhost:' + jdf.config.localServerPort + '/' + widgetname + '.html');
        console.log('jdf open you broswer to see it');

        //ç›‘å¬
        Node_watch(target, function(widgetname) {
            core();
        });
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
]);
console.log(content.join('\n'));
            }

            if (cmd3) {
if (cmd3 == '-preview' || cmd3 == '-pre' &amp;&amp; hasCmd4()) {
    Log.send('widget-preview');
    Widget.<span class="apidocCodeKeywordSpan">preview</span>(cmd4);

} else if (cmd3 == '-install' || cmd3 == '-i' &amp;&amp; hasCmd4()) {
    Log.send('widget-install');
    Widget.install(cmd4, force);

} else if (cmd3 == '-publish' || cmd3 == '-p' &amp;&amp; hasCmd4()) {
    Log.send('widget-publish');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.publish" id="apidoc.element.jdf.widget.publish">
        function <span class="apidocSignatureSpan">jdf.widget.</span>publish
        <span class="apidocSignatureSpan">(name, force)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">publish = function (name, force) {
    var publishDir = jdf.config.widgetServerDir + '/widget';

    var force = typeof(force) == 'undefined' ? false : force;
    if (widget.pathCheck(name)) {
        return;
    }

    var cUrl = 'widget/' + name + '/' + 'component.json';
    f.readJSON(cUrl, function(data) {
        if (data) {
            var cName = data.name;
            var cVersion = data.version;
            var ftp = require('./ftp.js');
            var target = publishDir + '/' + name + '/' + cVersion;
            ftp.mkdir(publishDir + '/' + name);

            ftp.list(target, function(data) {
                if (data == 'error' || force) {
                    ftp.mkdir(publishDir + '/' + name + '/');
                    ftp.mkdir(target);

                    ftp.uploadMain('widget/' + name, target, null, null, null, null, null, function(err) {
                        console.log('jdf widget "' + '' + name + '/' + cVersion + '" publish done!');
                    });
                } else {
                    console.log('jdf warnning "' + name + '/' + cVersion + '" is exists in server');
                }
            });
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    } else if (cmd3 == '-install' || cmd3 == '-i' &amp;&amp; hasCmd4()) {
        Log.send('widget-install');
        Widget.install(cmd4, force);

    } else if (cmd3 == '-publish' || cmd3 == '-p' &amp;&amp; hasCmd4()) {
        Log.send('widget-publish');
        Widget.<span class="apidocCodeKeywordSpan">publish</span>(cmd4, force);

    } else if ((cmd3 == '-create' || cmd3 == '-c') &amp;&amp; hasCmd4()) {
        Log.send('widget-create');
        Widget.create(cmd4);

    }
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.search" id="apidoc.element.jdf.widget.search">
        function <span class="apidocSignatureSpan">jdf.widget.</span>search
        <span class="apidocSignatureSpan">(name)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">search = function (name) {

}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
*/

exports = module.exports = function(source, target, host, argv, callbak){
    var tasks = [];

    source.forEach(function(sourceItem){
var i = sourceItem.replace(jdf.currentDir+'/'+jdf.config.outputDirName,'');
if(i.<span class="apidocCodeKeywordSpan">search</span>("\\\\") != -1){
    i = sourceItem.replace(jdf.currentDir+'\\'+jdf.config.outputDirName,'');
}

//åªå–æ–‡ä»¶é‡Œé¢çš„æ–‡ä»¶
if(argv[3] == '-custom' || argv[3] == '-c'){
    i = i.replace(argv[4], '')
}
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.jdf.widget.templete" id="apidoc.element.jdf.widget.templete">
        function <span class="apidocSignatureSpan">jdf.widget.</span>templete
        <span class="apidocSignatureSpan">(str, title)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">templete = function (str, title) {
    if (typeof(str) == 'undefined' || !str) {
        var str = '';
    }

    var css = '';
    jdf.config.widget.css.forEach(function(item) {
        css += '&lt;link rel="stylesheet" type="text/css" href="' + item + '" media="all" /&gt;\r\n';
    })

    var js = '';
    jdf.config.widget.js.forEach(function(item) {
        js += '&lt;script type="text/javascript" src="' + item + '"&gt;&lt;/script&gt;\r\n';
    })

    return '&lt;!DOCTYPE html&gt;' + '\r\n' +
        '&lt;html&gt;' + '\r\n' +
        '&lt;head&gt;' + '\r\n' +
        '&lt;meta charset="utf-8" /&gt;' + '\r\n' +
        '&lt;title&gt;' + title + '&lt;/title&gt;' + '\r\n' + css + js +
        '&lt;/head&gt;' + '\r\n' +
        '&lt;body&gt;' + '\r\n' + str + '\r\n' +
        '&lt;/body&gt;' + '\r\n' +
        '&lt;/html&gt;';
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    var widgetListHtml = '';
    fs.readdirSync(widgetDir).forEach(function(item) {
        if (f.excludeFiles(item)) {
            widgetListHtml += '{%widget name="' + item + '"%}\r\n';
        }
    });

    var result = widget.<span class="apidocCodeKeywordSpan">templete</span>('\r\n' + widgetListHtml, jdf.getProjectPath
() + ' - all widget preview');
    f.write(target, result);
}

core();
jdf.argvInit('build', '-open', function() {
    //todo watch
    //core();
...</pre></li>
    </ul>


</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>